(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{449:function(r,t,e){"use strict";e.r(t);var n=e(42),a=Object(n.a)({},(function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("p",[r._v("目录:")]),r._v(" "),e("h3",{attrs:{id:"文章目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文章目录"}},[r._v("#")]),r._v(" 文章目录")]),r._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#1_3",target:"_blank",rel:"noopener noreferrer"}},[r._v("1. 简述"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#2_20",target:"_blank",rel:"noopener noreferrer"}},[r._v("2. 分阶段讨论"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_22",target:"_blank",rel:"noopener noreferrer"}},[r._v("离线数据准备"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_23",target:"_blank",rel:"noopener noreferrer"}},[r._v("协同数据"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_30",target:"_blank",rel:"noopener noreferrer"}},[r._v("特征数据"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#itemTrigger2item_66",target:"_blank",rel:"noopener noreferrer"}},[r._v("itemTrigger2item 数据表准备"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_85",target:"_blank",rel:"noopener noreferrer"}},[r._v("在线召回"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#userTrigger__89",target:"_blank",rel:"noopener noreferrer"}},[r._v("userTrigger 查询"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#itemTrigger__91",target:"_blank",rel:"noopener noreferrer"}},[r._v("itemTrigger 召回"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_93",target:"_blank",rel:"noopener noreferrer"}},[r._v("注意事项"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_103",target:"_blank",rel:"noopener noreferrer"}},[r._v("过滤最近已看"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_106",target:"_blank",rel:"noopener noreferrer"}},[r._v("模型排序"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_115",target:"_blank",rel:"noopener noreferrer"}},[r._v("多目标"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_119",target:"_blank",rel:"noopener noreferrer"}},[r._v("展示打散"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#25_bandit__128",target:"_blank",rel:"noopener noreferrer"}},[r._v("2.5 bandit 探索"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#3__131",target:"_blank",rel:"noopener noreferrer"}},[r._v("3. 推荐效果评价"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#31__132",target:"_blank",rel:"noopener noreferrer"}},[r._v("3.1 投放前评价"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#32__137",target:"_blank",rel:"noopener noreferrer"}},[r._v("3.2 投放后效果评价"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#4_140",target:"_blank",rel:"noopener noreferrer"}},[r._v("4. 冷启动"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#41_141",target:"_blank",rel:"noopener noreferrer"}},[r._v("4.1 新用户"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#42_143",target:"_blank",rel:"noopener noreferrer"}},[r._v("4.2 新商品"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_145",target:"_blank",rel:"noopener noreferrer"}},[r._v("其他特征"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_146",target:"_blank",rel:"noopener noreferrer"}},[r._v("实时相关"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#context_148",target:"_blank",rel:"noopener noreferrer"}},[r._v("context 相关"),e("OutboundLink")],1)])])]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_151",target:"_blank",rel:"noopener noreferrer"}},[r._v("神经网络进阶"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#FAQ_153",target:"_blank",rel:"noopener noreferrer"}},[r._v("相关 FAQ"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#_166",target:"_blank",rel:"noopener noreferrer"}},[r._v("参考"),e("OutboundLink")],1)])]),r._v(" "),e("h1",{attrs:{id:"_1-简述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-简述"}},[r._v("#")]),r._v(" 1. 简述")]),r._v(" "),e("p",[r._v("推荐系统用处很大, 遍地开花, 什么都可以推荐, 如抖音推荐视频, 百度推荐广告, 淘宝推荐商品, 咨询应用推荐文章 等等. 用了推荐系统, 用户点击变多了, 商家也赚得多了, 何乐不为呢?\n本文就以"),e("strong",[r._v("商品推荐")]),r._v("为例, 把各种做法和实现原理做个综述.")]),r._v(" "),e("p",[r._v("一般讲推荐的文章, 只提思想, 略过了工程实现, 而要工程落地的话, 就必须思考 "),e("em",[r._v("数据结构怎么设计, 哪些数据是线下准备的, 哪些数据是线上计算的, 推荐系统各模块之间的耦合和联系又是怎样的")]),r._v(" 等问题.\n笔者作为一个热心肠的人, 就把业界的惯用做法放出来, 让大家过一下瘾.")]),r._v(" "),e("p",[r._v("推荐的本质很简单: "),e("strong",[r._v("给一个足够大的候选池, 挑出用户在没有明确意图下的最感兴趣的优质东西.")]),r._v(" 所以要做的事情有两块:")]),r._v(" "),e("ol",[e("li",[r._v("计算商品与用户"),e("strong",[r._v("兴趣的相关度")]),r._v(".")]),r._v(" "),e("li",[r._v("用户希望看到优质热门商品, 所以要结合"),e("strong",[r._v("商品的质量分")]),r._v("综合排序.")])]),r._v(" "),e("p",[r._v("推荐系统大致的处理流程我画了出来:")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdn.net/20180124190528590",alt:"img"}})]),r._v(" "),e("p",[r._v("figure 1 推荐系统的数据流转")]),r._v(" "),e("h1",{attrs:{id:"_2-分阶段讨论"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-分阶段讨论"}},[r._v("#")]),r._v(" 2. 分阶段讨论")]),r._v(" "),e("p",[r._v("对于图 1 的流程, 我们分阶段讨论.")]),r._v(" "),e("h2",{attrs:{id:"离线数据准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#离线数据准备"}},[r._v("#")]),r._v(" 离线数据准备")]),r._v(" "),e("h3",{attrs:{id:"协同数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#协同数据"}},[r._v("#")]),r._v(" 协同数据")]),r._v(" "),e("p",[r._v("基本思想：在购买了"),e("code",[r._v("item_1")]),r._v("物品的用户集合中，很多也买了"),e("code",[r._v("item_2")]),r._v("，那么其他"),e("code",[r._v("item_1")]),r._v("的购买者也是"),e("code",[r._v("item_2")]),r._v("的潜在购买者。")]),r._v(" "),e("p",[r._v("在此基本思想上, 还可以运用很多改进算法. 所以我们可以讲协同是一类算法的统称. 它们的输入输出是这样的:\ninput : "),e("code",[r._v("< user_id, click_item_list>")]),r._v("\noutput: "),e("code",[r._v("< item_id, proximate_item_list>")]),r._v("\n更多讨论见我的另一篇文章 <<推荐系统中的 match 阶段>> , 见参考 [1].")]),r._v(" "),e("h3",{attrs:{id:"特征数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特征数据"}},[r._v("#")]),r._v(" 特征数据")]),r._v(" "),e("p",[r._v("需要事先建立起衔接 用户偏好 与 商品特征的特征维度. 如 卖家, 一级类目, 叶子类目 等.")]),r._v(" "),e("ul",[e("li",[r._v("对用户\n为了更好的区分不同的偏好维度, 可以用到 Trigger 这种数据结构.")])]),r._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("class Trigger{\n\tlong triggerType;\t// 主键, 便于UserTrigger 与 ItemTrigger 通过主键当外键使用.\n\tlong triggerId; //如 偏爱类目id\n\tdouble score; //此trigger的重要程度. 比如 商品协同 要比 类目匹配 优先考虑.\n}\n")])]),r._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[r._v("1")]),e("br"),e("span",{staticClass:"line-number"},[r._v("2")]),e("br"),e("span",{staticClass:"line-number"},[r._v("3")]),e("br"),e("span",{staticClass:"line-number"},[r._v("4")]),e("br"),e("span",{staticClass:"line-number"},[r._v("5")]),e("br")])]),e("p",[r._v("借助于 trigger 体系, 通常用数据结构"),e("code",[r._v("UserTrigger")]),r._v("表示用户特征.")]),r._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("class UserTrigger{\n\tlong userId; //用户id\n\tTrigger trigger;\n\tdouble score;\t\t// 偏爱程度, 可以用 [0,1] 正规化\n}\n")])]),r._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[r._v("1")]),e("br"),e("span",{staticClass:"line-number"},[r._v("2")]),e("br"),e("span",{staticClass:"line-number"},[r._v("3")]),e("br"),e("span",{staticClass:"line-number"},[r._v("4")]),e("br"),e("span",{staticClass:"line-number"},[r._v("5")]),e("br")])]),e("p",[r._v("把这些记录放在表"),e("code",[r._v("User2ItemTrigger")]),r._v("中的话, 联合主键为"),e("code",[r._v("userId,triggerType,triggerId")]),r._v(".\n这里的"),e("code",[r._v("Item")]),r._v(" 并不是商品, 而是是泛指品牌, 类目这种.")]),r._v(" "),e("ul",[e("li",[r._v("对商品\n商品的特征包括两部分: 品牌, 类目等固有属性是后台上架时本身就有的; 适用人群等信息还是上架一段时间后基于统计得到的.\n在建立商品的 i2i 召回数据时, 也可以用下面的数据结构.")])]),r._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("class ItemTrigger{\n\tlong itemId; //商品id\n\tTrigger trigger;\n\tdouble score;\t\t// 联系紧密程度, 可以用 [0,1] 正规化\n}\n")])]),r._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[r._v("1")]),e("br"),e("span",{staticClass:"line-number"},[r._v("2")]),e("br"),e("span",{staticClass:"line-number"},[r._v("3")]),e("br"),e("span",{staticClass:"line-number"},[r._v("4")]),e("br"),e("span",{staticClass:"line-number"},[r._v("5")]),e("br")])]),e("p",[r._v("像购买能力这种关键特征, 存储的详细一点比较好. 比如购买能力不能只按价格区分, 因为不同的东西价格档位就不一样 (如 手机普遍千元以上, 但台灯在百元左右). 同一个用户, 在不同类目下的消费风格也不一样 (如手机买个普通能用的就行, 但衣服都要买上千块的名牌), 也要区分存储.\n类似于"),e("code",[r._v("User2ItemTrigger")]),r._v(", 我们也建立了 "),e("code",[r._v("Item2ItemTrigger")]),r._v(" 表. 联合主键为"),e("code",[r._v("itemId,triggerType,triggerId")]),r._v(".\n第一个"),e("code",[r._v("Item")]),r._v(" 是泛指品牌, 类目这种, 第二个才是商品.")]),r._v(" "),e("h3",{attrs:{id:"itemtrigger2item-数据表准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#itemtrigger2item-数据表准备"}},[r._v("#")]),r._v(" itemTrigger2item 数据表准备")]),r._v(" "),e("p",[r._v("为了保证召回结果的多样性, 准备这部分数据时也会进行截断, 比如一级类目, 同一个一级类目下可能有上万个商品, 一般按个数 =50 5050 截断.\n那么问题可以抽象为 "),e("code",[r._v("<trigger,{item}>")]),r._v(" 二元组中, item 集合过大, 舍弃谁留下谁, 怎么做决策呢?\n可以考虑这个公式:\nb a n d i t _ c t r = { c l i c k n , p v < n c l i c k p v − 1 n , otherwise bandit_ctr =")]),r._v(" "),e("p",[r._v("{clickn,clickpv−1n,amp;pvamp;otherwiselt;n{clickn,amp;pvlt;nclickpv−1n,amp;otherwise")]),r._v(" "),e("p",[r._v("bandit_ctr={nclick,pvclick−n1,pv<notherwise")]),r._v(" "),e("p",[r._v("这个公式有三方面的考虑:")]),r._v(" "),e("ul",[e("li",[r._v("当曝光不充分时, ctr 是不稳定的, 所以不用 pv 作分母.")]),r._v(" "),e("li",[r._v("当内容的 ctr 低于1 n \\frac 1 n"),e("em",[r._v("n")]),r._v("1时, 会变为负数, 被淘汰掉.")]),r._v(" "),e("li",[r._v("其他情况下, ctr 高的就会被优先召回.")])]),r._v(" "),e("p",[e("strong",[r._v("trigger 是链接 userTrigger 与 itemTrigger 的桥梁.")])]),r._v(" "),e("h2",{attrs:{id:"在线召回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在线召回"}},[r._v("#")]),r._v(" 在线召回")]),r._v(" "),e("p",[r._v("上面提到的信息是可以一次准备多次复用的, 并且量是很大的, 像 i2i 的召回表"),e("code",[r._v("Item2ItemTrigger")]),r._v("可以多达"),e("strong",[r._v("几百亿行数据")]),r._v(". 所以一般离线算好.\n在线系统做了哪些事情呢? 是以下三件.")]),r._v(" "),e("h3",{attrs:{id:"usertrigger-查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usertrigger-查询"}},[r._v("#")]),r._v(" userTrigger 查询")]),r._v(" "),e("p",[r._v("收到客户端请求后, 根据 userId, 查出该 user 下的若干个 userTrigger.")]),r._v(" "),e("h3",{attrs:{id:"itemtrigger-召回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#itemtrigger-召回"}},[r._v("#")]),r._v(" itemTrigger 召回")]),r._v(" "),e("p",[r._v("通过上一步 userTrigger 中的 trigger, 来找到 itemTrigger. 通过此步查询, 我们得到了若干个商品 (比如说 2000 个).")]),r._v(" "),e("h3",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[r._v("#")]),r._v(" 注意事项")]),r._v(" "),e("p",[r._v("需要注意的是 userTrigger 间的优先级和召回结果的丰富度.")]),r._v(" "),e("ul",[e("li",[r._v("优先级\n同一 user 的 userTrigger 有很多, 可以区分优先级, 优先召回重要的. 比如用户在 A 类目下点了一个商品, 而在 B 类目下点了很多商品, 那么有关 B 的 userTrigger 优先级更高")]),r._v(" "),e("li",[r._v("丰富度\n我们希望召回的 itemTrigger 中 trigger 也尽量丰富, 所以可以控制一下各 trigger 的占比.")]),r._v(" "),e("li",[r._v("得分计算\n足够精细的话, 也可以算一下得分.\n(1) m a t c h S c o r e = t r i g g e r S c o r e ∗ u s e r T r i g g e r S c o r e ∗ i t e m T r i g g e r S c o r e matchScore=triggerScore"),e("em",[r._v("userTriggerScore")]),r._v("itemTriggerScore \\tag 1"),e("em",[r._v("m"),e("strong",[r._v("a")]),r._v("t"),e("strong",[r._v("c")]),r._v("h"),e("strong",[r._v("S")]),r._v("c"),e("strong",[r._v("o")]),r._v("r**e")]),r._v("="),e("em",[r._v("t"),e("strong",[r._v("r")]),r._v("i"),e("strong",[r._v("g")]),r._v("g"),e("strong",[r._v("e")]),r._v("r"),e("strong",[r._v("S")]),r._v("c"),e("strong",[r._v("o")]),r._v("r**e")]),r._v("∗"),e("em",[r._v("u"),e("strong",[r._v("s")]),r._v("e"),e("strong",[r._v("r")]),r._v("T"),e("strong",[r._v("r")]),r._v("i"),e("strong",[r._v("g")]),r._v("g"),e("strong",[r._v("e")]),r._v("r"),e("strong",[r._v("S")]),r._v("c"),e("strong",[r._v("o")]),r._v("r**e")]),r._v("∗"),e("em",[r._v("i"),e("strong",[r._v("t")]),r._v("e"),e("strong",[r._v("m")]),r._v("T"),e("strong",[r._v("r")]),r._v("i"),e("strong",[r._v("g")]),r._v("g"),e("strong",[r._v("e")]),r._v("r"),e("strong",[r._v("S")]),r._v("c"),e("strong",[r._v("o")]),r._v("r**e")]),r._v("(1), 就是 userId 与 itemId 的匹配得分啦.")])]),r._v(" "),e("h2",{attrs:{id:"过滤最近已看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过滤最近已看"}},[r._v("#")]),r._v(" 过滤最近已看")]),r._v(" "),e("p",[r._v("近段时间推荐系统已经给用户甲推荐过商品 A, 甲点进去看了, 那么此时就不需要再重复推荐这个 A 商品了.")]),r._v(" "),e("h2",{attrs:{id:"模型排序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模型排序"}},[r._v("#")]),r._v(" 模型排序")]),r._v(" "),e("p",[r._v("详见参考 [2].")]),r._v(" "),e("p",[r._v("简述中我们提到了, 如果召回商品过多, 并且很多商品的相关度得分相同, 就必须要进行合理的排序. 因为用户不可能把相关的上万个商品都浏览一遍, 他们通常只会关注排在前几页的商品.\n排序中也要关注推荐商品的质量, 虽然一个商品在兴趣方面挺吻合, 但差评很多或者销量很差, 也会把它排在后面.")]),r._v(" "),e("p",[r._v("推荐系统使用一段时间后, 就可以通过"),e("strong",[r._v("真实的用户点击行为")]),r._v("来训练排序模型啦.\n常用的是逻辑回归 LR 等. 不少做推荐的会吹嘘用到的特征是"),e("strong",[r._v("千万级别乃至上亿")]),r._v(", 人们听到就会觉得好厉害啊. 其实不然. 他们只是把具有枚举值的特征给展开了而已. 商品 id, 卖家 id, 这些本身就是上亿级别的量. 对于这种稀疏的特征, LR 还可以处理, 换做决策树 / GBDT 等, 就歇菜了.")]),r._v(" "),e("h3",{attrs:{id:"多目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多目标"}},[r._v("#")]),r._v(" 多目标")]),r._v(" "),e("p",[r._v("推荐系统的排序是有依据的. 我们的目标不同时, 推荐结果也会随之不同.\n比如我们期望通过该推荐系统提升销量, 排序时就会着重考虑商品的火爆程度; 期望的是成交额, 就会着重考虑商品价格.\n当然了, 也可以各个因素综合考虑, 结合 ctr 共同决定排序结果.")]),r._v(" "),e("h2",{attrs:{id:"展示打散"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#展示打散"}},[r._v("#")]),r._v(" 展示打散")]),r._v(" "),e("p",[r._v("为了避免推荐结果中高度相似的商品扎堆出现, 需要把它们打散, 类似洗牌一样.\n按照类目打散是个不错的主意.")]),r._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdn.net/20180122144539878",alt:"img"}})]),r._v(" "),e("p",[r._v("figure 商品类目层级举例")]),r._v(" "),e("p",[r._v("于是, 我们就可以按照类目维度对其进行打散.\n这一步做的再精细一点, 就是按"),e("code",[r._v("triggerName,triggerId")]),r._v("为依据进行打散了.")]),r._v(" "),e("h2",{attrs:{id:"_2-5-bandit-探索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-bandit-探索"}},[r._v("#")]),r._v(" 2.5 bandit 探索")]),r._v(" "),e("p",[e("code",[r._v("推荐的商品")]),r._v("是与"),e("code",[r._v("用户浏览行为")]),r._v("相关的, 而用户能看到的商品又是与系统推荐相关的, 长此以往, 推荐结果越来越狭隘, 我们需要帮助用户"),e("strong",[r._v("发现一些新的东西, 拓展兴趣")]),r._v(".\n详见 "),e("a",{attrs:{href:"http://blog.csdn.net/chuchus/article/details/78902086",target:"_blank",rel:"noopener noreferrer"}},[r._v("bandit, 多臂赌博机中的探索 - 利用模型"),e("OutboundLink")],1)]),r._v(" "),e("h1",{attrs:{id:"_3-推荐效果评价"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-推荐效果评价"}},[r._v("#")]),r._v(" 3. 推荐效果评价")]),r._v(" "),e("h2",{attrs:{id:"_3-1-投放前评价"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-投放前评价"}},[r._v("#")]),r._v(" 3.1 投放前评价")]),r._v(" "),e("ul",[e("li",[r._v("准确率召回率\n太常用了, 此处略过, 但跟普通的分类问题不一样, 召回结果那么多, 人工标也不合理, 难以实施.")]),r._v(" "),e("li",[r._v("nDCG\n可以参考我的博文, "),e("a",{attrs:{href:"http://blog.csdn.net/chuchus/article/details/78686628",target:"_blank",rel:"noopener noreferrer"}},[r._v("nDCG 排序模型评价指标"),e("OutboundLink")],1)])]),r._v(" "),e("h2",{attrs:{id:"_3-2-投放后效果评价"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-投放后效果评价"}},[r._v("#")]),r._v(" 3.2 投放后效果评价")]),r._v(" "),e("p",[r._v("系统投入使用以后, 就会拿到各种真实数据, 看看 ctr 什么的满不满足预期. ctr 又可以分为"),e("code",[r._v("pvctr")]),r._v(" (推 荐 结 果 点 击 数 推 荐 结 果 曝 光 数 \\frac {推荐结果点击数}{推荐结果曝光数}推荐结果曝光数推荐结果点击数) 和 "),e("code",[r._v("uvctr")]),r._v("(推 荐 结 果 点 击 人 数 推 荐 结 果 曝 光 人 数 \\frac {推荐结果点击人数}{推荐结果曝光人数}推荐结果曝光人数推荐结果点击人数).\n也可以 AB 测试, 通过实验验证心中的各种方案.")]),r._v(" "),e("h1",{attrs:{id:"_4-冷启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-冷启动"}},[r._v("#")]),r._v(" 4. 冷启动")]),r._v(" "),e("h2",{attrs:{id:"_4-1-新用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-新用户"}},[r._v("#")]),r._v(" 4.1 新用户")]),r._v(" "),e("p",[r._v("推荐结果依赖用户行为, 那么对于新用户, 召回结果为 0 或者过少, 可以用热门商品来做返回. 等过段时间积累到该用户的足够行为时, 就可以召回到更多结果了.")]),r._v(" "),e("h2",{attrs:{id:"_4-2-新商品"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-新商品"}},[r._v("#")]),r._v(" 4.2 新商品")]),r._v(" "),e("p",[r._v("上架新商品, 没有足够的用户行为可以使用模型去预估商品热度等. 可以用充分曝光的商品做样本来训练网络.")]),r._v(" "),e("h1",{attrs:{id:"其他特征"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他特征"}},[r._v("#")]),r._v(" 其他特征")]),r._v(" "),e("h2",{attrs:{id:"实时相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实时相关"}},[r._v("#")]),r._v(" 实时相关")]),r._v(" "),e("p",[r._v("通常, 各种数据我们都是离线用 hadoop 之类的隔天批处理计算的. 但若能捕捉到用户"),e("strong",[r._v("几分钟前, 几秒前")]),r._v("的点击行为, 充分利用起来, 来影响召回与排序, 效果提升也是很明显的. 那就需要用_消息队列 + 实时计算来实时解析日志_.")]),r._v(" "),e("h2",{attrs:{id:"context-相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#context-相关"}},[r._v("#")]),r._v(" context 相关")]),r._v(" "),e("p",[r._v("c o n t e x t context"),e("em",[r._v("c"),e("strong",[r._v("o")]),r._v("n"),e("strong",[r._v("t")]),r._v("e"),e("strong",[r._v("x")]),r._v("t")]),r._v(" 是指用户与产品交互时的情景特征. 如 "),e("code",[r._v("时间, 地点, 用户正在进行的活动, 用户的情绪")]),r._v(" 等.\n这些信息对推荐也是有益的.")]),r._v(" "),e("h1",{attrs:{id:"神经网络进阶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#神经网络进阶"}},[r._v("#")]),r._v(" 神经网络进阶")]),r._v(" "),e("p",[r._v("通过以上处理, 一个效果良好的推荐系统就成型了. 再往高级上靠, 就可以使用神经网络建模. 关注用户的点击情况和点击序列, 各种学习 各种 embedding. 进而影响召回和排序.")]),r._v(" "),e("h1",{attrs:{id:"相关-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关-faq"}},[r._v("#")]),r._v(" 相关 FAQ")]),r._v(" "),e("p",[e("strong",[r._v("Q")]),r._v(": 搜索与推荐的区别是什么?\n"),e("strong",[r._v("A")]),r._v(": 区别就是"),e("strong",[r._v("有没有考虑个性化")]),r._v(". 推荐的根本就是 给一个候选池, 挑出用户最感兴趣的东西. 完全可以通过 tf-idf 等常规搜索确定候选池后, 再进行个性化展现.")]),r._v(" "),e("p",[e("strong",[r._v("Q")]),r._v(": 推荐系统都是这个套路么?\n"),e("strong",[r._v("A")]),r._v(": 大致如此. 推荐系统可以分为三种:")]),r._v(" "),e("ul",[e("li",[r._v('user2user\n比如 qq 上 "你可能认识的人" 这种推荐')]),r._v(" "),e("li",[r._v('use2item.\n"向用户推荐电影, 美食, 商品" 这种. 本文讲的就是后者, 它用处更广泛一点.')]),r._v(" "),e("li",[r._v("item2item\n用户进入了商品详情页, 那么看完之后可以在底部在搞一个相似商品的推荐.")])]),r._v(" "),e("h1",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[r._v("#")]),r._v(" 参考")]),r._v(" "),e("ol",[e("li",[r._v("我的 blog, "),e("a",{attrs:{href:"http://blog.csdn.net/chuchus/article/details/50463226",target:"_blank",rel:"noopener noreferrer"}},[r._v("推荐系统中的 match 阶段"),e("OutboundLink")],1),r._v(" .")]),r._v(" "),e("li",[r._v("我的 blog, "),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/80389980",target:"_blank",rel:"noopener noreferrer"}},[r._v("推荐系统的 rank 模型"),e("OutboundLink")],1)])]),r._v(" "),e("p",[r._v("全文完")]),r._v(" "),e("p",[r._v("本文由 "),e("a",{attrs:{href:"http://ksria.com/simpread",target:"_blank",rel:"noopener noreferrer"}},[r._v("简悦 SimpRead"),e("OutboundLink")],1),r._v(" 优化，用以提升阅读体验")]),r._v(" "),e("p",[r._v("使用了 全新的简悦词法分析引擎 beta，"),e("a",{attrs:{href:"http://ksria.com/simpread/docs/#/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%BC%95%E6%93%8E",target:"_blank",rel:"noopener noreferrer"}},[r._v("点击查看"),e("OutboundLink")],1),r._v("详细说明")]),r._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-0",target:"_blank",rel:"noopener noreferrer"}},[r._v("文章目录"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-1",target:"_blank",rel:"noopener noreferrer"}},[r._v("1. 简述"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-2",target:"_blank",rel:"noopener noreferrer"}},[r._v("2. 分阶段讨论"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-3",target:"_blank",rel:"noopener noreferrer"}},[r._v("离线数据准备"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-4",target:"_blank",rel:"noopener noreferrer"}},[r._v("协同数据"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-5",target:"_blank",rel:"noopener noreferrer"}},[r._v("特征数据"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-6",target:"_blank",rel:"noopener noreferrer"}},[r._v("itemTrigger2item 数据表准备"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-7",target:"_blank",rel:"noopener noreferrer"}},[r._v("在线召回"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-8",target:"_blank",rel:"noopener noreferrer"}},[r._v("userTrigger 查询"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-9",target:"_blank",rel:"noopener noreferrer"}},[r._v("itemTrigger 召回"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-10",target:"_blank",rel:"noopener noreferrer"}},[r._v("注意事项"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-11",target:"_blank",rel:"noopener noreferrer"}},[r._v("过滤最近已看"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-12",target:"_blank",rel:"noopener noreferrer"}},[r._v("模型排序"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-13",target:"_blank",rel:"noopener noreferrer"}},[r._v("多目标"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-14",target:"_blank",rel:"noopener noreferrer"}},[r._v("展示打散"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-15",target:"_blank",rel:"noopener noreferrer"}},[r._v("2.5 bandit 探索"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-16",target:"_blank",rel:"noopener noreferrer"}},[r._v("3. 推荐效果评价"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-17",target:"_blank",rel:"noopener noreferrer"}},[r._v("3.1 投放前评价"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-18",target:"_blank",rel:"noopener noreferrer"}},[r._v("3.2 投放后效果评价"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-19",target:"_blank",rel:"noopener noreferrer"}},[r._v("4. 冷启动"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-20",target:"_blank",rel:"noopener noreferrer"}},[r._v("4.1 新用户"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-21",target:"_blank",rel:"noopener noreferrer"}},[r._v("4.2 新商品"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-22",target:"_blank",rel:"noopener noreferrer"}},[r._v("其他特征"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-23",target:"_blank",rel:"noopener noreferrer"}},[r._v("实时相关"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-24",target:"_blank",rel:"noopener noreferrer"}},[r._v("context 相关"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-25",target:"_blank",rel:"noopener noreferrer"}},[r._v("神经网络进阶"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-26",target:"_blank",rel:"noopener noreferrer"}},[r._v("相关 FAQ"),e("OutboundLink")],1),e("a",{attrs:{href:"https://blog.csdn.net/chuchus/article/details/79127672#sr-toc-27",target:"_blank",rel:"noopener noreferrer"}},[r._v("参考"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);