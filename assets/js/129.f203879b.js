(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{518:function(n,t,e){"use strict";e.r(t);var i=e(42),r=Object(i.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("gdb_è°ƒè¯•_ä»å…¥é—¨å®è·µåˆ°åŸç†\nhttps://mp.weixin.qq.com/s?__biz=Mzk0MzI4OTI1Ng==&mid=2247486816&idx=1&sn=a6dfc1361ce15ce5ad1c7d7734f9c939&chksm=c3376ba7f440e2b18267c303c35572ab089fb97d3b2fe0adb58009637d6631020bb52bd9a28c&scene=90&subscene=93&sessionid=1641357450&clicktime=1641357452&enterid=1641357452&ascene=56&devicetype=android-28&version=2800105d&nettype=WIFI&abtest_cookie=AAACAA%3D%3D&lang=zh_CN&exportkey=AUEdBXXUioQROVUWB%2B24Qp8%3D&pass_ticket=%2B3e0Y17j0cjm3REMTeghpi%2BjSzKqssP918so5VaZuyEaklJjnjS7a7qpQjVDLl0R&wx_header=1\nå…¬ä¼—å·\nä½ å¥½ï¼Œæˆ‘æ˜¯é›¨ä¹ï¼")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº†çº¿ä¸Š coredump äº§ç”Ÿçš„åŸå› ï¼Œå…¶ä¸­ç”¨åˆ°äº† coredump åˆ†æå·¥å…· gdbï¼Œè¿™å‡ å¤©ä¸€ç›´æœ‰è¯»è€…åœ¨é—®ï¼Œèƒ½ä¸èƒ½å†™ä¸€ç¯‡å…³äº gdb è°ƒè¯•æ–¹é¢çš„æ–‡ç« ï¼Œä»Šå¤©å€ŸåŠ©æ­¤æ–‡ï¼Œåˆ†äº«ä¸€äº›å·¥ä½œä¸­çš„è°ƒè¯•ç»éªŒï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ã€‚")]),n._v(" "),e("p",[n._v("å†™åœ¨å‰é¢\nåœ¨æˆ‘çš„å·¥ä½œç»å†ä¸­ï¼Œå‰å‡ å¹´åœ¨ Windows ä¸Šè¿›è¡Œå¼€å‘ï¼Œä½¿ç”¨ Visual Studio è¿›è¡Œè°ƒè¯•ï¼Œç®€ç›´æ˜¯åˆ©å™¨ï¼Œå„ç§æ–­ç‚¹ç­‰ç”¨é¼ æ ‡ç‚¹ç‚¹ç‚¹å°±èƒ½è®¾ç½®ï¼›å¤§æ¦‚ä» 12 å¹´å¼€å§‹è½¬ Linux å¼€å‘äº†ï¼Œæ‰€ä»¥è°ƒè¯•éƒ½æ˜¯åŸºäº GDB çš„ã€‚æœ¬æ¥è¿™ç¯‡æ–‡ç« ä¹Ÿæƒ³å†™å†™ Windows ä¸‹è°ƒè¯•ç›¸å…³ï¼Œå¥ˆä½•å¥½å¤šå¹´æ²¡ç”¨äº†ï¼Œå†åŠ ä¸Šå·¥ä½œå¤ªå¿™ï¼Œæ‰€ä»¥æœ¬æ–‡å°±åªå†™äº† Linux ä¸‹ GDB è°ƒè¯•ç›¸å…³ï¼Œå¯¹äº Windows å¼€å‘äººå‘˜ï¼Œå®åœ¨å¯¹ä¸ä½äº†ğŸ˜ƒã€‚")]),n._v(" "),e("p",[n._v("è¿™ç¯‡æ–‡ç« ï¼Œæ¶‰åŠçš„æ¯”è¾ƒå…¨é¢ï¼Œæ€»ç»“äº†è¿™äº›å¹´çš„ gdb è°ƒè¯•ç»éªŒ (éƒ½æ˜¯å°å„¿ç§‘ğŸ˜)ï¼Œç»å¸¸ç”¨åˆ°çš„ä¸€äº›è°ƒè¯•æŠ€å·§ï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹ä»äº‹ Linux å¼€å‘çš„ç›¸å…³äººå‘˜æœ‰æ‰€å¸®åŠ©")]),n._v(" "),e("p",[n._v("èƒŒæ™¯\nä½œä¸º C/C++ å¼€å‘äººå‘˜ï¼Œä¿è¯ç¨‹åºæ­£å¸¸è¿è¡Œæ˜¯æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€ä¸»è¦çš„ç›®çš„ã€‚è€Œä¸ºäº†ä¿è¯ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œè°ƒè¯•åˆ™æ˜¯æœ€åŸºæœ¬çš„æ‰‹æ®µï¼Œç†Ÿæ‚‰è¿™äº›è°ƒè¯•æ–¹å¼ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬æ›´å¿«çš„å®šä½ç¨‹åºé—®é¢˜æ‰€åœ¨ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚")]),n._v(" "),e("p",[n._v("åœ¨å¼€å‘è¿‡ç¨‹ï¼Œå¦‚æœç¨‹åºçš„è¿è¡Œç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œç¬¬ä¸€æ—¶é—´å°±æ˜¯æ‰“å¼€ GDB è¿›è¡Œè°ƒè¯•ï¼Œåœ¨å¯¹åº”çš„åœ°æ–¹è®¾ç½®æ–­ç‚¹ï¼Œç„¶ååˆ†æåŸå› ï¼›å½“çº¿ä¸ŠæœåŠ¡å‡ºäº†é—®é¢˜ï¼Œç¬¬ä¸€æ—¶é—´æŸ¥çœ‹è¿›ç¨‹åœ¨ä¸åœ¨ï¼Œå¦‚æœä¸åœ¨çš„è¯ï¼Œæ˜¯å¦ç”Ÿæˆäº†coredumpæ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä½¿ç”¨ gdb è°ƒè¯• coredump æ–‡ä»¶ï¼Œå¦åˆ™é€šè¿‡dmesgæ¥åˆ†æå†…æ ¸æ—¥å¿—æ¥æŸ¥æ‰¾åŸå› ã€‚")]),n._v(" "),e("p",[n._v("æ¦‚å¿µ\nGDB æ˜¯ä¸€ä¸ªç”± GNU å¼€æºç»„ç»‡å‘å¸ƒçš„ã€UNIX/LINUX æ“ä½œç³»ç»Ÿä¸‹çš„ã€ã€ŒåŸºäºå‘½ä»¤è¡Œçš„ã€åŠŸèƒ½å¼ºå¤§çš„ç¨‹åºè°ƒè¯•å·¥å…·ã€ã€‚")]),n._v(" "),e("p",[n._v("GDB æ”¯æŒæ–­ç‚¹ã€å•æ­¥æ‰§è¡Œã€æ‰“å°å˜é‡ã€è§‚å¯Ÿå˜é‡ã€æŸ¥çœ‹å¯„å­˜å™¨ã€æŸ¥çœ‹å †æ ˆç­‰è°ƒè¯•æ‰‹æ®µã€‚åœ¨ Linux ç¯å¢ƒè½¯ä»¶å¼€å‘ä¸­ï¼ŒGDB æ˜¯ä¸»è¦çš„è°ƒè¯•å·¥å…·ï¼Œç”¨æ¥è°ƒè¯• C å’Œ C++ ç¨‹åº (ä¹Ÿæ”¯æŒ go ç­‰å…¶ä»–è¯­è¨€)ã€‚")]),n._v(" "),e("p",[n._v("å¸¸ç”¨å‘½ä»¤\næ–­ç‚¹\næ–­ç‚¹æ˜¯æˆ‘ä»¬åœ¨è°ƒè¯•ä¸­ç»å¸¸ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨æŒ‡å®šä½ç½®è®¾ç½®æ–­ç‚¹ä¹‹åï¼Œç¨‹åºè¿è¡Œåˆ°è¯¥ä½ç½®å°†ä¼šæš‚åœï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¯¹ç¨‹åºè¿›è¡Œæ›´å¤šçš„æ“ä½œï¼Œæ¯”å¦‚æŸ¥çœ‹å˜é‡å†…å®¹ï¼Œå †æ ˆæƒ…å†µç­‰ç­‰ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ç¨‹åºã€‚")]),n._v(" "),e("p",[n._v("ä»¥è®¾ç½®æ–­ç‚¹çš„å‘½ä»¤åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š")]),n._v(" "),e("p",[n._v("breakpoint\nwatchpoint\ncatchpoint\nbreakpoint\nå¯ä»¥æ ¹æ®è¡Œå·ã€å‡½æ•°ã€æ¡ä»¶ç”Ÿæˆæ–­ç‚¹ï¼Œä¸‹é¢æ˜¯ç›¸å…³å‘½ä»¤ä»¥åŠå¯¹åº”çš„ä½œç”¨è¯´æ˜ï¼š")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\nbreak [file]:function\tåœ¨æ–‡ä»¶ file çš„ function å‡½æ•°å…¥å£è®¾ç½®æ–­ç‚¹\nbreak [file]:line\tåœ¨æ–‡ä»¶ file çš„ç¬¬ line è¡Œè®¾ç½®æ–­ç‚¹\ninfo breakpoints\tæŸ¥çœ‹æ–­ç‚¹åˆ—è¡¨\nbreak [+-]offset\tåœ¨å½“å‰ä½ç½®åç§»é‡ä¸º [+-]offset å¤„è®¾ç½®æ–­ç‚¹\nbreak *addr\tåœ¨åœ°å€ addr å¤„è®¾ç½®æ–­ç‚¹\nbreak ... if expr\tè®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼Œä»…ä»…åœ¨æ¡ä»¶æ»¡è¶³æ—¶\nignore n count\tæ¥ä¸‹æ¥å¯¹äºç¼–å·ä¸º n çš„æ–­ç‚¹å¿½ç•¥ count æ¬¡\nclear\tåˆ é™¤æ‰€æœ‰æ–­ç‚¹\nclear function\tåˆ é™¤æ‰€æœ‰ä½äº function å†…çš„æ–­ç‚¹\ndelete n\tåˆ é™¤æŒ‡å®šç¼–å·çš„æ–­ç‚¹\nenable n\tå¯ç”¨æŒ‡å®šç¼–å·çš„æ–­ç‚¹\ndisable n\tç¦ç”¨æŒ‡å®šç¼–å·çš„æ–­ç‚¹\nsave breakpoints file\tä¿å­˜æ–­ç‚¹ä¿¡æ¯åˆ°æŒ‡å®šæ–‡ä»¶\nsource file\tå¯¼å…¥æ–‡ä»¶ä¸­ä¿å­˜çš„æ–­ç‚¹ä¿¡æ¯\nbreak\tåœ¨ä¸‹ä¸€ä¸ªæŒ‡ä»¤å¤„è®¾ç½®æ–­ç‚¹\nclear [file:]line\tåˆ é™¤ç¬¬ line è¡Œçš„æ–­ç‚¹\nwatchpoint\nwatchpoint æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ–­ç‚¹ï¼Œç±»ä¼¼äºæ­£å¸¸æ–­ç‚¹ï¼Œæ˜¯è¦æ±‚ GDB æš‚åœç¨‹åºæ‰§è¡Œçš„å‘½ä»¤ã€‚åŒºåˆ«åœ¨äº watchpointæ²¡æœ‰é©»ç•™æŸä¸€è¡Œæºä»£ç ä¸­ï¼Œè€Œæ˜¯æŒ‡ç¤º GDB æ¯å½“æŸä¸ªè¡¨è¾¾å¼æ”¹å˜äº†å€¼å°±æš‚åœæ‰§è¡Œçš„å‘½ä»¤ã€‚")]),n._v(" "),e("p",[n._v("watchpoint åˆ†ä¸ºç¡¬ä»¶å®ç°å’Œè½¯ä»¶å®ç°ä¸¤ç§ã€‚å‰è€…éœ€è¦ç¡¬ä»¶ç³»ç»Ÿçš„æ”¯æŒï¼›åè€…çš„åŸç†å°±æ˜¯æ¯æ­¥æ‰§è¡Œåéƒ½æ£€æŸ¥å˜é‡çš„å€¼æ˜¯å¦æ”¹å˜ã€‚GDB åœ¨æ–°å»ºæ•°æ®æ–­ç‚¹æ—¶ä¼šä¼˜å…ˆå°è¯•ç¡¬ä»¶æ–¹å¼ï¼Œå¦‚æœå¤±è´¥å†å°è¯•è½¯ä»¶å®ç°ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\nwatch variable\tè®¾ç½®å˜é‡æ•°æ®æ–­ç‚¹\nwatch var1 + var2\tè®¾ç½®è¡¨è¾¾å¼æ•°æ®æ–­ç‚¹\nrwatch variable\tè®¾ç½®è¯»æ–­ç‚¹ï¼Œä»…æ”¯æŒç¡¬ä»¶å®ç°\nawatch variable\tè®¾ç½®è¯»å†™æ–­ç‚¹ï¼Œä»…æ”¯æŒç¡¬ä»¶å®ç°\ninfo watchpoints\tæŸ¥çœ‹æ•°æ®æ–­ç‚¹åˆ—è¡¨\nset can-use-hw-watchpoints 0\tå¼ºåˆ¶åŸºäºè½¯ä»¶æ–¹å¼å®ç°\nä½¿ç”¨æ•°æ®æ–­ç‚¹æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š")]),n._v(" "),e("p",[n._v("å½“ç›‘æ§å˜é‡ä¸ºå±€éƒ¨å˜é‡æ—¶ï¼Œä¸€æ—¦å±€éƒ¨å˜é‡å¤±æ•ˆï¼Œæ•°æ®æ–­ç‚¹ä¹Ÿä¼šå¤±æ•ˆ\nå¦‚æœç›‘æ§çš„æ˜¯æŒ‡é’ˆå˜é‡pï¼Œåˆ™watch *pç›‘æ§çš„æ˜¯pæ‰€æŒ‡å†…å­˜æ•°æ®çš„å˜åŒ–æƒ…å†µï¼Œè€Œwatch pç›‘æ§çš„æ˜¯pæŒ‡é’ˆæœ¬èº«æœ‰æ²¡æœ‰æ”¹å˜æŒ‡å‘\næœ€å¸¸è§çš„æ•°æ®æ–­ç‚¹åº”ç”¨åœºæ™¯ï¼šã€Œå®šä½å †ä¸Šçš„ç»“æ„ä½“å†…éƒ¨æˆå‘˜ä½•æ—¶è¢«ä¿®æ”¹ã€ã€‚ç”±äºæŒ‡é’ˆä¸€èˆ¬ä¸ºå±€éƒ¨å˜é‡ï¼Œä¸ºäº†è§£å†³æ–­ç‚¹å¤±æ•ˆï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\nprint &variable\tæŸ¥çœ‹å˜é‡çš„å†…å­˜åœ°å€\nwatch *(type *)address\té€šè¿‡å†…å­˜åœ°å€é—´æ¥è®¾ç½®æ–­ç‚¹\nwatch -l variable\tæŒ‡å®š location å‚æ•°\nwatch variable thread 1\tä»…ç¼–å·ä¸º 1 çš„çº¿ç¨‹ä¿®æ”¹å˜é‡ var å€¼æ—¶ä¼šä¸­æ–­\ncatchpoint\nä»å­—é¢æ„æ€ç†è§£ï¼Œæ˜¯æ•è·æ–­ç‚¹ï¼Œå…¶ä¸»è¦ç›‘æµ‹ä¿¡å·çš„äº§ç”Ÿã€‚ä¾‹å¦‚ c++ çš„ throwï¼Œæˆ–è€…åŠ è½½åº“çš„æ—¶å€™ï¼Œäº§ç”Ÿæ–­ç‚¹è¡Œä¸ºã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tå«ä¹‰\ncatch fork\tç¨‹åºè°ƒç”¨ fork æ—¶ä¸­æ–­\ntcatch fork\tè®¾ç½®çš„æ–­ç‚¹åªè§¦å‘ä¸€æ¬¡ï¼Œä¹‹åè¢«è‡ªåŠ¨åˆ é™¤\ncatch syscall ptrace\tä¸º ptrace ç³»ç»Ÿè°ƒç”¨è®¾ç½®æ–­ç‚¹\nâ\nåœ¨commandå‘½ä»¤ååŠ æ–­ç‚¹ç¼–å·ï¼Œå¯ä»¥å®šä¹‰æ–­ç‚¹è§¦å‘åæƒ³è¦æ‰§è¡Œçš„æ“ä½œã€‚åœ¨ä¸€äº›é«˜çº§çš„è‡ªåŠ¨åŒ–è°ƒè¯•åœºæ™¯ä¸­å¯èƒ½ä¼šç”¨åˆ°ã€‚")]),n._v(" "),e("p",[n._v("â\nå‘½ä»¤è¡Œ\nå‘½ä»¤\tä½œç”¨\nrun arglist\tä»¥ arglist ä¸ºå‚æ•°åˆ—è¡¨è¿è¡Œç¨‹åº\nset args arglist\tæŒ‡å®šå¯åŠ¨å‘½ä»¤è¡Œå‚æ•°\nset args\tæŒ‡å®šç©ºçš„å‚æ•°åˆ—è¡¨\nshow args\tæ‰“å°å‘½ä»¤è¡Œåˆ—è¡¨\nç¨‹åºæ ˆ\nå‘½ä»¤\tä½œç”¨\nbacktrace [n]\tæ‰“å°æ ˆå¸§\nframe [n]\té€‰æ‹©ç¬¬ n ä¸ªæ ˆå¸§ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°å½“å‰æ ˆå¸§\nup n\té€‰æ‹©å½“å‰æ ˆå¸§ç¼–å· + n çš„æ ˆå¸§\ndown n\té€‰æ‹©å½“å‰æ ˆå¸§ç¼–å· - n çš„æ ˆå¸§\ninfo frame [addr]\tæè¿°å½“å‰é€‰æ‹©çš„æ ˆå¸§\ninfo args\tå½“å‰æ ˆå¸§çš„å‚æ•°åˆ—è¡¨\ninfo locals\tå½“å‰æ ˆå¸§çš„å±€éƒ¨å˜é‡\nå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹\nå¤šè¿›ç¨‹\nGDB åœ¨è°ƒè¯•å¤šè¿›ç¨‹ç¨‹åºï¼ˆç¨‹åºå«forkè°ƒç”¨ï¼‰æ—¶ï¼Œé»˜è®¤åªè¿½è¸ªçˆ¶è¿›ç¨‹ã€‚å¯ä»¥é€šè¿‡å‘½ä»¤è®¾ç½®ï¼Œå®ç°åªè¿½è¸ªçˆ¶è¿›ç¨‹æˆ–å­è¿›ç¨‹ï¼Œæˆ–è€…åŒæ—¶è°ƒè¯•çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\ninfo inferiors\tæŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨\nattach pid\tç»‘å®šè¿›ç¨‹ id\ninferior num\tåˆ‡æ¢åˆ°æŒ‡å®šè¿›ç¨‹ä¸Šè¿›è¡Œè°ƒè¯•\nprint $_exitcode\tæ˜¾ç¤ºç¨‹åºé€€å‡ºæ—¶çš„è¿”å›å€¼\nset follow-fork-mode child\tè¿½è¸ªå­è¿›ç¨‹\nset follow-fork-mode parent\tè¿½è¸ªçˆ¶è¿›ç¨‹\nset detach-on-fork on\tfork è°ƒç”¨æ—¶åªè¿½è¸ªå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹\nset detach-on-fork off\tfork è°ƒç”¨æ—¶ä¼šåŒæ—¶è¿½è¸ªçˆ¶å­è¿›ç¨‹\nåœ¨è°ƒè¯•å¤šè¿›ç¨‹ç¨‹åºæ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº†å½“å‰è°ƒè¯•çš„è¿›ç¨‹ï¼Œå…¶ä»–è¿›ç¨‹éƒ½å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œå¦‚æœéœ€è¦åœ¨è°ƒè¯•å½“å‰è¿›ç¨‹çš„æ—¶å€™ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œé‚£ä¹ˆé€šè¿‡è®¾ç½®set schedule-multiple onå³å¯ã€‚")]),n._v(" "),e("p",[n._v("å¤šçº¿ç¨‹\nå¤šçº¿ç¨‹å¼€å‘åœ¨æ—¥å¸¸å¼€å‘å·¥ä½œä¸­å¾ˆå¸¸è§ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹çš„è°ƒè¯•æŠ€å·§éå¸¸æœ‰å¿…è¦æŒæ¡ã€‚")]),n._v(" "),e("p",[n._v("é»˜è®¤è°ƒè¯•å¤šçº¿ç¨‹æ—¶ï¼Œä¸€æ—¦ç¨‹åºä¸­æ–­ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å°†æš‚åœã€‚å¦‚æœæ­¤æ—¶å†ç»§ç»­æ‰§è¡Œå½“å‰çº¿ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¼šåŒæ—¶æ‰§è¡Œã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\ninfo threads\tæŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨\nprint $_thread\tæ˜¾ç¤ºå½“å‰æ­£åœ¨è°ƒè¯•çš„çº¿ç¨‹ç¼–å·\nset scheduler-locking on\tè°ƒè¯•ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æš‚åœæ‰§è¡Œ\nset scheduler-locking off\tè°ƒè¯•ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå…¶ä»–çº¿ç¨‹åŒæ­¥æ‰§è¡Œ\nset scheduler-locking step\tä»…ç”¨ step è°ƒè¯•çº¿ç¨‹æ—¶å…¶ä»–çº¿ç¨‹ä¸æ‰§è¡Œï¼Œç”¨å…¶ä»–å‘½ä»¤å¦‚ next è°ƒè¯•æ—¶ä»æ‰§è¡Œ\nå¦‚æœåªå…³å¿ƒå½“å‰çº¿ç¨‹ï¼Œå»ºè®®ä¸´æ—¶è®¾ç½® scheduler-locking ä¸º onï¼Œé¿å…å…¶ä»–çº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œå¯¼è‡´å‘½ä¸­å…¶ä»–æ–­ç‚¹åˆ†æ•£æ³¨æ„åŠ›ã€‚")]),n._v(" "),e("p",[n._v("æ‰“å°è¾“å‡º\né€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹æŸä¸ªå˜é‡çš„å€¼ï¼Œä»¥åˆ†æå…¶æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ‰“å°è¾“å‡ºå˜é‡å€¼ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tä½œç”¨\nwhatis variable\tæŸ¥çœ‹å˜é‡çš„ç±»å‹\nptype variable\tæŸ¥çœ‹å˜é‡è¯¦ç»†çš„ç±»å‹ä¿¡æ¯\ninfo variables var\tæŸ¥çœ‹å®šä¹‰è¯¥å˜é‡çš„æ–‡ä»¶ï¼Œä¸æ”¯æŒå±€éƒ¨å˜é‡\næ‰“å°å­—ç¬¦ä¸²\nä½¿ç”¨x/så‘½ä»¤æ‰“å°ASCIIå­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å®½å­—ç¬¦å­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆçœ‹å®½å­—ç¬¦çš„é•¿åº¦ print sizeof(str)ã€‚")]),n._v(" "),e("p",[n._v("å¦‚æœé•¿åº¦ä¸º2ï¼Œåˆ™ä½¿ç”¨x/hsæ‰“å°ï¼›å¦‚æœé•¿åº¦ä¸º4ï¼Œåˆ™ä½¿ç”¨x/wsæ‰“å°ã€‚")]),n._v(" "),e("p",[n._v('å‘½ä»¤\tä½œç”¨\nx/s str\tæ‰“å°å­—ç¬¦ä¸²\nset print elements 0\tæ‰“å°ä¸é™åˆ¶å­—ç¬¦ä¸²é•¿åº¦ / æˆ–ä¸é™åˆ¶æ•°ç»„é•¿åº¦\ncall printf("%s\\n",xxx)\tè¿™æ—¶æ‰“å°å‡ºçš„å­—ç¬¦ä¸²ä¸ä¼šå«æœ‰å¤šä½™çš„è½¬ä¹‰ç¬¦\nprintf "%s\\n",xxx\tåŒä¸Š\næ‰“å°æ•°ç»„\nå‘½ä»¤\tä½œç”¨\nprint *array@10\tæ‰“å°ä»æ•°ç»„å¼€å¤´è¿ç»­ 10 ä¸ªå…ƒç´ çš„å€¼\nprint array[60]@10\tæ‰“å° array æ•°ç»„ä¸‹æ ‡ä» 60 å¼€å§‹çš„ 10 ä¸ªå…ƒç´ ï¼Œå³ç¬¬ 60~69 ä¸ªå…ƒç´ \nset print array-indexes on\tæ‰“å°æ•°ç»„å…ƒç´ æ—¶ï¼ŒåŒæ—¶æ‰“å°æ•°ç»„çš„ä¸‹æ ‡\næ‰“å°æŒ‡é’ˆ\nå‘½ä»¤\tä½œç”¨\nprint ptr\tæŸ¥çœ‹è¯¥æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹åŠæŒ‡é’ˆåœ°å€\nprint *(struct xxx *)ptr\tæŸ¥çœ‹æŒ‡å‘çš„ç»“æ„ä½“çš„å†…å®¹\næ‰“å°æŒ‡å®šå†…å­˜åœ°å€çš„å€¼\nä½¿ç”¨xå‘½ä»¤æ¥æ‰“å°å†…å­˜çš„å€¼ï¼Œæ ¼å¼ä¸ºx/nfu addrï¼Œä»¥fæ ¼å¼æ‰“å°ä»addrå¼€å§‹çš„nä¸ªé•¿åº¦å•å…ƒä¸ºuçš„å†…å­˜å€¼ã€‚')]),n._v(" "),e("p",[n._v("nï¼šè¾“å‡ºå•å…ƒçš„ä¸ªæ•°\nfï¼šè¾“å‡ºæ ¼å¼ï¼Œå¦‚xè¡¨ç¤ºä»¥16è¿›åˆ¶è¾“å‡ºï¼Œoè¡¨ç¤ºä»¥8è¿›åˆ¶è¾“å‡ºï¼Œé»˜è®¤ä¸ºx\nuï¼šä¸€ä¸ªå•å…ƒçš„é•¿åº¦ï¼Œbè¡¨ç¤º1ä¸ªbyteï¼Œhè¡¨ç¤º2ä¸ªbyteï¼ˆhalf wordï¼‰ï¼Œwè¡¨ç¤º4ä¸ªbyteï¼Œgè¡¨ç¤º8ä¸ªbyteï¼ˆgiant wordï¼‰\nå‘½ä»¤\tä½œç”¨\nx/8xb array\tä»¥ 16 è¿›åˆ¶æ‰“å°æ•°ç»„ array çš„å‰ 8 ä¸ª byte çš„å€¼\nx/8xw array\tä»¥ 16 è¿›åˆ¶æ‰“å°æ•°ç»„ array çš„å‰ 16 ä¸ª word çš„å€¼\næ‰“å°å±€éƒ¨å˜é‡\nå‘½ä»¤\tä½œç”¨\ninfo locals\tæ‰“å°å½“å‰å‡½æ•°å±€éƒ¨å˜é‡çš„å€¼\nbacktrace full\tæ‰“å°å½“å‰æ ˆå¸§å„ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡å€¼ï¼Œå‘½ä»¤å¯ç¼©å†™ä¸º bt\nbt full n\tä»å†…åˆ°å¤–æ˜¾ç¤º n ä¸ªæ ˆå¸§åŠå…¶å±€éƒ¨å˜é‡\nbt full -n\tä»å¤–å‘å†…æ˜¾ç¤º n ä¸ªæ ˆå¸§åŠå…¶å±€éƒ¨å˜é‡\næ‰“å°ç»“æ„ä½“\nå‘½ä»¤\tä½œç”¨\nset print pretty on\tæ¯è¡Œåªæ˜¾ç¤ºç»“æ„ä½“çš„ä¸€åæˆå‘˜\nset print null-stop\tä¸æ˜¾ç¤º'\\000'è¿™ç§\nå‡½æ•°è·³è½¬\nå‘½ä»¤\tä½œç”¨\nset step-mode on\tä¸è·³è¿‡ä¸å«è°ƒè¯•ä¿¡æ¯çš„å‡½æ•°ï¼Œå¯ä»¥æ˜¾ç¤ºå’Œè°ƒè¯•æ±‡ç¼–ä»£ç \nfinish\tæ‰§è¡Œå®Œå½“å‰å‡½æ•°å¹¶æ‰“å°è¿”å›å€¼ï¼Œç„¶åè§¦å‘ä¸­æ–­\nreturn 0\tä¸å†æ‰§è¡Œåé¢çš„æŒ‡ä»¤ï¼Œç›´æ¥è¿”å›ï¼Œå¯ä»¥æŒ‡å®šè¿”å›å€¼\ncall printf(\"%s\\n\", str)\tè°ƒç”¨ printf å‡½æ•°ï¼Œæ‰“å°å­—ç¬¦ä¸² (å¯ä»¥ä½¿ç”¨ call æˆ–è€… print è°ƒç”¨å‡½æ•°)\nprint func()\tè°ƒç”¨ func å‡½æ•° (å¯ä»¥ä½¿ç”¨ call æˆ–è€… print è°ƒç”¨å‡½æ•°)\nset var variable=xxx\tè®¾ç½®å˜é‡ variable çš„å€¼ä¸º xxx\nset {type}address = xxx\tç»™å­˜å‚¨åœ°å€ä¸º addressï¼Œç±»å‹ä¸º type çš„å˜é‡èµ‹å€¼\ninfo frame\tæ˜¾ç¤ºå‡½æ•°å †æ ˆçš„ä¿¡æ¯ï¼ˆå †æ ˆå¸§åœ°å€ã€æŒ‡ä»¤å¯„å­˜å™¨çš„å€¼ç­‰ï¼‰\nå…¶å®ƒ\nå›¾å½¢åŒ–\ntui ä¸ºterminal user interfaceçš„ç¼©å†™ï¼Œåœ¨å¯åŠ¨æ—¶å€™æŒ‡å®š-tuiå‚æ•°ï¼Œæˆ–è€…è°ƒè¯•æ—¶ä½¿ç”¨ctrl+x+aç»„åˆé”®ï¼Œå¯è¿›å…¥æˆ–é€€å‡ºå›¾å½¢åŒ–ç•Œé¢ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä»¤\tå«ä¹‰\nlayout src\tæ˜¾ç¤ºæºç çª—å£\nlayout asm\tæ˜¾ç¤ºæ±‡ç¼–çª—å£\nlayout split\tæ˜¾ç¤ºæºç  + æ±‡ç¼–çª—å£\nlayout regs\tæ˜¾ç¤ºå¯„å­˜å™¨ + æºç æˆ–æ±‡ç¼–çª—å£\nwinheight src +5\tæºç çª—å£é«˜åº¦å¢åŠ  5 è¡Œ\nwinheight asm -5\tæ±‡ç¼–çª—å£é«˜åº¦å‡å° 5 è¡Œ\nwinheight cmd +5\tæ§åˆ¶å°çª—å£é«˜åº¦å¢åŠ  5 è¡Œ\nwinheight regs -5\tå¯„å­˜å™¨çª—å£é«˜åº¦å‡å° 5 è¡Œ\næ±‡ç¼–\nå‘½ä»¤\tå«ä¹‰\ndisassemble function\tæŸ¥çœ‹å‡½æ•°çš„æ±‡ç¼–ä»£ç \ndisassemble /mr function\tåŒæ—¶æ¯”è¾ƒå‡½æ•°æºä»£ç å’Œæ±‡ç¼–ä»£ç \nè°ƒè¯•å’Œä¿å­˜ core æ–‡ä»¶\nå‘½ä»¤\tå«ä¹‰\nfile exec_file  *# *\tåŠ è½½å¯æ‰§è¡Œæ–‡ä»¶çš„ç¬¦å·è¡¨ä¿¡æ¯\ncore core_file\tåŠ è½½ core-dump æ–‡ä»¶\ngcore core_file\tç”Ÿæˆ core-dump æ–‡ä»¶ï¼Œè®°å½•å½“å‰è¿›ç¨‹çš„çŠ¶æ€\nå¯åŠ¨æ–¹å¼\nä½¿ç”¨ gdb è°ƒè¯•ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§å¯åŠ¨æ–¹å¼ï¼š")]),n._v(" "),e("p",[n._v("gdb filename: è°ƒè¯•å¯æ‰§è¡Œç¨‹åº\ngdb attach pid: é€šè¿‡â€ ç»‘å®š â€œè¿›ç¨‹ ID æ¥è°ƒè¯•æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹\ngdb filename -c coredump_file: è°ƒè¯•å¯æ‰§è¡Œæ–‡ä»¶\nåœ¨ä¸‹é¢çš„å‡ èŠ‚ä¸­ï¼Œå°†åˆ†åˆ«å¯¹ä¸Šè¿°å‡ ç§è°ƒè¯•æ–¹å¼è¿›è¡Œè®²è§£ï¼Œä»ä¾‹å­çš„è§’åº¦å‡ºå‘ï¼Œä½¿å¾—å¤§å®¶èƒ½å¤Ÿæ›´å¥½çš„æŒæ¡è°ƒè¯•æŠ€å·§ã€‚")]),n._v(" "),e("p",[n._v("è°ƒè¯•\nå¯æ‰§è¡Œæ–‡ä»¶\nå•çº¿ç¨‹\né¦–å…ˆï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š")]),n._v(" "),e("p",[n._v("#include<stdio.h>")]),n._v(" "),e("p",[n._v('void print(int xx, int *xxptr) {\nprintf("In print():\\n");\nprintf("   xx is %d and is stored at %p.\\n", xx, &xx);\nprintf("   ptr points to %p which holds %d.\\n", xxptr, *xxptr);\n}')]),n._v(" "),e("p",[n._v('int main(void) {\nint x = 10;\nint *ptr = &x;\nprintf("In main():\\n");\nprintf("   x is %d and is stored at %p.\\n", x, &x);\nprintf("   ptr points to %p which holds %d.\\n", ptr, *ptr);\nprint(x, ptr);\nreturn 0;\n}')]),n._v(" "),e("p",[n._v("è¿™ä¸ªä»£ç æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹è¿›å…¥è°ƒè¯•ï¼š")]),n._v(" "),e("p",[n._v("gdb ./test_main\nGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-114.el7\nCopyright (C) 2013 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later "),e("a",{attrs:{href:"http://gnu.org/licenses/gpl.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://gnu.org/licenses/gpl.html"),e("OutboundLink")],1),n._v('\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type "show copying"\nand "show warranty" for details.\nThis GDB was configured as "x86_64-redhat-linux-gnu".\nFor bug reporting instructions, please see:\n'),e("a",{attrs:{href:"http://www.gnu.org/software/gdb/bugs/",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://www.gnu.org/software/gdb/bugs/"),e("OutboundLink")],1),n._v("...\nReading symbols from /root/test_main...done.\n(gdb) r\nStarting program: /root/./test_main\nIn main():\nx is 10 and is stored at 0x7fffffffe424.\nptr points to 0x7fffffffe424 which holds 10.\nIn print():\nxx is 10 and is stored at 0x7fffffffe40c.\nxxptr points to 0x7fffffffe424 which holds 10.\n[Inferior 1 (process 31518) exited normally]\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7.x86_64")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ gdb test å‘½ä»¤å¯åŠ¨è°ƒè¯•ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ r(run å‘½ä»¤çš„ç¼©å†™) æ‰§è¡Œç¨‹åºï¼Œç›´è‡³é€€å‡ºï¼Œæ¢å¥è¯è¯´ï¼Œä¸Šè¿°å‘½ä»¤æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨ gdb è¿è¡Œå¯æ‰§è¡Œç¨‹åºçš„å®Œæ•´è¿‡ç¨‹ (åªä½¿ç”¨äº† r å‘½ä»¤)ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»¥æ­¤ä¸ºä¾‹å­ï¼Œä»‹ç»å‡ ç§æ¯”è¾ƒå¸¸è§çš„å‘½ä»¤ã€‚")]),n._v(" "),e("p",[n._v("æ–­ç‚¹\n(gdb) b 15\nBreakpoint 1 at 0x400601: file test_main.cc, line 15.\n(gdb) info b\nNum     Type           Disp Enb Address            What\n1       breakpoint     keep y   0x0000000000400601 in main() at test_main.cc:15\n(gdb) r\nStarting program: /root/./test_main\nIn main():\nx is 10 and is stored at 0x7fffffffe424.\nptr points to 0x7fffffffe424 which holds 10.")]),n._v(" "),e("p",[n._v("Breakpoint 1, main () at test_main.cc:15\n15   print(xx, xxptr);\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7.x86_64\n(gdb)")]),n._v(" "),e("p",[n._v("backtrace\n(gdb) backtrace\n#0  main () at test_main.cc:15\n(gdb)")]),n._v(" "),e("p",[n._v("backtrace å‘½ä»¤æ˜¯åˆ—å‡ºå½“å‰å †æ ˆä¸­çš„æ‰€æœ‰å¸§ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ ˆä¸Šåªæœ‰ä¸€å¸§ï¼Œç¼–å·ä¸º 0ï¼Œå±äº main å‡½æ•°ã€‚")]),n._v(" "),e("p",[n._v('(gdb) step\nprint (xx=10, xxptr=0x7fffffffe424) at test_main.cc:4\n4   printf("In print():\\n");\n(gdb)')]),n._v(" "),e("p",[n._v("æ¥ç€ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† step å‘½ä»¤ï¼Œå³è¿›å…¥å‡½æ•°å†…ã€‚ä¸‹é¢æˆ‘ä»¬ç»§ç»­é€šè¿‡ backtrace å‘½ä»¤æ¥æŸ¥çœ‹æ ˆå¸§ä¿¡æ¯ã€‚")]),n._v(" "),e("p",[n._v("(gdb) backtrace\n#0  print (xx=10, xxptr=0x7fffffffe424) at test_main.cc:4\n#1  0x0000000000400612 in main () at test_main.cc:15\n(gdb)")]),n._v(" "),e("p",[n._v("ä»ä¸Šé¢è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬èƒ½å¤Ÿçœ‹å‡ºï¼Œæœ‰ä¸¤ä¸ªæ ˆå¸§ï¼Œç¬¬ 1 å¸§å±äº main å‡½æ•°ï¼Œç¬¬ 0 å¸§å±äº print å‡½æ•°ã€‚")]),n._v(" "),e("p",[n._v("æ¯ä¸ªæ ˆå¸§éƒ½åˆ—å‡ºäº†è¯¥å‡½æ•°çš„å‚æ•°åˆ—è¡¨ã€‚ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œmain å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œè€Œ print å‡½æ•°æœ‰å‚æ•°ï¼Œå¹¶ä¸”æ˜¾ç¤ºäº†å…¶å‚æ•°çš„å€¼ã€‚")]),n._v(" "),e("p",[n._v("æœ‰ä¸€ç‚¹æˆ‘ä»¬å¯èƒ½æ¯”è¾ƒè¿·æƒ‘ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œ backtrace çš„æ—¶å€™ï¼Œmain å‡½æ•°æ‰€åœ¨çš„æ ˆå¸§ç¼–å·ä¸º 0ï¼Œè€Œç¬¬äºŒæ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œmain å‡½æ•°çš„æ ˆå¸§ä¸º 1ï¼Œè€Œ print å‡½æ•°çš„æ ˆå¸§ä¸º 0ï¼Œè¿™æ˜¯å› ä¸º_ä¸æ ˆçš„å‘ä¸‹å¢é•¿_è§„å¾‹ä¸€è‡´ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½_ç¼–å·æœ€å°å¸§å·å°±æ˜¯æœ€è¿‘ä¸€æ¬¡è°ƒç”¨çš„å‡½æ•°_ã€‚")]),n._v(" "),e("p",[n._v("frame\næ ˆå¸§ç”¨æ¥å­˜å‚¨å‡½æ•°çš„å˜é‡å€¼ç­‰ä¿¡æ¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒGDB æ€»æ˜¯ä½äºå½“å‰æ­£åœ¨æ‰§è¡Œå‡½æ•°å¯¹åº”æ ˆå¸§çš„ä¸Šä¸‹æ–‡ä¸­ã€‚")]),n._v(" "),e("p",[n._v("åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œç”±äºå½“å‰æ­£åœ¨ print() å‡½æ•°ä¸­æ‰§è¡Œï¼ŒGDB ä½äºç¬¬ 0 å¸§çš„ä¸Šä¸‹æ–‡ä¸­ã€‚å¯ä»¥é€šè¿‡ frame å‘½ä»¤æ¥è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡æ‰€åœ¨çš„å¸§ã€‚")]),n._v(" "),e("p",[n._v('(gdb) frame\n#0  print (xx=10, xxptr=0x7fffffffe424) at test_main.cc:4\n4   printf("In print():\\n");\n(gdb)')]),n._v(" "),e("p",[n._v("ä¸‹é¢ï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨ print å‘½ä»¤æ‰“å°ä¸‹å½“å‰æ ˆå¸§çš„å€¼ï¼Œå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("(gdb) print xx\n$1 = 10\n(gdb) print xxptr\n$2 = (int *) 0x7fffffffe424\n(gdb)")]),n._v(" "),e("p",[n._v("å¦‚æœæˆ‘ä»¬æƒ³çœ‹å…¶ä»–æ ˆå¸§çš„å†…å®¹å‘¢ï¼Ÿæ¯”å¦‚ main å‡½æ•°ä¸­ x å’Œ ptr çš„ä¿¡æ¯å‘¢ï¼Ÿå‡å¦‚ç›´æ¥æ‰“å°è¿™ä¿©å€¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¾—åˆ°å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v('(gdb) print x\nNo symbol "x" in current context.\n(gdb) print xxptr\nNo symbol "ptr" in current context.\n(gdb)')]),n._v(" "),e("p",[n._v("åœ¨æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡_frame num_æ¥åˆ‡æ¢æ ˆå¸§ï¼Œå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("(gdb) frame 1\n#1  0x0000000000400612 in main () at test_main.cc:15\n15   print(x, ptr);\n(gdb) print x\n$3 = 10\n(gdb) print ptr\n$4 = (int *) 0x7fffffffe424\n(gdb)")]),n._v(" "),e("p",[n._v("å¤šçº¿ç¨‹\nä¸ºäº†æ–¹ä¾¿è¿›è¡Œæ¼”ç¤ºï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("#include "),e("chrono",[n._v("\n#include "),e("iostream",[n._v("\n#include "),e("string",[n._v("\n#include "),e("thread",[n._v("\n#include "),e("vector")],1)],1)],1)],1)],1),n._v(" "),e("p",[n._v('int fun_int(int n) {\nstd::this_thread::sleep_for(std::chrono::seconds(10));\nstd::cout << "in fun_int n = " << n << std::endl;')]),n._v(" "),e("p",[n._v("return 0;\n}")]),n._v(" "),e("p",[n._v('int fun_string(const std::string &s) {\nstd::this_thread::sleep_for(std::chrono::seconds(10));\nstd::cout << "in fun_string s = " << s << std::endl;')]),n._v(" "),e("p",[n._v("return 0;\n}")]),n._v(" "),e("p",[n._v("int main() {\nstd::vector"),e("int",[n._v(" v;\nv.emplace_back(1);\nv.emplace_back(2);\nv.emplace_back(3);")])],1),n._v(" "),e("p",[n._v("std::cout << v.size() << std::endl;")]),n._v(" "),e("p",[n._v('std::thread t1(fun_int, 1);\nstd::thread t2(fun_string, "test");')]),n._v(" "),e("p",[n._v('std::cout << "after thread create" << std::endl;\nt1.join();\nt2.join();\nreturn 0;\n}')]),n._v(" "),e("p",[n._v("ä¸Šè¿°ä»£ç æ¯”è¾ƒç®€å•ï¼š")]),n._v(" "),e("p",[n._v("å‡½æ•° fun_int çš„åŠŸèƒ½æ˜¯ä¼‘çœ  10sï¼Œç„¶åæ‰“å°å…¶å‚æ•°\nå‡½æ•° fun_string åŠŸèƒ½æ˜¯ä¼‘çœ  10sï¼Œç„¶åæ‰“å°å…¶å‚æ•°\nmain å‡½æ•°ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«æ‰§è¡Œä¸Šè¿°ä¸¤ä¸ªå‡½æ•°\nä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„è°ƒè¯•è¿‡ç¨‹ï¼š")]),n._v(" "),e("p",[n._v('(gdb) b 27\nBreakpoint 1 at 0x4013d5: file test.cc, line 27.\n(gdb) b test.cc:32\nBreakpoint 2 at 0x40142d: file test.cc, line 32.\n(gdb) info b\nNum     Type           Disp Enb Address            What\n1       breakpoint     keep y   0x00000000004013d5 in main() at test.cc:27\n2       breakpoint     keep y   0x000000000040142d in main() at test.cc:32\n(gdb) r\nStarting program: /root/test\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library "/lib64/libthread_db.so.1".')]),n._v(" "),e("p",[n._v("Breakpoint 1, main () at test.cc:27\n(gdb) c\nContinuing.\n3\n[New Thread 0x7ffff6fd2700 (LWP 44996)]\nin fun_int n = 1\n[New Thread 0x7ffff67d1700 (LWP 44997)]")]),n._v(" "),e("p",[n._v('Breakpoint 2, main () at test.cc:32\n32   std::cout << "after thread create" << std::endl;\n(gdb) info threads\nId   Target Id         Frame\n3    Thread 0x7ffff67d1700 (LWP 44997) "test" 0x00007ffff7051fc3 in new_heap () from /lib64/libc.so.6\n2    Thread 0x7ffff6fd2700 (LWP 44996) "test" 0x00007ffff7097e2d in nanosleep () from /lib64/libc.so.6')]),n._v(" "),e("ul",[e("li",[n._v('1    Thread 0x7ffff7fe7740 (LWP 44987) "test" main () at test.cc:32\n(gdb) thread 2\n[Switching to thread 2 (Thread 0x7ffff6fd2700 (LWP 44996))]\n#0  0x00007ffff7097e2d in nanosleep () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff7097e2d in nanosleep () from /lib64/libc.so.6\n#1  0x00007ffff7097cc4 in sleep () from /lib64/libc.so.6\n#2  0x00007ffff796ceb9 in std::this_thread::__sleep_for(std::chrono::duration<long, std::ratio<1l, 1l> >, std::chrono::duration<long, std::ratio<1l, 1000000000l> >) () from /lib64/libstdc++.so.6\n#3  0x00000000004018cc in std::this_thread::sleep_for<long, std::ratio<1l, 1l> > (__rtime=...) at /usr/include/c++/4.8.2/thread:281\n#4  0x0000000000401307 in fun_int (n=1) at test.cc:9\n#5  0x0000000000404696 in std::_Bind_simple<int ('),e("em",[n._v("(int))(int)>::_M_invoke<0ul>(std::_Index_tuple<0ul>) (this=0x609080)\nat /usr/include/c++/4.8.2/functional:1732\n#6  0x000000000040443d in std::_Bind_simple<int (")]),n._v("(int))(int)>::operator()() (this=0x609080) at /usr/include/c++/4.8.2/functional:1720\n#7  0x000000000040436e in std::thread::_Impl<std::_Bind_simple<int (*(int))(int)> >::_M_run() (this=0x609068) at /usr/include/c++/4.8.2/thread:115\n#8  0x00007ffff796d070 in ?? () from /lib64/libstdc++.so.6\n#9  0x00007ffff7bc6dd5 in start_thread () from /lib64/libpthread.so.0\n#10 0x00007ffff70d0ead in clone () from /lib64/libc.so.6\n(gdb) c\nContinuing.\nafter thread create\nin fun_int n = 1\n[Thread 0x7ffff6fd2700 (LWP 45234) exited]\nin fun_string s = test\n[Thread 0x7ffff67d1700 (LWP 45235) exited]\n[Inferior 1 (process 45230) exited normally]\n(gdb) q")])]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°è°ƒè¯•è¿‡ç¨‹ä¸­ï¼š")]),n._v(" "),e("p",[n._v("b 27 åœ¨ç¬¬ 27 è¡ŒåŠ ä¸Šæ–­ç‚¹")]),n._v(" "),e("p",[n._v("b test.cc:32 åœ¨ç¬¬ 32 è¡ŒåŠ ä¸Šæ–­ç‚¹ (æ•ˆæœä¸ b 32 ä¸€è‡´)")]),n._v(" "),e("p",[n._v("info b è¾“å‡ºæ‰€æœ‰çš„æ–­ç‚¹ä¿¡æ¯")]),n._v(" "),e("p",[n._v("r ç¨‹åºå¼€å§‹è¿è¡Œï¼Œå¹¶åœ¨ç¬¬ä¸€ä¸ªæ–­ç‚¹å¤„æš‚åœ")]),n._v(" "),e("p",[n._v("c æ‰§è¡Œ c å‘½ä»¤ï¼Œåœ¨ç¬¬äºŒä¸ªæ–­ç‚¹å¤„æš‚åœï¼Œåœ¨ç¬¬ä¸€ä¸ªæ–­ç‚¹å’Œç¬¬äºŒä¸ªæ–­ç‚¹ä¹‹é—´ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ t1 å’Œ t2")]),n._v(" "),e("p",[n._v("info threads è¾“å‡ºæ‰€æœ‰çš„çº¿ç¨‹ä¿¡æ¯ï¼Œä»è¾“å‡ºä¸Šå¯ä»¥çœ‹å‡ºï¼Œæ€»å…±æœ‰ 3 ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«ä¸º main çº¿ç¨‹ã€t1 å’Œ t2")]),n._v(" "),e("p",[n._v("thread 2 åˆ‡æ¢è‡³çº¿ç¨‹ 2")]),n._v(" "),e("p",[n._v("bt è¾“å‡ºçº¿ç¨‹ 2 çš„å †æ ˆä¿¡æ¯")]),n._v(" "),e("p",[n._v("c ç›´è‡³ç¨‹åºç»“æŸ")]),n._v(" "),e("p",[n._v("q é€€å‡º gdb")]),n._v(" "),e("p",[n._v("å¤šè¿›ç¨‹\nåŒä¸Šé¢ä¸€æ ·ï¼Œæˆ‘ä»¬ä»ç„¶ä»¥ä¸€ä¸ªä¾‹å­è¿›è¡Œæ¨¡æ‹Ÿå¤šè¿›ç¨‹è°ƒè¯•ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("#include <stdio.h>\n#include <unistd.h>")]),n._v(" "),e("p",[n._v('int main()\n{\npid_t pid = fork();\nif (pid == -1) {\nperror("fork error\\n");\nreturn -1;\n}')]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v('if(pid == 0) { // å­è¿›ç¨‹\n    int num = 1;\n    while(num == 1){\n      sleep(10);\n     }\n    printf("this is child,pid = %d\\n", getpid());\n} else { // çˆ¶è¿›ç¨‹\n    printf("this is parent,pid = %d\\n", getpid());\n  wait(NULL); // ç­‰å¾…å­è¿›ç¨‹é€€å‡º\n}\nreturn 0;\n')])])]),e("p",[n._v("}")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒ…å«ä¸¤ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯çˆ¶è¿›ç¨‹ (ä¹Ÿå°±æ˜¯ main è¿›ç¨‹)ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ç”± fork() å‡½æ•°åˆ›å»ºçš„å­è¿›ç¨‹ã€‚")]),n._v(" "),e("p",[n._v("åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å¤šè¿›ç¨‹ç¨‹åºä¸­ï¼ŒGDB åªè°ƒè¯• main è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºç¨‹åºè°ƒç”¨äº†å¤šå°‘æ¬¡ fork()å‡½æ•°åˆ›å»ºäº†å¤šå°‘ä¸ªå­è¿›ç¨‹ï¼ŒGDB åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåªè°ƒè¯•çˆ¶è¿›ç¨‹ã€‚ä¸ºäº†æ”¯æŒå¤šè¿›ç¨‹è°ƒè¯•ï¼Œä» GDB ç‰ˆæœ¬ 7.0 å¼€å§‹æ”¯æŒå•ç‹¬è°ƒè¯• (è°ƒè¯•çˆ¶è¿›ç¨‹æˆ–è€…å­è¿›ç¨‹) å’ŒåŒæ—¶è°ƒè¯•å¤šä¸ªè¿›ç¨‹ã€‚")]),n._v(" "),e("p",[n._v("é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è°ƒè¯•å­è¿›ç¨‹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ç§æ–¹å¼è¿›è¡Œå­è¿›ç¨‹è°ƒè¯•ã€‚")]),n._v(" "),e("p",[n._v("attach\né¦–å…ˆï¼Œæ— è®ºæ˜¯çˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼Œéƒ½å¯ä»¥é€šè¿‡ attach å‘½ä»¤å¯åŠ¨ gdb è¿›è¡Œè°ƒè¯•ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¯¹äºæ¯ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œæ“ä½œç³»ç»Ÿéƒ½ä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªå”¯ä¸€ ID å·ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ IDã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“äº†è¿›ç¨‹ IDï¼Œå°±å¯ä»¥ä½¿ç”¨ attach å‘½ä»¤å¯¹å…¶è¿›è¡Œè°ƒè¯•äº†ã€‚")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œfork() å‡½æ•°åˆ›å»ºçš„å­è¿›ç¨‹å†…éƒ¨ï¼Œé¦–å…ˆä¼šè¿›å…¥ while å¾ªç¯ sleepï¼Œç„¶ååœ¨ while å¾ªç¯ä¹‹åè°ƒç”¨ printf å‡½æ•°ã€‚è¿™æ ·åšçš„ç›®çš„æœ‰å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("å¸®åŠ© attach æ•è·è¦è°ƒè¯•çš„è¿›ç¨‹ id\nåœ¨ä½¿ç”¨ gdb è¿›è¡Œè°ƒè¯•çš„æ—¶å€™ï¼ŒçœŸæ­£çš„ä»£ç  (å³ print å‡½æ•°) æ²¡æœ‰è¢«æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥ä»å¤´å¼€å§‹å¯¹å­è¿›ç¨‹è¿›è¡Œè°ƒè¯•\nâ\nå¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œä¸Šé¢ä»£ç ä»¥åŠè¿›å…¥ while å¾ªç¯ï¼Œæ— è®ºå¦‚ä½•æ˜¯ä¸ä¼šæ‰§è¡Œåˆ°ä¸‹é¢ printf å‡½æ•°ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯ gdb çš„å‰å®³ä¹‹å¤„ï¼Œå¯ä»¥é€šè¿‡ gdb å‘½ä»¤ä¿®æ”¹ num çš„å€¼ï¼Œä»¥ä¾¿å…¶è·³å‡º while å¾ªç¯")]),n._v(" "),e("p",[n._v("â\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ test_process")]),n._v(" "),e("p",[n._v("g++ -g test_process.cc -o test_process")]),n._v(" "),e("p",[n._v("ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹å°è¯•å¯åŠ¨è°ƒè¯•ã€‚")]),n._v(" "),e("p",[n._v("gdb -q ./test_process\nReading symbols from /root/test_process...done.\n(gdb)")]),n._v(" "),e("p",[n._v("è¿™é‡Œéœ€è¦è¯´æ˜ä¸‹ï¼Œä¹‹æ‰€ä»¥åŠ  - q é€‰é¡¹ï¼Œæ˜¯æƒ³å»æ‰å…¶ä»–ä¸å¿…è¦çš„è¾“å‡ºï¼Œq ä¸º quite çš„ç¼©å†™ã€‚")]),n._v(" "),e("p",[n._v("(gdb) r\nStarting program: /root/./test_process\nDetaching after fork from child process 37482.\nthis is parent,pid = 37478\n[Inferior 1 (process 37478) exited normally]\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7.x86_64 libgcc-4.8.5-36.el7.x86_64 libstdc++-4.8.5-36.el7.x86_64\n(gdb) attach 37482\n//ç¬¦å·ç±»è¾“å‡ºï¼Œæ­¤å¤„ç•¥å»\n(gdb) n\nSingle stepping until exit from function __nanosleep_nocancel,\nwhich has no line number information.\n0x00007ffff72b3cc4 in sleep () from /lib64/libc.so.6\n(gdb)\nSingle stepping until exit from function sleep,\nwhich has no line number information.\nmain () at test_process.cc:8\n8       while(num==10){\n(gdb)")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† n(next çš„ç¼©å†™)ï¼Œä½¿å…¶é‡æ–°å¯¹ while å¾ªç¯çš„åˆ¤æ–­ä½“è¿›è¡Œåˆ¤æ–­ã€‚")]),n._v(" "),e("p",[n._v('(gdb) set num = 1\n(gdb) n\n12       printf("this is child,pid = %d\\n",getpid());\n(gdb) c\nContinuing.\nthis is child,pid = 37482\n[Inferior 1 (process 37482) exited normally]\n(gdb)')]),n._v(" "),e("p",[n._v("ä¸ºäº†é€€å‡º while å¾ªç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ set å‘½ä»¤è®¾ç½®äº† num çš„å€¼ä¸º 1ï¼Œè¿™æ ·æ¡ä»¶å°±ä¼šå¤±æ•ˆé€€å‡º while å¾ªç¯ï¼Œè¿›è€Œæ‰§è¡Œä¸‹é¢çš„ printf() å‡½æ•°ï¼›åœ¨æœ€åæˆ‘ä»¬æ‰§è¡Œäº† c(continue çš„ç¼©å†™) å‘½ä»¤ï¼Œæ”¯æŒç¨‹åºé€€å‡ºã€‚")]),n._v(" "),e("p",[n._v("â\nå¦‚æœç¨‹åºæ­£åœ¨æ­£å¸¸è¿è¡Œï¼Œå‡ºç°äº†æ­»é”ç­‰ç°è±¡ï¼Œåˆ™å¯ä»¥é€šè¿‡ ps è·å–è¿›ç¨‹ IDï¼Œç„¶åæ ¹æ® gdb attach pid è¿›è¡Œç»‘å®šï¼Œè¿›è€ŒæŸ¥çœ‹å †æ ˆä¿¡æ¯")]),n._v(" "),e("p",[n._v("â\næŒ‡å®šè¿›ç¨‹\né»˜è®¤æƒ…å†µä¸‹ï¼ŒGDB è°ƒè¯•å¤šè¿›ç¨‹ç¨‹åºæ—¶å€™ï¼Œåªè°ƒè¯•çˆ¶è¿›ç¨‹ã€‚GDB æä¾›äº†ä¸¤ä¸ªå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ follow-fork-mode å’Œ detach-on-fork æ¥æŒ‡å®šè°ƒè¯•çˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ã€‚")]),n._v(" "),e("p",[n._v("follow-fork-mode\nè¯¥å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š")]),n._v(" "),e("p",[n._v("(gdb) set follow-fork-mode mode")]),n._v(" "),e("p",[n._v("å…¶ä¸­ï¼Œmode æœ‰ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹ï¼š")]),n._v(" "),e("p",[n._v('parent: çˆ¶è¿›ç¨‹ï¼Œmode çš„é»˜è®¤é€‰é¡¹\nchild: å­è¿›ç¨‹ï¼Œå…¶ç›®çš„æ˜¯å‘Šè¯‰ gdb åœ¨ç›®æ ‡åº”ç”¨è°ƒç”¨ fork ä¹‹åæ¥ç€è°ƒè¯•å­è¿›ç¨‹è€Œä¸æ˜¯çˆ¶è¿›ç¨‹ï¼Œå› ä¸ºåœ¨ Linux ç³»ç»Ÿä¸­ fork() ç³»ç»Ÿè°ƒç”¨æˆåŠŸä¼šè¿”å›ä¸¤æ¬¡ï¼Œä¸€æ¬¡åœ¨çˆ¶è¿›ç¨‹ï¼Œä¸€æ¬¡åœ¨å­è¿›ç¨‹\n(gdb) show follow-fork-mode\nDebugger response to a program call of fork or vfork is "parent".\n(gdb) set follow-fork-mode child\n(gdb) r\nStarting program: /root/./test_process\n[New process 37830]\nthis is parent,pid = 37826')]),n._v(" "),e("p",[n._v('^C\nProgram received signal SIGINT, Interrupt.\n[Switching to process 37830]\n0x00007ffff72b3e10 in __nanosleep_nocancel () from /lib64/libc.so.6\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7.x86_64 libgcc-4.8.5-36.el7.x86_64 libstdc++-4.8.5-36.el7.x86_64\n(gdb) n\nSingle stepping until exit from function __nanosleep_nocancel,\nwhich has no line number information.\n0x00007ffff72b3cc4 in sleep () from /lib64/libc.so.6\n(gdb) n\nSingle stepping until exit from function sleep,\nwhich has no line number information.\nmain () at test_process.cc:8\n8       while(num==10){\n(gdb) show follow-fork-mode\nDebugger response to a program call of fork or vfork is "child".\n(gdb)')]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹æ“ä½œï¼š")]),n._v(" "),e("p",[n._v("show follow-fork-mode: é€šè¿‡è¯¥å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰å¤„äºä»€ä¹ˆæ¨¡å¼ä¸‹ï¼Œé€šè¿‡è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œå¤„äº parent å³çˆ¶è¿›ç¨‹æ¨¡å¼\nset follow-fork-mode child: æŒ‡å®šè°ƒè¯•å­è¿›ç¨‹æ¨¡å¼\nr: è¿è¡Œç¨‹åºï¼Œç›´æ¥è¿è¡Œç¨‹åºï¼Œæ­¤æ—¶ä¼šè¿›å…¥å­è¿›ç¨‹ï¼Œç„¶åæ‰§è¡Œ while å¾ªç¯\nctrl + c: é€šè¿‡è¯¥å‘½ä»¤ï¼Œå¯ä»¥ä½¿å¾— GDB æ”¶åˆ° SIGINT å‘½ä»¤ï¼Œä»è€Œæš‚åœæ‰§è¡Œ while å¾ªç¯\nn(next): ç»§ç»­æ‰§è¡Œï¼Œè¿›è€Œè¿›å…¥åˆ° while å¾ªç¯çš„æ¡ä»¶åˆ¤æ–­å¤„\nshow follow-fork-mode: å†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œé€šè¿‡è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œå½“å‰å¤„äº child æ¨¡å¼ä¸‹\ndetach-on-fork\nå¦‚æœä¸€å¼€å§‹æŒ‡å®šè¦è°ƒè¯•å­è¿›ç¨‹è¿˜æ˜¯çˆ¶è¿›ç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨ follow-fork-mode å‘½ä»¤å®Œå…¨å¯ä»¥æ»¡è¶³éœ€æ±‚; ä½†æ˜¯å¦‚æœæƒ³åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæƒ³æ ¹æ®å®é™…æƒ…å†µåœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢è°ƒè¯•å‘¢ï¼Ÿ")]),n._v(" "),e("p",[n._v("GDB æä¾›äº†å¦å¤–ä¸€ä¸ªå‘½ä»¤ï¼š")]),n._v(" "),e("p",[n._v("(gdb) set detach-on-fork mode")]),n._v(" "),e("p",[n._v("å…¶ä¸­ mode æœ‰å¦‚ä¸‹ä¸¤ä¸ªå€¼ï¼š")]),n._v(" "),e("p",[n._v("on: é»˜è®¤å€¼ï¼Œå³è¡¨æ˜åªè°ƒè¯•ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥æ˜¯å­è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶è¿›ç¨‹")]),n._v(" "),e("p",[n._v("off: ç¨‹åºä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«è®°å½•ï¼Œè¿›è€Œæˆ‘ä»¬å¯ä»¥å¯¹æ‰€æœ‰çš„è¿›ç¨‹è¿›è¡Œè°ƒè¯•")]),n._v(" "),e("p",[n._v("å¦‚æœé€‰æ‹©å…³é—­detach-on-forkæ¨¡å¼ (mode ä¸º off)ï¼Œé‚£ä¹ˆ GDB å°†ä¿ç•™å¯¹æ‰€æœ‰è¢« fork å‡ºæ¥çš„è¿›ç¨‹æ§åˆ¶ï¼Œå³å¯ç”¨è°ƒè¯•æ‰€æœ‰è¢« fork å‡ºæ¥çš„è¿›ç¨‹ã€‚å¯ç”¨ ä½¿ç”¨info forkså‘½ä»¤åˆ—å‡ºæ‰€æœ‰çš„å¯è¢« GDB è°ƒè¯•çš„ fork è¿›ç¨‹ï¼Œå¹¶å¯ç”¨ä½¿ç”¨ fork å‘½ä»¤ä»ä¸€ä¸ª fork è¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ª fork è¿›ç¨‹ã€‚")]),n._v(" "),e("p",[n._v("info forks: æ‰“å° DGB æ§åˆ¶ä¸‹çš„æ‰€æœ‰è¢« fork å‡ºæ¥çš„è¿›ç¨‹åˆ—è¡¨ã€‚è¯¥åˆ—è¡¨åŒ…æ‹¬ fork idã€è¿›ç¨‹ id å’Œå½“å‰è¿›ç¨‹çš„ä½ç½®\nfork fork-id: å‚æ•° fork-id æ˜¯ GDB åˆ†é…çš„å†…éƒ¨ fork ç¼–å·ï¼Œè¯¥ç¼–å·å¯ç”¨é€šè¿‡ä¸Šé¢çš„å‘½ä»¤info forksè·å–\ncoredump\nå½“æˆ‘ä»¬å¼€å‘æˆ–è€…ä½¿ç”¨ä¸€ä¸ªç¨‹åºæ—¶å€™ï¼Œæœ€æ€•çš„è«è¿‡äºç¨‹åºè«åå…¶å¦™å´©æºƒã€‚ä¸ºäº†åˆ†æå´©æºƒäº§ç”Ÿçš„åŸå› ï¼Œæ“ä½œç³»ç»Ÿçš„å†…å­˜å†…å®¹ï¼ˆåŒ…æ‹¬ç¨‹åºå´©æºƒæ—¶å€™çš„å †æ ˆç­‰ä¿¡æ¯ï¼‰ä¼šåœ¨ç¨‹åºå´©æºƒçš„æ—¶å€™ dump å‡ºæ¥ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶åä¸º core.pidï¼Œå…¶ä¸­ pid ä¸ºè¿›ç¨‹ idï¼‰ï¼Œè¿™ä¸ª dump æ“ä½œå«åš coredump(æ ¸å¿ƒè½¬å‚¨)ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ç”¨è°ƒè¯•å™¨è°ƒè¯•æ­¤æ–‡ä»¶ï¼Œä»¥è¿˜åŸç¨‹åºå´©æºƒæ—¶å€™çš„åœºæ™¯ã€‚")]),n._v(" "),e("p",[n._v("åœ¨æˆ‘ä»¬åˆ†æå¦‚æœç”¨ gdb è°ƒè¯• coredump æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆéœ€è¦ç”Ÿæˆä¸€ä¸ª coredumpï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°±ç”¨å¦‚ä¸‹ä¾‹å­æ¥ç”Ÿæˆï¼š")]),n._v(" "),e("p",[n._v("#include <stdio.h>")]),n._v(" "),e("p",[n._v('void print(int *v, int size) {\nfor (int i = 0; i < size; ++i) {\nprintf("elem[%d] = %d\\n", i, v[i]);\n}\n}')]),n._v(" "),e("p",[n._v("int main() {\nint v[] = {0, 1, 2, 3, 4};\nprint(v, 1000);\nreturn 0;\n}")]),n._v(" "),e("p",[n._v("ç¼–è¯‘å¹¶è¿è¡Œè¯¥ç¨‹åºï¼š")]),n._v(" "),e("p",[n._v("g++ -g test_core.cc -o test_core\n./test_core")]),n._v(" "),e("p",[n._v("è¾“å‡ºå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("elem[775] = 1702113070\nelem[776] = 1667200115\nelem[777] = 6648431\nelem[778] = 0\nelem[779] = 0\næ®µé”™è¯¯(åæ ¸)")]),n._v(" "),e("p",[n._v("å¦‚æˆ‘ä»¬é¢„æœŸï¼Œç¨‹åºäº§ç”Ÿäº†å¼‚å¸¸ï¼Œä½†æ˜¯å´æ²¡æœ‰ç”Ÿæˆ coredump æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ç³»ç»Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œcoredump ç”Ÿæˆæ˜¯å…³é—­çš„ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®å¯¹åº”çš„é€‰é¡¹ä»¥æ‰“å¼€ coredump ç”Ÿæˆã€‚")]),n._v(" "),e("p",[n._v("é’ˆå¯¹å¤šçº¿ç¨‹ç¨‹åºäº§ç”Ÿçš„ coredumpï¼Œæœ‰æ—¶å€™å…¶å †æ ˆä¿¡æ¯å¹¶ä¸èƒ½å®Œæ•´çš„å»åˆ†æåŸå› ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬å¾—æœ‰å…¶ä»–æ–¹å¼ã€‚")]),n._v(" "),e("p",[n._v("18 å¹´æœ‰ä¸€æ¬¡çº¿ä¸Šæ•…éšœï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯åœ¨çº¿ä¸Šçš„æ—¶å€™ï¼Œå°±ä¼š coredumpï¼Œæ ¹æ® gdb è°ƒè¯• coredumpï¼Œåªèƒ½å®šä½åˆ°äº† libcurl é‡Œé¢ï¼Œä½†å´å®šä½ä¸å‡ºåŸå› ï¼Œç”¨äº†å¤§æ¦‚ä¸¤å¤©çš„æ—¶é—´ï¼Œå‘ç°åªæœ‰åœ¨è¶…æ—¶çš„æ—¶å€™ï¼Œæ‰ä¼š coredumpï¼Œè€Œæµ‹è¯•ç¯å¢ƒå› ä¸ºé…ç½®æ¯”è¾ƒå·®è¶…æ—¶è®¾ç½®çš„æ˜¯ 20msï¼Œè€Œçº¿ä¸Šæ˜¯ 5msï¼ŒçŸ¥é“ coredump åŸå› åï¼Œé‡‡ç”¨é€æ­¥å®šä½ç¼©å°èŒƒå›´æ³•ï¼Œé€æ­¥ç¼©å°ä»£ç èŒƒå›´ï¼Œæœ€ç»ˆå®šä½åˆ°æ˜¯ libcurl ä¸€ä¸ª bug å¯¼è‡´ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œå®šä½çº¿ä¸Šé—®é¢˜éœ€è¦ç»“åˆå®é™…æƒ…å†µï¼Œé‡‡å–åˆé€‚çš„æ–¹æ³•æ¥å®šä½é—®é¢˜ã€‚")]),n._v(" "),e("p",[n._v("é…ç½®\né…ç½® coredump ç”Ÿæˆï¼Œæœ‰ä¸´æ—¶é…ç½® (é€€å‡ºç»ˆç«¯åï¼Œé…ç½®å¤±æ•ˆ) å’Œæ°¸ä¹…é…ç½®ä¸¤ç§ã€‚")]),n._v(" "),e("p",[n._v("ä¸´æ—¶\né€šè¿‡ulimit -aå¯ä»¥åˆ¤æ–­å½“å‰æœ‰æ²¡æœ‰é…ç½® coredump ç”Ÿæˆï¼š")]),n._v(" "),e("p",[n._v("ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0")]),n._v(" "),e("p",[n._v("ä»ä¸Šé¢è¾“å‡ºå¯ä»¥çœ‹å‡º core file size åé¢çš„æ•°ä¸º 0ï¼Œå³ä¸ç”Ÿæˆ coredump æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œè®¾ç½®")]),n._v(" "),e("p",[n._v("ulimit -c size")]),n._v(" "),e("p",[n._v("å…¶ä¸­ size ä¸ºå…è®¸ç”Ÿæˆçš„ coredump å¤§å°ï¼Œè¿™ä¸ªä¸€èˆ¬å°½é‡è®¾ç½®å¤§ç‚¹ï¼Œä»¥é˜²æ­¢ç”Ÿæˆçš„ coredump ä¿¡æ¯ä¸å…¨ï¼Œç¬”è€…ä¸€èˆ¬è®¾ç½®ä¸ºä¸é™ã€‚")]),n._v(" "),e("p",[n._v("ulimit -c unlimited")]),n._v(" "),e("p",[n._v("éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä¸´æ—¶é…ç½®çš„ coredump é€‰é¡¹ï¼Œå…¶é»˜è®¤ç”Ÿæˆè·¯å¾„ä¸ºæ‰§è¡Œè¯¥å‘½ä»¤æ—¶å€™çš„è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ¥è¿›è¡Œè·¯å¾„ä¿®æ”¹ã€‚")]),n._v(" "),e("p",[n._v("æ°¸ä¹…\nä¸Šé¢çš„è®¾ç½®åªæ˜¯ä½¿èƒ½äº† core dump åŠŸèƒ½ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œå†…æ ¸åœ¨ coredump æ—¶æ‰€äº§ç”Ÿçš„ core æ–‡ä»¶æ”¾åœ¨ä¸è¯¥ç¨‹åºç›¸åŒçš„ç›®å½•ä¸­ï¼Œå¹¶ä¸”æ–‡ä»¶åå›ºå®šä¸º coreã€‚å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœæœ‰å¤šä¸ªç¨‹åºäº§ç”Ÿ core æ–‡ä»¶ï¼Œæˆ–è€…åŒä¸€ä¸ªç¨‹åºå¤šæ¬¡å´©æºƒï¼Œå°±ä¼šé‡å¤è¦†ç›–åŒä¸€ä¸ª core æ–‡ä»¶ã€‚")]),n._v(" "),e("p",[n._v("è¿‡ä¿®æ”¹ kernel çš„å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šå†…æ ¸æ‰€ç”Ÿæˆçš„ coredump æ–‡ä»¶çš„æ–‡ä»¶åã€‚ä½¿ç”¨ä¸‹é¢å‘½ä»¤ï¼Œå¯ä»¥å®ç° coredump æ°¸ä¹…é…ç½®ã€å­˜æ”¾è·¯å¾„ä»¥åŠç”Ÿæˆ coredump åç§°ç­‰ã€‚")]),n._v(" "),e("p",[n._v("mkdir -p /www/coredump/\nchmod 777 /www/coredump/")]),n._v(" "),e("p",[n._v("/etc/profile\nulimit -c unlimited")]),n._v(" "),e("p",[n._v("/etc/security/limits.conf")]),n._v(" "),e("ul",[e("li",[e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v("     soft     core   unlimited\n")])])])])]),n._v(" "),e("p",[n._v('echo "/www/coredump/core-%e-%p-%h-%t" > /proc/sys/kernel/core_pattern')]),n._v(" "),e("p",[n._v("è°ƒè¯•\nç°åœ¨ï¼Œæˆ‘ä»¬é‡æ–°æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ŒæŒ‰ç…§é¢„æœŸäº§ç”Ÿ coredump æ–‡ä»¶ï¼š")]),n._v(" "),e("p",[n._v("./test_coredump")]),n._v(" "),e("p",[n._v("elem[955] = 1702113070\nelem[956] = 1667200115\nelem[957] = 6648431\nelem[958] = 0\nelem[959] = 0\næ®µé”™è¯¯(åæ ¸)")]),n._v(" "),e("p",[n._v("ç„¶åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œ coredump è°ƒè¯•ï¼š")]),n._v(" "),e("p",[n._v("gdb ./test_core -c /www/coredump/core_test_core_1640765384_38924 -q")]),n._v(" "),e("p",[n._v("è¾“å‡ºå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v('#0  0x0000000000400569 in print (v=0x7fff3293c100, size=1000) at test_core.cc:5\n5     printf("elem[%d] = %d\\n", i, v[i]);\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7.x86_64 libgcc-4.8.5-36.el7.x86_64 libstdc++-4.8.5-36.el7.x86_64\n(gdb)')]),n._v(" "),e("p",[n._v("å¯ä»¥çœ‹å‡ºï¼Œç¨‹åº core åœ¨äº†ç¬¬ 5 è¡Œï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡whereå‘½ä»¤æ¥æŸ¥çœ‹å †æ ˆå›æº¯ä¿¡æ¯ã€‚")]),n._v(" "),e("p",[n._v("â\nåœ¨ gdb ä¸­è¾“å…¥ where å‘½ä»¤ï¼Œå¯ä»¥è·å–å †æ ˆè°ƒç”¨ä¿¡æ¯ã€‚å½“è¿›è¡Œ coredump è°ƒè¯•æ—¶å€™ï¼Œè¿™ä¸ªæ˜¯æœ€åŸºæœ¬ä¸”æœ€æœ‰ç”¨å¤„çš„å‘½ä»¤ã€‚where å‘½ä»¤è¾“å‡ºçš„ç»“æœåŒ…å«ç¨‹åºä¸­ çš„å‡½æ•°åç§°å’Œç›¸å…³å‚æ•°å€¼ã€‚")]),n._v(" "),e("p",[n._v("â\né€šè¿‡ where å‘½ä»¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‘ç°ç¨‹åº core åœ¨äº†ç¬¬ 5 è¡Œï¼Œé‚£ä¹ˆæ ¹æ®åˆ†ææºç åŸºæœ¬å°±èƒ½å®šä½åŸå› ã€‚")]),n._v(" "),e("p",[n._v("â\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¤šçº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œcore ä¸ä¸€å®šåœ¨å½“å‰çº¿ç¨‹ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ä»£ç æœ‰ä¸€å®šçš„äº†è§£ï¼Œèƒ½å¤Ÿä¿è¯å“ªå—ä»£ç æ˜¯å®‰å…¨çš„ï¼Œç„¶åé€šè¿‡ thread num åˆ‡æ¢çº¿ç¨‹ï¼Œç„¶åå†é€šè¿‡ bt æˆ–è€… where å‘½ä»¤æŸ¥çœ‹å †æ ˆä¿¡æ¯ï¼Œè¿›è€Œå®šä½ coredump åŸå› ã€‚")]),n._v(" "),e("p",[n._v("â\nåŸç†\nåœ¨å‰é¢å‡ èŠ‚ï¼Œæˆ‘ä»¬è®²äº† gdb çš„å‘½ä»¤ï¼Œä»¥åŠè¿™äº›å‘½ä»¤åœ¨è°ƒè¯•æ—¶å€™çš„ä½œç”¨ï¼Œå¹¶ä»¥ä¾‹å­è¿›è¡Œäº†æ¼”ç¤ºã€‚ä½œä¸º C/C++ coderï¼Œè¦çŸ¥å…¶ç„¶ï¼Œæ›´è¦çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æ‰€ä»¥ï¼Œå€ŸåŠ©æœ¬èŠ‚ï¼Œæˆ‘ä»¬å¤§æ¦‚è®²ä¸‹ GDB è°ƒè¯•çš„åŸç†ã€‚")]),n._v(" "),e("p",[n._v("gdb é€šè¿‡ç³»ç»Ÿè°ƒç”¨ ptrace æ¥æ¥ç®¡ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚ptrace ç³»ç»Ÿè°ƒç”¨æä¾›äº†ä¸€ç§æ–¹æ³•ä½¿å¾—çˆ¶è¿›ç¨‹å¯ä»¥è§‚å¯Ÿå’Œæ§åˆ¶å…¶å®ƒè¿›ç¨‹çš„æ‰§è¡Œï¼Œæ£€æŸ¥å’Œæ”¹å˜å…¶æ ¸å¿ƒæ˜ åƒä»¥åŠå¯„å­˜å™¨ã€‚å®ƒä¸»è¦ç”¨æ¥å®ç°æ–­ç‚¹è°ƒè¯•å’Œç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªã€‚")]),n._v(" "),e("p",[n._v("ptrace ç³»ç»Ÿè°ƒç”¨å®šä¹‰å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("#include <sys/ptrace.h>\nlong ptrace(enum __ptrace_request request, pid_t pid, void *addr, void *data)")]),n._v(" "),e("p",[n._v("pid_t pidï¼šæŒ‡ç¤º ptrace è¦è·Ÿè¸ªçš„è¿›ç¨‹\nvoid *addrï¼šæŒ‡ç¤ºè¦ç›‘æ§çš„å†…å­˜åœ°å€\nenum __ptrace_request requestï¼šå†³å®šäº†ç³»ç»Ÿè°ƒç”¨çš„åŠŸèƒ½ï¼Œå‡ ä¸ªä¸»è¦çš„é€‰é¡¹ï¼š\nPTRACE_TRACEMEï¼šè¡¨ç¤ºæ­¤è¿›ç¨‹å°†è¢«çˆ¶è¿›ç¨‹è·Ÿè¸ªï¼Œä»»ä½•ä¿¡å·ï¼ˆé™¤äº† SIGKILLï¼‰éƒ½ä¼šæš‚åœå­è¿›ç¨‹ï¼Œæ¥ç€é˜»å¡äº wait() ç­‰å¾…çš„çˆ¶è¿›ç¨‹è¢«å”¤é†’ã€‚å­è¿›ç¨‹å†…éƒ¨å¯¹ exec() çš„è°ƒç”¨å°†å‘å‡º SIGTRAP ä¿¡å·ï¼Œè¿™å¯ä»¥è®©çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹æ–°ç¨‹åºå¼€å§‹è¿è¡Œä¹‹å‰å°±å®Œå…¨æ§åˆ¶å®ƒ\nPTRACE_ATTACHï¼šattach åˆ°ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹ï¼Œä½¿å…¶æˆä¸ºå½“å‰è¿›ç¨‹è·Ÿè¸ªçš„å­è¿›ç¨‹ï¼Œè€Œå­è¿›ç¨‹çš„è¡Œä¸ºç­‰åŒäºå®ƒè¿›è¡Œäº†ä¸€æ¬¡ PTRACE_TRACEME æ“ä½œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å½“å‰è¿›ç¨‹æˆä¸ºè¢«è·Ÿè¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œä½†æ˜¯å­è¿›ç¨‹ä½¿ç”¨ getppid() çš„åˆ°çš„ä»å°†æ˜¯å…¶åŸå§‹çˆ¶è¿›ç¨‹çš„ pid\nPTRACE_CONTï¼šç»§ç»­è¿è¡Œä¹‹å‰åœæ­¢çš„å­è¿›ç¨‹ã€‚å¯åŒæ—¶å‘å­è¿›ç¨‹äº¤ä»˜æŒ‡å®šçš„ä¿¡å·\nè°ƒè¯•åŸç†\nè¿è¡Œå¹¶è°ƒè¯•æ–°è¿›ç¨‹\nè¿è¡Œå¹¶è°ƒè¯•æ–°è¿›ç¨‹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("è¿è¡Œ gdb exe\nè¾“å…¥ run å‘½ä»¤ï¼Œgdb æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\né€šè¿‡ fork() ç³»ç»Ÿè°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹\nåœ¨æ–°åˆ›å»ºçš„å­è¿›ç¨‹ä¸­æ‰§è¡Œ ptrace(PTRACE_TRACEME, 0, 0, 0) æ“ä½œ\nåœ¨å­è¿›ç¨‹ä¸­é€šè¿‡ execv() ç³»ç»Ÿè°ƒç”¨åŠ è½½æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶\nattach è¿è¡Œçš„è¿›ç¨‹\nå¯ä»¥é€šè¿‡ gdb attach pid æ¥è°ƒè¯•ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹ï¼Œgdb å°†å¯¹æŒ‡å®šè¿›ç¨‹æ‰§è¡Œ ptrace(PTRACE_ATTACH, pid, 0, 0) æ“ä½œã€‚")]),n._v(" "),e("p",[n._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ attach ä¸€ä¸ªè¿›ç¨‹ id æ—¶å€™ï¼Œå¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š")]),n._v(" "),e("p",[n._v("Attaching to process 28849\nptrace: Operation not permitted.")]),n._v(" "),e("p",[n._v("è¿™æ˜¯å› ä¸ºæ²¡æœ‰æƒé™è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æ ¹æ®å¯åŠ¨è¯¥è¿›ç¨‹ç”¨æˆ·ä¸‹æˆ–è€… root ä¸‹è¿›è¡Œæ“ä½œã€‚")]),n._v(" "),e("p",[n._v("æ–­ç‚¹åŸç†\nå®ç°åŸç†\nå½“æˆ‘ä»¬é€šè¿‡ b æˆ–è€… break è®¾ç½®æ–­ç‚¹æ—¶å€™ï¼Œå°±æ˜¯åœ¨æŒ‡å®šä½ç½®æ’å…¥æ–­ç‚¹æŒ‡ä»¤ï¼Œå½“è¢«è°ƒè¯•çš„ç¨‹åºè¿è¡Œåˆ°æ–­ç‚¹çš„æ—¶å€™ï¼Œäº§ç”Ÿ SIGTRAP ä¿¡å·ã€‚è¯¥ä¿¡å·è¢« gdb æ•è·å¹¶ è¿›è¡Œæ–­ç‚¹å‘½ä¸­åˆ¤æ–­ã€‚")]),n._v(" "),e("p",[n._v("è®¾ç½®åŸç†\nåœ¨ç¨‹åºä¸­è®¾ç½®æ–­ç‚¹ï¼Œå°±æ˜¯å…ˆåœ¨è¯¥ä½ç½®ä¿å­˜åŸæŒ‡ä»¤ï¼Œç„¶ååœ¨è¯¥ä½ç½®å†™å…¥ int 3ã€‚å½“æ‰§è¡Œåˆ° int 3 æ—¶ï¼Œå‘ç”Ÿè½¯ä¸­æ–­ï¼Œå†…æ ¸ä¼šå‘å­è¿›ç¨‹å‘é€ SIGTRAP ä¿¡å·ã€‚å½“ç„¶ï¼Œè¿™ä¸ªä¿¡å·ä¼šè½¬å‘ç»™çˆ¶è¿›ç¨‹ã€‚ç„¶åç”¨ä¿å­˜çš„æŒ‡ä»¤æ›¿æ¢ int 3 å¹¶ç­‰å¾…æ“ä½œæ¢å¤ã€‚")]),n._v(" "),e("p",[n._v("å‘½ä¸­åˆ¤æ–­\ngdb å°†æ‰€æœ‰æ–­ç‚¹ä½ç½®å­˜å‚¨åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚å‘½ä¸­åˆ¤å®šå°†è¢«è°ƒè¯•ç¨‹åºçš„å½“å‰åœæ­¢ä½ç½®ä¸é“¾è¡¨ä¸­çš„æ–­ç‚¹ä½ç½®è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æŸ¥çœ‹æ–­ç‚¹äº§ç”Ÿçš„ä¿¡å·ã€‚")]),n._v(" "),e("p",[n._v("æ¡ä»¶åˆ¤æ–­\nåœ¨æ–­ç‚¹å¤„æ¢å¤æŒ‡ä»¤åï¼Œå¢åŠ äº†ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœè¡¨è¾¾å¼ä¸ºçœŸï¼Œåˆ™è§¦å‘æ–­ç‚¹ã€‚ç”±äºéœ€è¦åˆ¤æ–­ä¸€æ¬¡ï¼Œæ·»åŠ æ¡ä»¶æ–­ç‚¹åï¼Œæ˜¯å¦è§¦å‘æ¡ä»¶æ–­ç‚¹ï¼Œéƒ½ä¼šå½±å“æ€§èƒ½ã€‚åœ¨ x86 å¹³å°ä¸Šï¼Œéƒ¨åˆ†ç¡¬ä»¶æ”¯æŒç¡¬ä»¶æ–­ç‚¹ã€‚ä¸æ˜¯åœ¨æ¡ä»¶æ–­ç‚¹å¤„æ’å…¥ int 3ï¼Œè€Œæ˜¯æ’å…¥å¦ä¸€æ¡æŒ‡ä»¤ã€‚å½“ç¨‹åºåˆ°è¾¾è¿™ä¸ªåœ°å€æ—¶ï¼Œä¸æ˜¯å‘å‡º int 3 ä¿¡å·ï¼Œè€Œæ˜¯è¿›è¡Œæ¯”è¾ƒã€‚ç‰¹å®šå¯„å­˜å™¨çš„å†…å®¹å’ŒæŸä¸ªåœ°å€ï¼Œç„¶åå†³å®šæ˜¯å¦å‘é€ int 3ã€‚å› æ­¤ï¼Œå½“ä½ çš„æ–­ç‚¹ä½ç½®è¢«ç¨‹åºé¢‘ç¹ â€œé€šè¿‡â€ æ—¶ï¼Œå°½é‡ä½¿ç”¨ç¡¬ä»¶æ–­ç‚¹ï¼Œè¿™å°†æœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚")]),n._v(" "),e("p",[n._v("å•æ­¥åŸç†\nè¿™ä¸ª ptrace å‡½æ•°æœ¬èº«å°±æ”¯æŒï¼Œå¯ä»¥é€šè¿‡ ptrace(PTRACE_SINGLESTEP, pid,...) è°ƒç”¨æ¥å®ç°å•æ­¥ã€‚")]),n._v(" "),e("p",[n._v('printf("attaching to PID %d\\n", pid);\nif (ptrace(PTRACE_ATTACH, pid, 0, 0) != 0)\n{\nperror("attach failed");\n}\nint waitStat = 0;\nint waitRes = waitpid(pid, &waitStat, WUNTRACED);\nif (waitRes != pid || !WIFSTOPPED(waitStat))\n{\nprintf("unexpected waitpid result!\\n");\nexit(1);\n}')]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v("int64_t numSteps = 0;\nwhile (true) {\n    auto res = ptrace(PTRACE_SINGLESTEP, pid, 0, 0);\n}\n")])])]),e("p",[n._v("ä¸Šè¿°ä»£ç ï¼Œé¦–å…ˆæ¥æ”¶ä¸€ä¸ª pidï¼Œç„¶åå¯¹å…¶è¿›è¡Œ attachï¼Œæœ€åè°ƒç”¨ ptrace è¿›è¡Œå•æ­¥è°ƒè¯•ã€‚")]),n._v(" "),e("p",[n._v("å…¶å®ƒ\nå€ŸåŠ©æœ¬æ–‡ï¼Œç®€å•ä»‹ç»ä¸‹ç¬”è€…å·¥ä½œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„ä¸€äº›å…¶ä»–å‘½ä»¤æˆ–è€…å·¥å…·ã€‚")]),n._v(" "),e("p",[n._v("pstack\næ­¤å‘½ä»¤å¯æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„æ ˆè·Ÿè¸ªã€‚pstack å‘½ä»¤å¿…é¡»ç”±ç›¸åº”è¿›ç¨‹çš„å±ä¸»æˆ– root è¿è¡Œã€‚å¯ä»¥ä½¿ç”¨ pstack æ¥ç¡®å®šè¿›ç¨‹æŒ‚èµ·çš„ä½ç½®ã€‚æ­¤å‘½ä»¤å…è®¸ä½¿ç”¨çš„å”¯ä¸€é€‰é¡¹æ˜¯è¦æ£€æŸ¥çš„è¿›ç¨‹çš„ PIDã€‚")]),n._v(" "),e("p",[n._v("è¿™ä¸ªå‘½ä»¤åœ¨æ’æŸ¥è¿›ç¨‹é—®é¢˜æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬å‘ç°ä¸€ä¸ªæœåŠ¡ä¸€ç›´å¤„äº work çŠ¶æ€ï¼ˆå¦‚å‡æ­»çŠ¶æ€ï¼Œå¥½ä¼¼æ­»å¾ªç¯ï¼‰ï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°±èƒ½è½»æ¾å®šä½é—®é¢˜æ‰€åœ¨ï¼›å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå¤šæ‰§è¡Œå‡ æ¬¡ pstackï¼Œè‹¥å‘ç°ä»£ç æ ˆæ€»æ˜¯åœåœ¨åŒä¸€ä¸ªä½ç½®ï¼Œé‚£ä¸ªä½ç½®å°±éœ€è¦é‡ç‚¹å…³æ³¨ï¼Œå¾ˆå¯èƒ½å°±æ˜¯å‡ºé—®é¢˜çš„åœ°æ–¹ï¼›")]),n._v(" "),e("p",[n._v("ä»¥å‰é¢çš„å¤šçº¿ç¨‹ä»£ç ä¸ºä¾‹ï¼Œå…¶è¿›ç¨‹ ID æ˜¯ 4507(åœ¨ç¬”è€…æœ¬åœ°)ï¼Œé‚£ä¹ˆé€šè¿‡")]),n._v(" "),e("p",[n._v("pstack 4507 è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("Thread 3 (Thread 0x7f07aaa69700 (LWP 45708)):\n#0  0x00007f07aab2ee2d in nanosleep () from /lib64/libc.so.6\n#1  0x00007f07aab2ecc4 in sleep () from /lib64/libc.so.6\n#2  0x00007f07ab403eb9 in std::this_thread::__sleep_for(std::chrono::duration<long, std::ratio<1l, 1l> >, std::chrono::duration<long, std::ratio<1l, 1000000000l> >) () from /lib64/libstdc++.so.6\n#3  0x00000000004018cc in void std::this_thread::sleep_for<long, std::ratio<1l, 1l> >(std::chrono::duration<long, std::ratio<1l, 1l> > const&) ()\n#4  0x00000000004012de in fun_int(int) ()\n#5  0x0000000000404696 in int std::_Bind_simple<int ("),e("em",[n._v("(int))(int)>::_M_invoke<0ul>(std::_Index_tuple<0ul>) ()\n#6  0x000000000040443d in std::_Bind_simple<int (")]),n._v("(int))(int)>::operator()() ()\n#7  0x000000000040436e in std::thread::_Impl<std::_Bind_simple<int ("),e("em",[n._v("(int))(int)> >::_M_run() ()\n#8  0x00007f07ab404070 in ?? () from /lib64/libstdc++.so.6\n#9  0x00007f07ab65ddd5 in start_thread () from /lib64/libpthread.so.0\n#10 0x00007f07aab67ead in clone () from /lib64/libc.so.6\nThread 2 (Thread 0x7f07aa268700 (LWP 45709)):\n#0  0x00007f07aab2ee2d in nanosleep () from /lib64/libc.so.6\n#1  0x00007f07aab2ecc4 in sleep () from /lib64/libc.so.6\n#2  0x00007f07ab403eb9 in std::this_thread::__sleep_for(std::chrono::duration<long, std::ratio<1l, 1l> >, std::chrono::duration<long, std::ratio<1l, 1000000000l> >) () from /lib64/libstdc++.so.6\n#3  0x00000000004018cc in void std::this_thread::sleep_for<long, std::ratio<1l, 1l> >(std::chrono::duration<long, std::ratio<1l, 1l> > const&) ()\n#4  0x0000000000401340 in fun_string(std::string const&) ()\n#5  0x000000000040459f in int std::_Bind_simple<int (")]),n._v("(char const*))(std::string const&)>::_M_invoke<0ul>(std::_Index_tuple<0ul>) ()\n#6  0x000000000040441f in std::_Bind_simple<int ("),e("em",[n._v("(char const")]),n._v("))(std::string const&)>::operator()() ()\n#7  0x0000000000404350 in std::thread::_Impl<std::_Bind_simple<int ("),e("em",[n._v("(char const")]),n._v("))(std::string const&)> >::_M_run() ()\n#8  0x00007f07ab404070 in ?? () from /lib64/libstdc++.so.6\n#9  0x00007f07ab65ddd5 in start_thread () from /lib64/libpthread.so.0\n#10 0x00007f07aab67ead in clone () from /lib64/libc.so.6\nThread 1 (Thread 0x7f07aba80740 (LWP 45707)):\n#0  0x00007f07ab65ef47 in pthread_join () from /lib64/libpthread.so.0\n#1  0x00007f07ab403e37 in std::thread::join() () from /lib64/libstdc++.so.6\n#2  0x0000000000401455 in main ()")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°è¾“å‡ºç»“æœä¸­ï¼Œå°†è¿›ç¨‹å†…éƒ¨çš„è¯¦ç»†ä¿¡æ¯éƒ½è¾“å‡ºåœ¨ç»ˆç«¯ï¼Œä»¥æ–¹ä¾¿åˆ†æé—®é¢˜ã€‚")]),n._v(" "),e("p",[n._v("ldd\nåœ¨æˆ‘ä»¬ç¼–è¯‘è¿‡ç¨‹ä¸­é€šå¸¸ä¼šæç¤ºç¼–è¯‘å¤±è´¥ï¼Œé€šè¿‡è¾“å‡ºé”™è¯¯ä¿¡æ¯å‘ç°æ˜¯æ‰¾ä¸åˆ°å‡½æ•°å®šä¹‰ï¼Œå†æˆ–è€…ç¼–è¯‘æˆåŠŸäº†ï¼Œä½†æ˜¯è¿è¡Œæ—¶å€™å¤±è´¥ (å¾€å¾€æ˜¯å› ä¸ºä¾èµ–äº†éæ­£å¸¸ç‰ˆæœ¬çš„ lib åº“å¯¼è‡´)ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ ldd æ¥åˆ†æè¯¥å¯æ‰§è¡Œæ–‡ä»¶ä¾èµ–äº†å“ªäº›åº“ä»¥åŠè¿™äº›åº“æ‰€åœ¨çš„è·¯å¾„ã€‚")]),n._v(" "),e("p",[n._v("ç”¨æ¥æŸ¥çœ‹ç¨‹å¼è¿è¡Œæ‰€éœ€çš„å…±äº«åº“, å¸¸ç”¨æ¥è§£å†³ç¨‹å¼å› ç¼ºå°‘æŸä¸ªåº“æ–‡ä»¶è€Œä¸èƒ½è¿è¡Œçš„ä¸€äº›é—®é¢˜ã€‚")]),n._v(" "),e("p",[n._v("ä»ç„¶æŸ¥çœ‹å¯æ‰§è¡Œç¨‹åº test_thread çš„ä¾èµ–åº“ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("ldd -r ./test_thread\nlinux-vdso.so.1 =>  (0x00007ffde43bc000)\nlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007f8c5e310000)\nlibstdc++.so.6 => /lib64/libstdc++.so.6 (0x00007f8c5e009000)\nlibm.so.6 => /lib64/libm.so.6 (0x00007f8c5dd07000)\nlibgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f8c5daf1000)\nlibc.so.6 => /lib64/libc.so.6 (0x00007f8c5d724000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f8c5e52c000)")]),n._v(" "),e("p",[n._v("åœ¨ä¸Šè¿°è¾“å‡ºä¸­ï¼š")]),n._v(" "),e("p",[n._v("ç¬¬ä¸€åˆ—ï¼šç¨‹åºéœ€è¦ä¾èµ–ä»€ä¹ˆåº“\nç¬¬äºŒåˆ—ï¼šç³»ç»Ÿæä¾›çš„ä¸ç¨‹åºéœ€è¦çš„åº“æ‰€å¯¹åº”çš„åº“\nç¬¬ä¸‰åˆ—ï¼šåº“åŠ è½½çš„å¼€å§‹åœ°å€\nåœ¨æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡ ldd æŸ¥çœ‹ä¾èµ–åº“çš„æ—¶å€™ï¼Œä¼šæç¤ºæ‰¾ä¸åˆ°åº“ï¼Œå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("ldd -r test_process\nlinux-vdso.so.1 =>  (0x00007ffc71b80000)\nlibstdc++.so.6 => /lib64/libstdc++.so.6 (0x00007fe4badd5000)\nlibm.so.6 => /lib64/libm.so.6 (0x00007fe4baad3000)\nlibgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007fe4ba8bd000)\nlibc.so.6 => /lib64/libc.so.6 (0x00007fe4ba4f0000)\n/lib64/ld-linux-x86-64.so.2 (0x00007fe4bb0dc000)\nliba.so => not found")]),n._v(" "),e("p",[n._v("æ¯”å¦‚ä¸Šé¢æœ€åä¸€å¥æç¤ºï¼Œliba.so æ‰¾ä¸åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦æˆ‘ä»¬çŸ¥é“ liba.so çš„è·¯å¾„ï¼Œæ¯”å¦‚åœ¨ / path/to/liba.soï¼Œé‚£ä¹ˆå¯ä»¥æœ‰ä¸‹é¢ä¸¤ç§æ–¹å¼ï¼š")]),n._v(" "),e("p",[n._v("LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/")]),n._v(" "),e("p",[n._v("è¿™æ ·åœ¨é€šè¿‡ ldd æŸ¥çœ‹ï¼Œå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„ lib åº“ï¼Œä½†æ˜¯è¿™ä¸ªç¼ºç‚¹æ˜¯ä¸´æ—¶çš„ï¼Œå³é€€å‡ºç»ˆç«¯åï¼Œå†æ‰§è¡Œ lddï¼Œä»ç„¶ä¼šæç¤ºæ‰¾ä¸åˆ°è¯¥åº“ï¼Œæ‰€ä»¥å°±æœ‰äº†å¦å¤–ä¸€ç§æ–¹å¼ï¼Œå³é€šè¿‡ä¿®æ”¹ / etc/ld.so.confï¼Œåœ¨è¯¥æ–‡ä»¶çš„åé¢åŠ ä¸Šéœ€è¦çš„è·¯å¾„ï¼Œå³")]),n._v(" "),e("p",[n._v("include ld.so.conf.d/*.conf\n/path/to/")]),n._v(" "),e("p",[n._v("ç„¶åé€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯æ°¸ä¹…ç”Ÿæ•ˆ")]),n._v(" "),e("p",[n._v("/sbin/ldconfig")]),n._v(" "),e("p",[n._v("c++filt\nå› ä¸º c++ æ”¯æŒé‡è½½ï¼Œä¹Ÿå°±å¼•å‡ºäº†ç¼–è¯‘å™¨çš„name manglingæœºåˆ¶ï¼Œå¯¹å‡½æ•°è¿›è¡Œé‡å‘½åã€‚")]),n._v(" "),e("p",[n._v("æˆ‘ä»¬é€šè¿‡ strings å‘½ä»¤æŸ¥çœ‹ test_thread ä¸­çš„å‡½æ•°ä¿¡æ¯ (ä»…è¾“å‡º fun ç­‰ç›¸å…³)")]),n._v(" "),e("p",[n._v("strings test_thread | grep fun_\nin fun_int n =\nin fun_string s =\n_GLOBAL__sub_I__Z7fun_inti\n_Z10fun_stringRKSs")]),n._v(" "),e("p",[n._v("å¯ä»¥çœ‹åˆ°_Z10fun_stringRKSs è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœæƒ³çŸ¥é“è¿™ä¸ªå‡½æ•°å®šä¹‰çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ c++filt å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š")]),n._v(" "),e("p",[n._v("c++filt _Z10fun_stringRKSs\nfun_string(std::basic_string<char, std::char_traits"),e("char",[n._v(", std::allocator"),e("char",[n._v(" > const&)")])],1)],1),n._v(" "),e("p",[n._v("é€šè¿‡ä¸Šè¿°è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°åè¿˜åŸåˆ°æˆ‘ä»¬ä»£ç ä¸­çš„å‡½æ•°åå³ fun_stringã€‚")]),n._v(" "),e("p",[n._v("ç»“è¯­\nGDB æ˜¯ä¸€ä¸ªåœ¨ Linux ä¸Šè¿›è¡Œå¼€å‘çš„ä¸€ä¸ªå¿…ä¸å¯å°‘çš„è°ƒè¯•å·¥å…·ï¼Œä½¿ç”¨åœºæ™¯ä¾èµ–äºå…·ä½“çš„éœ€æ±‚æˆ–è€…é‡åˆ°çš„å…·ä½“é—®é¢˜ã€‚åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œç†Ÿç»ƒä½¿ç”¨ GDB åŠ ä»¥è¾…åŠ©ï¼Œèƒ½å¤Ÿä½¿å¾—å¼€å‘è¿‡ç¨‹äº‹åŠåŠŸå€ã€‚")]),n._v(" "),e("p",[n._v("æœ¬æ–‡ä»ä¸€äº›ç®€å•çš„å‘½ä»¤å‡ºå‘ï¼Œé€šè¿‡ä¸¾ä¾‹è°ƒè¯•å¯æ‰§è¡Œç¨‹åº (å•çº¿ç¨‹ã€å¤šçº¿ç¨‹ä»¥åŠå¤šè¿›ç¨‹åœºæ™¯)ã€coredump æ–‡ä»¶ç­‰å„ä¸ªåœºæ™¯ï¼Œä½¿å¾—å¤§å®¶èƒ½å¤Ÿæ›´åŠ ç›´è§‚çš„äº†è§£ GDB çš„ä½¿ç”¨ã€‚GDB åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œç¬”è€…å·¥ä½œä¸­ä½¿ç”¨çš„éƒ½æ˜¯éå¸¸åŸºæœ¬çš„ä¸€äº›åŠŸèƒ½ï¼Œå¦‚æœæƒ³æ·±å…¥ç†è§£ GDBï¼Œåˆ™éœ€è¦å»å®˜ç½‘è¿›è¡Œé˜…è¯»äº†è§£ã€‚")]),n._v(" "),e("p",[n._v("å¥½äº†ï¼Œæœ¬æœŸçš„æ–‡ç« å°±åˆ°è¿™ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚")]),n._v(" "),e("p",[n._v("â\næœ¬æ–‡ä»æ„æ€åˆ°å®Œæˆï¼Œå¤§æ¦‚ç”¨äº†ä¸‰å‘¨æ—¶é—´ï¼Œå†™ä½œè¿‡ç¨‹æ˜¯ç—›è‹¦çš„ (éœ€è¦æ•´ç†èµ„æ–™ä»¥åŠæ„å»ºå„ç§åœºæ™¯ï¼Œä»¥åŠå°†å„ç§ç°åœºè¿˜åŸ)ï¼ŒåŒæ—¶åˆæ˜¯æ”¶è·æ»¡æ»¡çš„ã€‚é€šè¿‡æœ¬æ–‡ï¼Œè¿›ä¸€æ­¥åŠ æ·±äº†å¯¹ GDB çš„åº•å±‚åŸç†ç†è§£ã€‚")]),n._v(" "),e("p",[n._v("â\nå‚è€ƒ\nhttps://www.codetd.com/en/article/13107993")]),n._v(" "),e("p",[n._v("https://www.codetd.com/en/article/13107993 https://users.ece.utexas.edu/~adnan/gdb-refcard.pdf")]),n._v(" "),e("p",[n._v("https://www.cloudsavvyit.com/10921/debugging-with-gdb-getting-started/")]),n._v(" "),e("p",[n._v("https://blog.birost.com/a?ID=00650-b03e2257-94bf-41f3-b0fc-d352d5b02431")]),n._v(" "),e("p",[n._v("https://www.cnblogs.com/xsln/p/ptrace.html")]),n._v(" "),e("p",[n._v("å¦‚æœå¯¹æœ¬æ–‡æœ‰ç–‘é—®å¯ä»¥åŠ ç¬”è€…å¾®ä¿¡ç›´æ¥äº¤æµï¼Œç¬”è€…ä¹Ÿå»ºäº† C/C++ ç›¸å…³çš„æŠ€æœ¯ç¾¤ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è”ç³»ç¬”è€…åŠ ç¾¤ã€‚")]),n._v(" "),e("p",[n._v("å¾€æœŸç²¾å½©å›é¡¾")]),n._v(" "),e("p",[n._v("ã€çº¿ä¸Šé—®é¢˜ã€‘P1 çº§å…¬å¸æ•…éšœï¼Œå¹´ç»ˆå¥–ä¸ä¿\nã€æ€§èƒ½ä¼˜åŒ–ã€‘lock-free åœ¨å¬å›å¼•æ“ä¸­çš„å®ç°\nã€æ€§èƒ½ä¼˜åŒ–ã€‘é«˜æ•ˆå†…å­˜æ± çš„è®¾è®¡ä¸å®ç°\n2 ä¸‡å­— | 30 å¼ å›¾å¸¦ä½ é¢†ç•¥ glibc å†…å­˜ç®¡ç†ç²¾é«“\nã€ä¸‡å­—é•¿æ–‡ã€‘åƒé€è´Ÿè½½å‡è¡¡\næµé‡æ§åˆ¶è¿˜èƒ½è¿™ä¹ˆæã€‚ã€‚ã€‚\næŠ€æœ¯åå¹´\nèŠèŠæœåŠ¡æ³¨å†Œä¸å‘ç°")]),n._v(" "),e("p",[n._v("ç‚¹ä¸ªå…³æ³¨å§!")]),n._v(" "),e("p",[n._v("å…¬ä¼—å·\nå…¨æ–‡å®Œ\næœ¬æ–‡ç”± ç®€æ‚¦ SimpRead ä¼˜åŒ–ï¼Œç”¨ä»¥æå‡é˜…è¯»ä½“éªŒ\nä½¿ç”¨äº† å…¨æ–°çš„ç®€æ‚¦è¯æ³•åˆ†æå¼•æ“ betaï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦ç»†è¯´æ˜\nå†™åœ¨å‰é¢\nèƒŒæ™¯\næ¦‚å¿µ\nå¸¸ç”¨å‘½ä»¤\næ–­ç‚¹\nbreakpoint\nwatchpoint\ncatchpoint\nå‘½ä»¤è¡Œ\nç¨‹åºæ ˆ\nå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹\nå¤šè¿›ç¨‹\nå¤šçº¿ç¨‹\næ‰“å°è¾“å‡º\nå‡½æ•°è·³è½¬\nå…¶å®ƒ\nå›¾å½¢åŒ–\næ±‡ç¼–\nè°ƒè¯•å’Œä¿å­˜ core æ–‡ä»¶\nå¯åŠ¨æ–¹å¼\nè°ƒè¯•\nå¯æ‰§è¡Œæ–‡ä»¶\nå•çº¿ç¨‹\nå¤šçº¿ç¨‹\nå¤šè¿›ç¨‹\ncoredump\nåŸç†\nè°ƒè¯•åŸç†\nè¿è¡Œå¹¶è°ƒè¯•æ–°è¿›ç¨‹\nattach è¿è¡Œçš„è¿›ç¨‹\næ–­ç‚¹åŸç†\nå®ç°åŸç†\nè®¾ç½®åŸç†\nå‘½ä¸­åˆ¤æ–­\næ¡ä»¶åˆ¤æ–­\nå•æ­¥åŸç†\nå…¶å®ƒ\npstack\nldd\nc++filt\nç»“è¯­\nå‚è€ƒ")])])}),[],!1,null,null,null);t.default=r.exports}}]);