(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{451:function(_,t,i){"use strict";i.r(t);var s=i(42),e=Object(s.a)({},(function(){var _=this,t=_.$createElement,i=_._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[i("p",[_._v("åŸåˆ› æ¨é¹ [åˆæ‹äº‘](javascript:void(0)ğŸ˜‰ "),i("em",[_._v("9æœˆ2æ—¥")])]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_gif/OdIoEOgFgUGcibO4v5qxt8aOe6ArwX6qwM3icvwPccBDAjM1eoJTf9QbJ2WcUicIw5QkOiasIKgvNV56qWIXqTcBicg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä»ç½‘å¡åˆ°åº”ç”¨ç¨‹åºï¼Œæ•°æ®åŒ…ä¼šç»è¿‡ä¸€ç³»åˆ—ç»„ä»¶ï¼Œå…¶ä¸­é©±åŠ¨åšäº†ä»€ä¹ˆï¼Ÿå†…æ ¸åšäº†ä»€ä¹ˆï¼Ÿä¸ºäº†ä¼˜åŒ–ï¼Œæˆ‘ä»¬åˆèƒ½åšäº›ä»€ä¹ˆï¼Ÿæ•´ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°è¯¸å¤šç»†å¾®å¯è°ƒçš„è½¯ç¡¬ä»¶å‚æ•°ï¼Œå¹¶ä¸”ç›¸äº’å½±å“ï¼Œä¸å­˜åœ¨ä¸€åŠ³æ°¸é€¸çš„â€œé“¶å¼¹â€ã€‚æœ¬æ–‡ä¸­åˆæ‹äº‘ç³»ç»Ÿå¼€å‘é«˜çº§å·¥ç¨‹å¸ˆæ¨é¹å°†ç»“åˆè‡ªå·±çš„çš„å®è·µç»éªŒï¼Œä»‹ç»åœ¨æ·±å…¥ç†è§£åº•å±‚æœºåˆ¶çš„åŸºç¡€ä¸Šå¦‚ä½•åšå‡ºâ€œåœºæ™¯åŒ–â€çš„æœ€ä¼˜é…ç½®ã€‚")]),_._v(" "),i("p",[_._v("æ–‡ç« æ ¹æ®æ¨é¹åœ¨åˆæ‹äº‘ Open Talk æŠ€æœ¯æ²™é¾™åŒ—äº¬ç«™ä¸»é¢˜æ¼”è®²ã€Šæ€§èƒ½ä¼˜åŒ–ï¼šæ›´å¿«åœ°æ¥æ”¶æ•°æ®ã€‹æ•´ç†è€Œæˆï¼Œç°åœºè§†é¢‘åŠ PPT å¯ä¸‹æ‹‰æ–‡æœ«ç‚¹å‡»é˜…è¯»åŸæ–‡æŸ¥çœ‹ã€‚")]),_._v(" "),i("p",[_._v("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åˆæ‹äº‘å¼€å‘å·¥ç¨‹å¸ˆæ¨é¹ï¼Œåœ¨åˆæ‹äº‘å·¥ä½œå·²æœ‰å››å¹´æ—¶é—´ï¼ŒæœŸé—´ä¸€ç›´ä»äº‹ CDN åº•å±‚ç³»ç»Ÿå¼€å‘çš„å·¥ä½œï¼Œè´Ÿè´£è°ƒåº¦ã€ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ç­‰ CDN çš„æ ¸å¿ƒç»„ä»¶ï¼Œå¾ˆé«˜å…´æ¥è·Ÿå¤§å®¶åˆ†äº«åœ¨ç½‘ç»œæ•°æ®å¤„ç†æ–¹é¢çš„ç»éªŒå’Œæ„Ÿå—ã€‚ä»Šå¤©åˆ†äº«çš„ä¸»é¢˜æ˜¯ã€Šå¦‚ä½•æ›´å¿«åœ°æ¥æ”¶æ•°æ®ã€‹ï¼Œä¸»è¦ä»‹ç»åŠ é€Ÿç½‘ç»œæ•°æ®å¤„ç†çš„æ–¹æ³•å’Œå®è·µã€‚å¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½çš„äº†è§£å¦‚ä½•åœ¨ç³»ç»Ÿçš„å±‚é¢ï¼Œå°½é‡åœ¨åº”ç”¨ç¨‹åºæ— æ„Ÿçš„æƒ…å†µä¸‹åšåˆ°æè‡´çš„ä¼˜åŒ–ã€‚è¨€å½’æ­£ä¼ ï¼Œè¿›å…¥ä¸»é¢˜ã€‚")]),_._v(" "),i("p",[_._v("é¦–å…ˆéœ€è¦æ¸…æ¥šåœ¨å°è¯•åšä»»ä½•ä¼˜åŒ–çš„æ—¶å€™ï¼Œæƒ³åˆ°çš„ç¬¬ä¸€ä»¶äº‹æƒ…åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿä¸ªäººè§‰å¾—æ˜¯è¡¡é‡æŒ‡æ ‡ã€‚åšä»»ä½•æ”¹åŠ¨æˆ–ä¼˜åŒ–ä¹‹å‰ï¼Œéƒ½è¦æ˜ç¡®åœ°çŸ¥é“ï¼Œæ˜¯æ€æ ·çš„æŒ‡æ ‡åæ˜ å‡ºäº†å½“å‰çš„é—®é¢˜ã€‚é‚£ä¹ˆåœ¨åšäº†ç›¸åº”çš„è°ƒæ•´æˆ–æ”¹åŠ¨ä¹‹åï¼Œä¹Ÿæ‰èƒ½é€šè¿‡æŒ‡æ ‡å»éªŒè¯å®é™…æ•ˆæœä¸ä½œç”¨ã€‚")]),_._v(" "),i("p",[_._v("é’ˆå¯¹è¦åˆ†äº«çš„ä¸»é¢˜ï¼Œæœ‰ä¸€ä¸ªå›´ç»•ä¸Šé¢æŒ‡æ ‡æ ¸å¿ƒçš„åŸºæœ¬åŸåˆ™ã€‚åœ¨ç½‘ç»œå±‚é¢åšä¼˜åŒ–ï¼Œå½’æ ¹ç»“åº•åªéœ€è¦çœ‹ä¸€ç‚¹ï¼Œå‡å¦‚å¯ä»¥åšåˆ°ç½‘ç»œæ ˆçš„æ¯ä¸ªå±‚æ¬¡ï¼ŒåŠ å…¥èƒ½ç›‘æ§åˆ°å¯¹åº”å±‚æ¬¡çš„ä¸¢åŒ…ç‡ï¼Œè¿™æ ·æ ¸å¿ƒçš„æŒ‡æ ‡ï¼Œå°±å¯ä»¥æ˜ç¡®åœ°çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªä¸€å±‚ã€‚æœ‰äº†æ˜ç¡®å¯ç›‘æ§çš„æŒ‡æ ‡ï¼Œä¹‹ååšç›¸åº”çš„è°ƒæ•´ä¸å®é™…æ•ˆæœçš„éªŒè¯ä¹Ÿå°±å¾ˆç®€å•äº†ã€‚å½“ç„¶ä¸Šè¿°ä¸¤ç‚¹ç›¸å¯¹æœ‰ç‚¹è™šï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ¯”è¾ƒå¹²çš„éƒ¨åˆ†äº†ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6ZibspoCcvBZr7f4BSCtZd3dDqykckvQgQST90aIvcpLnUUqsic6XjfJQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»è¿›å…¥ç½‘å¡ï¼Œä¸€ç›´åˆ°è¾¾åº”ç”¨å±‚ï¼Œæ€»çš„æ•°æ®æµç¨‹æœ‰å¾ˆå¤šã€‚åœ¨å½“å‰é˜¶æ®µï¼Œæ— éœ€å…³æ³¨æ¯ä¸ªæµç¨‹ï¼Œç•™æ„å…¶ä¸­å‡ ä¸ªæ ¸å¿ƒçš„å…³é”®è·¯å¾„å³å¯ï¼š")]),_._v(" "),i("ul",[i("li",[_._v("ç¬¬ä¸€ä¸ªï¼Œæ•°æ®åŒ…åˆ°è¾¾ç½‘å¡ï¼›")]),_._v(" "),i("li",[_._v("ç¬¬äºŒä¸ªï¼Œç½‘å¡åœ¨æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒéœ€è¦äº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œå‘Šè¯‰ CPU æ•°æ®å·²ç»åˆ°äº†ï¼›")]),_._v(" "),i("li",[_._v("ç¬¬ä¸‰æ­¥ï¼Œå†…æ ¸ä»è¿™ä¸ªæ—¶å€™å¼€å§‹è¿›è¡Œæ¥ç®¡ï¼ŒæŠŠæ•°æ®ä»ç½‘å¡ä¸­æ‹¿å‡ºæ¥ï¼Œäº¤åˆ°åé¢å†…æ ¸çš„åè®®æ ˆå»å¤„ç†ã€‚")])]),_._v(" "),i("p",[_._v("ä»¥ä¸Šæ˜¯ä¸‰ä¸ªå…³é”®çš„è·¯å¾„ã€‚ä¸Šå›¾ä¸­å³è¾¹çš„æ‰‹ç»˜å›¾æŒ‡çš„å°±æ˜¯è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå¹¶æœ‰æ„åŒºåˆ†äº†ä¸¤ä¸ªé¢œè‰²ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆåŒºåˆ†æ˜¯å› ä¸º**æ¥ä¸‹æ¥ä¼šæŒ‰è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œåˆ†äº«ï¼Œä¸€æ˜¯ä¸Šå±‚é©±åŠ¨éƒ¨åˆ†ï¼ŒäºŒæ˜¯ä¸‹å±‚æ¶‰åŠåˆ°å†…æ ¸çš„éƒ¨åˆ†ã€‚**å½“ç„¶å†…æ ¸æ¯”è¾ƒå¤šï¼Œé€šç¯‡åªæ¶‰åŠåˆ°å†…æ ¸ç½‘ç»œå­ç³»ç»Ÿï¼Œæ›´å…·ä½“æ¥è¯´æ˜¯å†…æ ¸è·Ÿé©±åŠ¨äº¤äº’éƒ¨åˆ†çš„å†…å®¹ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ç½‘å¡é©±åŠ¨")])]),_._v(" "),i("p",[_._v("ç½‘å¡é©±åŠ¨çš„éƒ¨åˆ†ï¼Œç½‘å¡æ˜¯ç¡¬ä»¶ï¼Œé©±åŠ¨ï¼ˆdriverï¼‰æ˜¯è½¯ä»¶ï¼ŒåŒ…æ‹¬äº†ç½‘å¡é©±åŠ¨éƒ¨åˆ†çš„å¤§éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†å¯ç®€å•åˆ†å››ä¸ªç‚¹ï¼Œä¾æ¬¡æ˜¯åˆå§‹åŒ–ã€å¯åŠ¨ã€ç›‘æ§ä¸è°ƒä¼˜é©±åŠ¨å®ƒçš„åˆå§‹åŒ–æµç¨‹ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ç½‘å¡é©±åŠ¨-åˆå§‹åŒ–")])]),_._v(" "),i("p",[_._v("é©±åŠ¨åˆå§‹åŒ–çš„è¿‡ç¨‹å’Œç¡¬ä»¶ç›¸å…³ï¼Œæ— éœ€è¿‡åˆ†å…³æ³¨ã€‚ä½†éœ€æ³¨æ„ä¸€ç‚¹å°±æ˜¯æ³¨å†Œ ethool çš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¯¹ç½‘å¡åšå„ç§å„æ ·çš„æ“ä½œï¼Œä¸æ­¢å¯ä»¥è¯»å–ç½‘å¡çš„é…ç½®ï¼Œè¿˜å¯ä»¥æ›´æ”¹ç½‘å¡çš„é…ç½®å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€‚")]),_._v(" "),i("p",[_._v("é‚£å®ƒæ˜¯å¦‚ä½•æ§åˆ¶ç½‘å¡çš„å‘¢ï¼Ÿæ¯ä¸ªç½‘å¡çš„é©±åŠ¨åœ¨åˆå§‹åŒ–æ—¶ï¼Œé€šè¿‡æ¥å£ï¼Œå»æ³¨å†Œæ”¯æŒ ethool å·¥å…·çš„ä¸€ç³»åˆ—æ“ä½œã€‚ethool æ˜¯ä¸€å¥—å¾ˆé€šç”¨çš„æ¥å£ï¼Œæ¯”å¦‚è¯´å®ƒæ”¯æŒ 100 ä¸ªåŠŸèƒ½ï¼Œä½†æ¯ä¸ªå‹å·çš„ç½‘å¡ï¼Œåªèƒ½æ”¯æŒä¸€ä¸ªå­é›†ã€‚æ‰€ä»¥å…·ä½“æ”¯æŒå“ªäº›åŠŸèƒ½ï¼Œä¼šåœ¨è¿™ä¸€æ­¥è¿›è¡Œå£°æ˜ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6WgANs0IGcV3icPZMicYan6uJSyZZNU4P3mVNzukrJJj2Tsk507y2tETA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸Šå›¾æˆªå–çš„éƒ¨åˆ†ï¼Œæ˜¯åœ¨åˆå§‹åŒ–æ—¶ç»“æ„ä½“çš„èµ‹å€¼ã€‚å‰é¢ä¸¤ä¸ªå¯ä»¥ç®€å•çœ‹ä¸€ä¸‹ï¼Œé©±åŠ¨åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå‘Šè¯‰å†…æ ¸ï¼Œå¦‚æœæƒ³è¦æ“ä½œè¿™å—ç½‘å¡å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ˜¯å¯åŠ¨å’Œå…³é—­ï¼Œæœ‰ç”¨ ifconfig å·¥å…·æ“ä½œç½‘å¡çš„åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå½“ç”¨ ifconfig up/down ä¸€å¼ ç½‘å¡çš„æ—¶å€™ï¼Œè°ƒç”¨çš„éƒ½æ˜¯å®ƒåˆå§‹åŒ–æ—¶æŒ‡å®šçš„è¿™å‡ ä¸ªå‡½æ•°ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ç½‘å¡é©±åŠ¨-å¯åŠ¨")])]),_._v(" "),i("p",[_._v("é©±åŠ¨åˆå§‹åŒ–è¿‡ç¨‹ä¹‹åå°±æ˜¯å¯åŠ¨ï¼ˆopenï¼‰ä¸­çš„æµç¨‹äº†ï¼Œä¸€å…±åˆ†ä¸ºå››æ­¥ï¼šåˆ†é… rx/tx é˜Ÿåˆ—å†…å­˜ã€")]),_._v(" "),i("p",[_._v("å¼€å¯ NAPIã€æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•°ã€å¼€å¯ä¸­æ–­ã€‚å…¶ä¸­æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•°å’Œå¼€å¯ä¸­æ–­æ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œä»»ä½•ä¸€ä¸ªç¡¬ä»¶æ¥å…¥åˆ°æœºå™¨ä¸Šéƒ½éœ€è¦åšè¿™ä¸ªæ“ä½œã€‚å½“åé¢æ”¶åˆ°ä¸€äº›äº‹ä»¶æ—¶ï¼Œå®ƒéœ€è¦é€šè¿‡ä¸­æ–­å»é€šçŸ¥ç³»ç»Ÿï¼Œç„¶åå¼€å¯ä¸­æ–­ã€‚")]),_._v(" "),i("p",[_._v("ç¬¬äºŒæ­¥çš„ NAPI åé¢ä¼šè¯¦ç»†è¯´æ˜ï¼Œè¿™é‡Œå…ˆé‡ç‚¹å…³æ³¨å¯åŠ¨è¿‡ç¨‹ä¸­å¯¹å†…å­˜çš„åˆ†é…ã€‚ç½‘å¡åœ¨æ”¶åˆ°æ•°æ®æ—¶ï¼Œéƒ½å¿…é¡»æŠŠæ•°æ®ä»é“¾è·¯å±‚æ‹·è´åˆ°æœºå™¨çš„å†…å­˜é‡Œï¼Œè€Œè¿™å—å†…å­˜å°±æ˜¯ç½‘å¡åœ¨å¯åŠ¨æ—¶ï¼Œé€šè¿‡æ¥å£å‘å†…æ ¸ã€å‘æ“ä½œç³»ç»Ÿç”³è¯·è€Œæ¥çš„ã€‚å†…å­˜ä¸€æ—¦ç”³è¯·ä¸‹æ¥ï¼Œåœ°å€ç¡®å®šä¹‹åï¼Œåç»­ç½‘å¡åœ¨æ”¶åˆ°æ•°æ®çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ DMA çš„æœºåˆ¶ï¼Œç›´æ¥æŠŠæ•°æ®åŒ…ä¼ é€åˆ°å†…å­˜å›ºå®šçš„åœ°å€ä¸­å»ï¼Œç”šè‡³ä¸éœ€è¦ CPU çš„å‚ä¸ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d62foTz8b7cs9jBILKcttLEYyFHicVwaKmcy0WqXKia7RP81vBap7OH4Tw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("åˆ°é˜Ÿåˆ—å†…å­˜çš„åˆ†é…å¯ä»¥çœ‹ä¸‹ä¸Šå›¾ï¼Œå¾ˆæ—©ä¹‹å‰çš„ç½‘å¡éƒ½æ˜¯å•é˜Ÿåˆ—çš„æœºåˆ¶ï¼Œä½†ç°ä»£çš„ç½‘å¡å¤§å¤šéƒ½æ˜¯å¤šé˜Ÿåˆ—çš„ã€‚å¥½å¤„å°±æ˜¯æœºå™¨ç½‘å¡çš„æ•°æ®æ¥æ”¶å¯ä»¥è¢«è´Ÿè½½å‡è¡¡åˆ°å¤šä¸ª CPU ä¸Šï¼Œå› æ­¤ä¼šæä¾›å¤šä¸ªé˜Ÿåˆ—ï¼Œè¿™é‡Œå…ˆæœ‰ä¸ªæ¦‚å¿µåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6aSo4giaGYvwLLic9Dg4ia5gq4dDI37FXd8GP3nLIYL79hVGuKOW3OGFGw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸‹é¢æ¥è¯¦ç»†ä»‹ç»å¯åŠ¨è¿‡ç¨‹ä¸­çš„ç¬¬äºŒæ­¥ NAPIï¼Œè¿™æ˜¯ç°ä»£ç½‘ç»œæ•°æ®åŒ…å¤„ç†æ¡†æ¶ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ‰©å±•ã€‚ä¹‹æ‰€ä»¥ç°åœ¨èƒ½æ”¯æŒ 10Gã€20Gã€25G ç­‰éå¸¸é«˜é€Ÿçš„ç½‘å¡ï¼ŒNAPI æœºåˆ¶èµ·åˆ°äº†éå¸¸å¤§çš„ä½œç”¨ã€‚å½“ç„¶ NAPI å¹¶ä¸å¤æ‚ï¼Œå…¶æ ¸å¿ƒå°±ä¸¤ç‚¹ï¼šä¸­æ–­ã€è½®å¾ªã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç½‘å¡åœ¨æ¥æ”¶æ•°æ®æ—¶è‚¯å®šæ˜¯æ”¶ä¸€ä¸ªåŒ…ï¼Œäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œç„¶ååœ¨ä¸­æ–­å¤„ç†å‡½æ•°çš„æ—¶å€™å°†åŒ…å¤„ç†æ‰ã€‚å¤„åœ¨æ”¶åŒ…ã€å¤„ç†ä¸­æ–­ï¼Œä¸‹ä¸€ä¸ªæ”¶åŒ…ï¼Œå†å¤„ç†ä¸­æ–­ï¼Œè¿™æ ·çš„å¾ªç¯ä¸­ã€‚è€Œ NAPI æœºåˆ¶ä¼˜åŠ¿åœ¨äºåªéœ€è¦ä¸€æ¬¡ä¸­æ–­ï¼Œæ”¶åˆ°ä¹‹åå°±å¯ä»¥é€šè¿‡è½®å¾ªçš„æ–¹å¼ï¼ŒæŠŠé˜Ÿåˆ—å†…å­˜ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ‹¿èµ°ï¼Œè¾¾åˆ°éå¸¸é«˜æ•ˆçš„çŠ¶æ€ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ç½‘å¡é©±åŠ¨-ç›‘æ§")])]),_._v(" "),i("p",[_._v("æ¥ä¸‹æ¥å°±æ˜¯åœ¨é©±åŠ¨è¿™å±‚å¯ä»¥åšçš„ç›‘æ§äº†ï¼Œéœ€è¦å»å…³æ³¨å…¶ä¸­ä¸€äº›æ•°æ®çš„æ¥æºã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("$ sudo ethtool -S eth0NIC statistics:     rx_packets: 597028087     tx_packets: 5924278060     rx_bytes: 112643393747     tx_bytes: 990080156714     rx_broadcast: 96     tx_broadcast: 116     rx_multicast:20294528     .... \n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("é¦–å…ˆéå¸¸é‡è¦çš„æ˜¯ ethool å·¥å…·ï¼Œå®ƒå¯ä»¥æ‹¿åˆ°ç½‘å¡ä¸­ç»Ÿè®¡çš„æ•°æ®ã€æ¥æ”¶çš„åŒ…æ•°é‡ã€å¤„ç†çš„æµé‡ç­‰ç­‰å¸¸è§„çš„ä¿¡æ¯ï¼Œè€Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯éœ€è¦å…³æ³¨åˆ°å¼‚å¸¸ä¿¡æ¯ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("$ cat /sys/class/net/eth0/statistics/rx_dropped2\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("é€šè¿‡ sysfs çš„æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°ç½‘å¡çš„ä¸¢åŒ…æ•°ï¼Œè¿™å°±æ˜¯ç³»ç»Ÿå‡ºç°å¼‚å¸¸çš„ä¸€ä¸ªæ ‡å¿—ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d61dMk5rkAnL9IBXlicPveKc0Ls5aodTRy1XAvRyhWTlubvTS3PzHb5NA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸‰ä¸ªé€”å¾„æ‹¿åˆ°çš„ä¿¡æ¯ä¸å‰é¢å·®ä¸å¤šï¼Œåªæ˜¯æ ¼å¼æœ‰äº›ä¹±ï¼Œä»…åšäº†è§£å³å¯ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6sZQzK1yMuOwLl49ibFgGic9n1SibIBNmeibyOdgtiaq2h9bkeVvj4nQSAaA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸Šå›¾æ˜¯è¦åˆ†äº«çš„ä¸€ä¸ªçº¿ä¸Šæ¡ˆä¾‹ã€‚å½“æ—¶ä¸šåŠ¡ä¸Šå‡ºç°å¼‚å¸¸ï¼Œç»è¿‡æ’æŸ¥æœ€åæ˜¯æ€€ç–‘åˆ°ç½‘å¡è¿™å±‚ï¼Œä¸ºæ­¤éœ€è¦åšè¿›ä¸€æ­¥çš„åˆ†æã€‚é€šè¿‡ ifconfig å·¥å…·å¯ä»¥å¾ˆç›´è§‚çš„æŸ¥çœ‹åˆ°ç½‘å¡çš„ä¸€äº›ç»Ÿè®¡æ•°æ®ï¼Œå›¾ä¸­å¯ä»¥çœ‹åˆ°ç½‘å¡çš„ errors æ•°æ®æŒ‡æ ‡éå¸¸é«˜ï¼Œæ˜æ˜¾å‡ºç°äº†é—®é¢˜ã€‚ä½†æ›´æœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œ errors å³è¾¹æœ€åçš„ frame æŒ‡æ ‡æ•°å€¼è·Ÿå®ƒå®Œå…¨ç›¸åŒã€‚å› ä¸º errors æŒ‡æ ‡æ˜¯ç½‘å¡ä¸­å¾ˆå¤šé”™è¯¯ç´¯åŠ ä¹‹åçš„æŒ‡æ ‡ï¼Œä¸å®ƒç›¸é‚»çš„ droppedã€overruns è¿™ä¿©ä¸ªæŒ‡æ ‡éƒ½æ˜¯é›¶ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å½“æ—¶çš„çŠ¶æ€ä¸‹ï¼Œç½‘å¡çš„é”™è¯¯å¤§éƒ¨åˆ†æ¥è‡ª frameã€‚")]),_._v(" "),i("p",[_._v("å½“ç„¶è¿™åªæ˜¯ç¬æ—¶çš„çŠ¶æ€ï¼Œä¸Šå›¾ä¸­ä¸‹é¢éƒ¨åˆ†æ˜¯ç›‘æ§æ•°æ®ï¼Œå¯ä»¥æ˜æ˜¾çœ‹åˆ°æ³¢åŠ¨çš„å˜åŒ–ï¼Œç¡®å®æ˜¯æŸä¸€å°æœºå™¨å¼‚å¸¸äº†ã€‚frame é”™è¯¯ä¸€èˆ¬æ˜¯åœ¨ç½‘å¡æ”¶åˆ°æ•°æ®åŒ…ï¼Œè¿›è¡Œ RCR æ ¡éªŒæ—¶å¤±è´¥å¯¼è‡´çš„ã€‚å½“æ”¶åˆ°æ•°æ®åŒ…ï¼Œä¼šå¯¹è¯¥åŒ…ä¸­çš„å†…å®¹åšæ ¡éªŒï¼Œå½“å‘ç°è·Ÿå·²ç»å­˜ä¸‹æ¥çš„æ ¡éªŒä¸åŒ¹é…ï¼Œè¯´æ˜åŒ…æ˜¯æŸåçš„ï¼Œå› æ­¤ä¼šç›´æ¥å°†å…¶ä¸¢æ‰ã€‚")]),_._v(" "),i("p",[_._v("è¿™ä¸ªåŸå› æ˜¯æ¯”è¾ƒå¥½åˆ†æçš„ï¼Œä¸¤ç‚¹ä¸€çº¿ï¼Œæœºå™¨çš„ç½‘å¡é€šè¿‡ç½‘çº¿æ¥åˆ°ä¸Šè”äº¤æ¢æœºã€‚å½“è¿™é‡Œå‡ºç°é—®é¢˜ï¼Œä¸æ˜¯ç½‘çº¿å°±æ˜¯æœºå™¨æœ¬èº«çš„ç½‘å¡é—®é¢˜ï¼Œæˆ–è€…æ˜¯å¯¹ç«¯äº¤æ¢æœºçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯ä¸Šè”äº¤æ¢æœºç«¯å£å‡ºç°é—®é¢˜ã€‚å½“ç„¶æŒ‰ç¬¬ä¸€ä¼˜å…ˆçº§å»åˆ†æï¼Œåè°ƒè¿ç»´å»æ›´æ¢äº†æœºå™¨å¯¹åº”çš„ç½‘çº¿ï¼Œåé¢çš„æŒ‡æ ‡æƒ…å†µä¹Ÿåæ˜ å‡ºäº†æ•ˆæœï¼ŒæŒ‡æ ‡ç›´æ¥çªé™ç›´åˆ°å®Œå…¨æ¶ˆå¤±ï¼Œé”™è¯¯ä¹Ÿå°±ä¸å¤å­˜åœ¨äº†ï¼Œå¯¹åº”ä¸Šå±‚çš„ä¸šåŠ¡ä¹Ÿå¾ˆå¿«æ¢å¤äº†æ­£å¸¸ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ç½‘å¡é©±åŠ¨-è°ƒä¼˜")])]),_._v(" "),i("p",[_._v("è¯´å®Œç›‘æ§ä¹‹åæ¥çœ‹ä¸‹æœ€åçš„è°ƒä¼˜ã€‚åœ¨è¿™ä¸ªå±‚é¢èƒ½è°ƒæ•´çš„ä¸œè¥¿ä¸å¤šï¼Œä¸»è¦æ˜¯é’ˆå¯¹ç½‘å¡å¤šé˜Ÿåˆ—çš„è°ƒæ•´ï¼Œæ¯”è¾ƒç›´è§‚ã€‚è°ƒæ•´é˜Ÿåˆ—æ•°ç›®ã€å¤§å°ï¼Œå„é˜Ÿåˆ—é—´çš„æƒé‡ï¼Œç”šè‡³æ˜¯è°ƒæ•´å“ˆå¸Œçš„å­—æ®µï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("$ sudo ethtool -l eth0Channel parameters for eth0:Pre-set maximums:RX:   0TX:   0Other:    0Combined: 8Current hardware settings:RX:   0TX:   0Other:    0Combined: 4\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("ä¸Šå›¾æ˜¯é’ˆå¯¹å¤šé˜Ÿåˆ—çš„è°ƒæ•´ã€‚ä¸ºäº†è¯´æ˜åˆšæ‰çš„æ¦‚å¿µï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸ª web server ç»‘å®šåˆ°äº† CPU2ï¼Œè€Œæœºå™¨æœ‰å¤šä¸ª CPUï¼Œè¿™ä¸ªæœºå™¨çš„ç½‘å¡ä¹Ÿæ˜¯å¤šé˜Ÿåˆ—çš„ï¼Œå…¶ä¸­æŸä¸ªé˜Ÿåˆ—ä¼šè¢« CPU2 å¤„ç†ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºç½‘å¡æœ‰å¤šä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥ 80 ç«¯å£çš„æµé‡åªä¼šè¢«åˆ†é…åˆ°å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—ä¸Šå»ã€‚å‡å¦‚è¿™ä¸ªé˜Ÿåˆ—ä¸æ˜¯ç”± CPU2 å¤„ç†çš„ï¼Œå°±ä¼šæ¶‰åŠåˆ°ä¸€äº›æ•°æ®çš„è…¾æŒªã€‚åº•å±‚æŠŠæ•°æ®æ¥æ”¶ä¸Šæ¥åå†äº¤ç»™åº”ç”¨å±‚çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¿™ä¸ªæ•°æ®ç§»åŠ¨ä¸€ä¸‹ã€‚å¦‚æœæœ¬æ¥åœ¨ CPU1 å¤„ç†çš„ï¼Œéœ€è¦æŒªåˆ° CPU2 å»ï¼Œè¿™æ—¶ä¼šæ¶‰åŠåˆ° CPU cache çš„å¤±æ•ˆï¼Œè¿™å¯¹é«˜é€Ÿè¿è½¬çš„ CPU æ¥è¯´æ˜¯ä»£ä»·å¾ˆé«˜çš„æ“ä½œã€‚")]),_._v(" "),i("p",[_._v("é‚£ä¹ˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡å‰é¢æåˆ°çš„å·¥å…·ï¼Œç‰¹æ„æŠŠ 80 ç«¯å£ tcp æ•°æ®æµé‡å¯¼å‘åˆ°å¯¹åº” CPU2 å¤„ç†çš„ç½‘å¡é˜Ÿåˆ—ã€‚è¿™ä¹ˆåšçš„æ•ˆæœæ˜¯æ•°æ®åŒ…ä»åˆ°è¾¾ç½‘å¡å¼€å§‹ï¼Œåˆ°å†…æ ¸å¤„ç†å®Œå†åˆ°é€è¾¾åº”ç”¨å±‚ï¼Œéƒ½æ˜¯åŒä¸€ä¸ª CPUã€‚è¿™æ ·æœ€å¤§çš„å¥½å¤„å°±æ˜¯ç¼“å­˜ï¼ŒCPU çš„ cache å§‹ç»ˆæ˜¯çƒ­çš„ï¼Œå¦‚æ­¤æ•´ä½“ä¸‹æ¥ï¼Œå®ƒçš„å»¶è¿Ÿã€æ•ˆæœä¹Ÿä¼šéå¸¸å¥½ã€‚å½“ç„¶è¿™ä¸ªä¾‹å­å¹¶ä¸å®é™…ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜èƒ½åšåˆ°çš„ä¸€ä¸ªæ•ˆæœã€‚")]),_._v(" "),i("p",[i("strong",[_._v("å†…æ ¸ç½‘ç»œå­ç³»ç»Ÿ")])]),_._v(" "),i("p",[_._v("è¯´å®Œäº†æ•´ä¸ªç½‘å¡é©±åŠ¨éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥æ˜¯è®²è§£å†…æ ¸å­ç³»ç»Ÿéƒ¨åˆ†ï¼Œè¿™å—ä¼šåˆ†ä¸ºè½¯ä¸­æ–­ä¸ç½‘ç»œå­ç³»ç»Ÿåˆå§‹åŒ–ä¸¤éƒ¨åˆ†æ¥åˆ†äº«ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("è½¯ä¸­æ–­")])]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6dLltHTavYDU2DoR89d3HUQiagpEerpmS7eFM1dFZWl5rgrWiaqic7vgWg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸Šå›¾çš„ NETDEV æ˜¯ linux ç½‘ç»œå­ç³»ç»Ÿæ¯å¹´éƒ½ä¼šå¼€çš„ä¸€ä¸ªåˆ†ä¼šï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹æ˜¯æ¯å¹´å¤§ä¼šä¸¾åŠçš„å±Šæ•°ä¼šä»¥ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦æ¥è¡¨ç¤ºã€‚å›¾ä¸­æ˜¯åŠåˆ°äº† 0X15 å±Šï¼Œæƒ³å¿…ä¹Ÿéƒ½å‘ç°è¿™æ˜¯ 16 è¿›åˆ¶çš„æ•°å­—ï¼Œ0X15 åˆšå¥½å°±æ˜¯ 21 å¹´ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæå®¢èŒƒã€‚å¯¹ç½‘ç»œå­ç³»ç»Ÿæ„Ÿå…´è¶£çš„å¯ä»¥å»å…³æ³¨ä¸€ä¸‹ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6CSXPyicoQ57AjIkoXhCo67o3smyz1dgE17Eb4UsLBicwDnxc9esTjmNQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("è¨€å½’æ­£ä¼ ï¼Œå†…æ ¸å»¶æ—¶ä»»åŠ¡æœ‰å¤šç§æœºåˆ¶ï¼Œè€Œè½¯ä¸­æ–­åªæ˜¯å…¶ä¸­ä¸€ç§ã€‚ä¸Šå›¾æ˜¯ linux çš„åŸºæœ¬ç»“æ„ï¼Œä¸Šå±‚æ˜¯ç”¨æˆ·æ€ï¼Œä¸­é—´æ˜¯å†…æ ¸ï¼Œä¸‹å±‚æ˜¯ç¡¬ä»¶ï¼Œå¾ˆæŠ½è±¡çš„ä¸€ä¸ªåˆ†å±‚ã€‚ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´ä¼šæœ‰ä¸¤ç§äº¤äº’çš„æ–¹å¼ï¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ–è€…é€šè¿‡å¼‚å¸¸å¯ä»¥é™·å…¥åˆ°å†…æ ¸æ€é‡Œé¢ã€‚é‚£åº•å±‚çš„ç¡¬ä»¶è·Ÿå†…æ ¸åˆæ˜¯æ€ä¹ˆäº¤äº’çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸­æ–­ï¼Œç¡¬ä»¶è·Ÿå†…æ ¸äº¤äº’çš„æ—¶å€™å¿…é¡»é€šè¿‡ä¸­æ–­ï¼Œå¤„ç†ä»»ä½•äº‹ä»¶éƒ½éœ€è¦äº§ç”Ÿä¸€ä¸ªä¸­æ–­ä¿¡å·æ¥å‘ŠçŸ¥ CPU ä¸å†…æ ¸ã€‚")]),_._v(" "),i("p",[_._v("ä¸è¿‡è¿™æ ·çš„æœºåˆ¶ä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿè®¸æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¯¹ç½‘ç»œæ•°æ®æ¥è¯´ï¼Œä¸€ä¸ªæ•°æ®æŠ¥ä¸€ä¸ªä¸­æ–­ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆæ˜æ˜¾çš„ä¸¤ä¸ªé—®é¢˜ã€‚")]),_._v(" "),i("p",[_._v("**é—®é¢˜ä¸€ï¼šä¸­æ–­åœ¨å¤„ç†æœŸé—´ï¼Œä¼šå±è”½ä¹‹å‰çš„ä¸­æ–­ä¿¡å·ã€‚å½“ä¸€ä¸ªä¸­æ–­å¤„ç†çš„æ—¶é—´å¾ˆé•¿ï¼Œåœ¨å¤„ç†æœŸé—´æ”¶åˆ°çš„ä¸­æ–­ä¿¡å·éƒ½ä¼šä¸¢æ‰ã€‚**å¦‚æœå¤„ç†ä¸€ä¸ªåŒ…ç”¨äº†åç§’ï¼Œåœ¨è¿™åç§’æœŸé—´åˆæ”¶åˆ°äº†äº”ä¸ªæ•°æ®åŒ…ï¼Œä½†å› ä¸ºä¸­æ–­ä¿¡å·ä¸¢äº†ï¼Œå³ä¾¿å‰é¢çš„å¤„ç†å®Œäº†ï¼Œåé¢çš„æ•°æ®åŒ…ä¹Ÿä¸ä¼šå†å¤„ç†äº†ã€‚å¯¹åº”åˆ° tcp è¿™è¾¹ï¼Œå‡å¦‚å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘äº†ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‡ ç§’åå¤„ç†å®Œäº†ï¼Œä½†åœ¨å¤„ç†æœŸé—´å®¢æˆ·ç«¯åˆå‘äº†åç»­çš„ä¸‰ä¸ªåŒ…ï¼Œä½†æ˜¯æœåŠ¡ç«¯åé¢å¹¶ä¸çŸ¥é“ï¼Œä»¥ä¸ºåªæ”¶åˆ°äº†ä¸€ä¸ªåŒ…ï¼Œè¿™æ—¶å®¢æˆ·ç«¯åˆåœ¨ç­‰å¾…æœåŠ¡ç«¯çš„å›åŒ…ï¼Œå¦‚æ­¤ä¼šå¯¼è‡´ä¸¤è¾¹éƒ½å¡ä½äº†ï¼Œä¹Ÿè¯´æ˜äº†ä¿¡å·ä¸¢å¤±æ˜¯ä¸€ä¸ªæå…¶ä¸¥é‡çš„é—®é¢˜ã€‚")]),_._v(" "),i("p",[_._v("**é—®é¢˜äºŒï¼šä¸€ä¸ªæ•°æ®åŒ…è§¦å‘ä¸€æ¬¡ä¸­æ–­å¤„ç†çš„è¯ï¼Œå½“æœ‰å¤§é‡çš„æ•°æ®åŒ…åˆ°æ¥åï¼Œå°±ä¼šäº§ç”Ÿéå¸¸å¤§é‡çš„ä¸­æ–­ã€‚**å¦‚æœè¾¾åˆ°äº† 10 ä¸‡ã€50 ä¸‡ã€ç”šè‡³ç™¾ä¸‡çš„ ppsï¼Œé‚£ CPU å°±éœ€è¦å¤„ç†å¤§é‡çš„ç½‘ç»œä¸­æ–­ï¼Œä¹Ÿå°±ä¸ç”¨å¹²å…¶ä»–äº‹æƒ…äº†ã€‚")]),_._v(" "),i("p",[_._v("**è€Œé’ˆå¯¹ä»¥ä¸Šä¸¤ç‚¹é—®é¢˜çš„è§£å†³æ–¹æ³•å°±æ˜¯è®©ä¸­æ–­å¤„ç†å°½å¯èƒ½çš„çŸ­ã€‚**å…·ä½“æ¥è¯´ï¼Œä¸èƒ½åœ¨ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œåªèƒ½æŠŠå®ƒæªå‡ºæ¥ï¼Œäº¤åˆ°è½¯ä¸­æ–­æœºåˆ¶é‡Œã€‚è¿™æ ·ä¹‹åçš„å®é™…ç»“æœæ˜¯ç¡¬ä»¶çš„ä¸­æ–­å¤„ç†åšçš„äº‹æƒ…å°±å¾ˆå°‘äº†ï¼Œå°†æ¥æ”¶æ•°æ®ç­‰ä¸€äº›å¿…é¡»çš„äº‹æƒ…äº¤åˆ°è½¯ä¸­æ–­å»å®Œæˆï¼Œè¿™ä¹Ÿæ˜¯è½¯ä¸­æ–­å­˜åœ¨çš„æ„ä¹‰ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("static struct smp_hotplug_thread softirq_threads = {  .store              = &ksoftirqd,  .thread_should_run  = ksoftirqd_should_run,  .thread_fn          = run_ksoftirqd,  .thread-comm        = â€œksoftirqd/%uâ€,};\nstatic _init int spawn_ksoftirqd(void){  regiter_cpu_notifier(&cpu_nfb);    BUG_ON(smpboot_register_percpu_thread(&softirq_threads));\n  return 0;}early_initcall(spawn_ksoftirqd);\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br"),i("span",{staticClass:"line-number"},[_._v("2")]),i("br"),i("span",{staticClass:"line-number"},[_._v("3")]),i("br")])]),i("p",[_._v("è½¯ä¸­æ–­æœºåˆ¶æ˜¯é€šè¿‡å†…æ ¸çš„çº¿ç¨‹æ¥å®ç°çš„ã€‚å›¾ä¸­æ˜¯å¯¹åº”çš„ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚æœåŠ¡å™¨ CPU éƒ½ä¼šæœ‰ä¸€ä¸ª ksoftirqd è¿™æ ·çš„å†…æ ¸çº¿ç¨‹ï¼Œå¤š CPU çš„æœºå™¨ä¼šç›¸å¯¹åº”çš„æœ‰å¤šä¸ªçº¿ç¨‹ã€‚å›¾ä¸­ç»“æ„ä½“æœ€åä¸€ä¸ªæˆå‘˜ ksoftirqd/ï¼Œå¦‚æœæœ‰ä¸‰ä¸ª CPU å¯¹åº”å°±ä¼šæœ‰ /0/1/2 ä¸‰ä¸ªå†…æ ¸çº¿ç¨‹ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6GnpS7VyxdbJJqeSYbnT625efpRlibdcicVfDCNqM64vGJFpkT3VLVugw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("è½¯ä¸­æ–­æœºåˆ¶çš„ä¿¡æ¯åœ¨ softirqs ä¸‹é¢å¯ä»¥çœ‹åˆ°ã€‚è½¯ä¸­æ–­å¹¶ä¸å¤šåªæœ‰å‡ ç§ï¼Œå…¶ä¸­éœ€è¦å…³æ³¨çš„ï¼Œè·Ÿç½‘ç»œç›¸å…³çš„å°±æ˜¯ NET-TX å’Œ NET-RXï¼Œç½‘ç»œæ•°æ®æ”¶å‘çš„ä¸¤ç§åœºæ™¯ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("å†…æ ¸åˆå§‹åŒ–")])]),_._v(" "),i("p",[_._v("é“ºå«å®Œè½¯ä¸­æ–­ä¹‹åï¼Œä¸‹é¢æ¥çœ‹å†…æ ¸åˆå§‹åŒ–çš„æµç¨‹ã€‚ä¸»è¦ä¸ºä¸¤æ­¥ï¼š")]),_._v(" "),i("ul",[i("li",[_._v("é’ˆå¯¹æ¯ä¸ª CPUï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¿™ä¸Šé¢æŒ‚äº†éå¸¸å¤šçš„æˆå‘˜ï¼Œä¸åé¢çš„å¤„ç†å¯†åˆ‡ç›¸å…³ï¼›")]),_._v(" "),i("li",[_._v("æ³¨å†Œä¸€ä¸ªè½¯ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œå¯¹åº”ä¸Šé¢çœ‹åˆ°çš„ NET-TX å’Œ NET-RX è¿™ä¸¤ä¸ªè½¯ä¸­æ–­çš„å¤„ç†å‡½æ•°ã€‚")])]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6uxvJibBrMdU0oBY86Rz0Zhzw3VfLcpILemGYLcDpqoCKRWmeFRJkiaow/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸Šå›¾æ˜¯æ‰‹ç»˜çš„ä¸€ä¸ªæ•°æ®åŒ…çš„å¤„ç†æµç¨‹ï¼š")]),_._v(" "),i("ul",[i("li",[i("p",[_._v("ç¬¬ä¸€æ­¥ç½‘å¡æ”¶åˆ°äº†æ•°æ®åŒ…ï¼›")])]),_._v(" "),i("li",[i("p",[_._v("ç¬¬äºŒæ­¥æŠŠæ•°æ®åŒ…é€šè¿‡ DMA æ‹·åˆ°äº†å†…å­˜é‡Œé¢ï¼›")])]),_._v(" "),i("li",[i("p",[_._v("ç¬¬ä¸‰æ­¥äº§ç”Ÿäº†ä¸€ä¸ªä¸­æ–­å‘Šè¯‰ CPU å¹¶å¼€å§‹å¤„ç†ä¸­æ–­ã€‚é‡ç‚¹çš„ä¸­æ–­å¤„ç†å¯åˆ†ä¸ºä¸¤æ­¥ï¼šä¸€æ˜¯å°†ä¸­æ–­ä¿¡å·å±è”½äº†ï¼ŒäºŒæ˜¯å”¤é†’ NAPI æœºåˆ¶ã€‚")])]),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("static irqreturn_t igb_msix_ring(int irq, void *data){  struct igb_q_vector *q_vector = data;    /* Write the ITR value calculated from the previous interrupt. */  igb_write_itr(q_vector);    napi_schedule(&q_vector->napi);    return IRO_HANDLED;}\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("ä¸Šé¢çš„ä»£ç æ˜¯ igb ç½‘å¡é©±åŠ¨ä¸­æ–­å¤„ç†å‡½æ•°åšçš„äº‹æƒ…ã€‚å¦‚æœçœç•¥æ‰å¼€å§‹çš„å˜é‡å£°æ˜å’Œåé¢çš„è¿”å›ï¼Œè¿™ä¸ªä¸­æ–­å¤„ç†å‡½æ•°åªæœ‰ä¸¤è¡Œä»£ç ï¼Œéå¸¸çŸ­ã€‚éœ€è¦å…³æ³¨çš„æ˜¯ç¬¬äºŒä¸ªï¼Œåœ¨ç¡¬ä»¶ä¸­æ–­å¤„ç†å‡½æ•°ä¸­ï¼Œåªç”¨æ¿€æ´»å¤–éƒ¨ NIPA è½¯ä¸­æ–­å¤„ç†æœºåˆ¶ï¼Œæ— éœ€åšå…¶ä»–ä»»ä½•äº‹æƒ…ã€‚å› æ­¤è¿™ä¸ªä¸­æ–­å¤„ç†å‡½æ•°ä¼šè¿”å›çš„éå¸¸å¿«ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("NIPI æ¿€æ´»")])]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("/* Called with irq disabled */static inline void ____napi_schedule(struct softnet_data *sd, struct napi_struct *napi){  list_add_tail(&napi->poll_list, &sd->poll_list);  _raise_softirq_irqoff(NET_RX_SOFTIRQ);}\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("NIPI çš„æ¿€æ´»ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦ä¸ºä¸¤æ­¥ã€‚å†…æ ¸ç½‘ç»œç³»ç»Ÿåœ¨åˆå§‹åŒ–çš„æ—¶æ¯ä¸ª CPU éƒ½ä¼šæœ‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒä¼šæŠŠé˜Ÿåˆ—å¯¹åº”çš„ä¿¡æ¯æ’å…¥åˆ°ç»“æ„ä½“çš„é“¾è¡¨é‡Œã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªç½‘å¡é˜Ÿåˆ—åœ¨æ”¶åˆ°æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè‡ªå·±çš„é˜Ÿåˆ—ä¿¡æ¯å‘Šè¯‰å¯¹åº”çš„ CPUï¼Œå°†è¿™ä¸¤ä¸ªä¿¡æ¯ç»‘å®šèµ·æ¥ï¼Œä¿è¯æŸä¸ª CPU å¤„ç†æŸä¸ªé˜Ÿåˆ—ã€‚")]),_._v(" "),i("p",[_._v("é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦ä¸è§¦å‘ç¡¬ä¸­æ–­ä¸€æ ·ï¼Œéœ€è¦è§¦å‘è½¯ä¸­æ–­ã€‚ä¸‹å›¾å°†å¾ˆå¤šæ­¥éª¤æ”¾åˆ°äº†ä¸€å—ï¼Œå‰é¢è®²è¿‡çš„å°±ä¸å†èµ˜è¿°äº†ã€‚å›¾ä¸­è¦å…³æ³¨çš„æ˜¯è½¯ä¸­æ–­æ˜¯æ€ä¹ˆè§¦å‘çš„ã€‚ä¸ç¡¬ä¸­æ–­å·®ä¸å¤šï¼Œè½¯ä¸­æ–­ä¹Ÿæœ‰ä¸­æ–­çš„å‘é‡è¡¨ã€‚æ¯ä¸ªä¸­æ–­å·ï¼Œéƒ½ä¼šå¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå½“éœ€è¦å¤„ç†æŸä¸ªä¸­æ–­ï¼Œåªéœ€è¦åœ¨å¯¹åº”çš„ä¸­æ–­å‘é‡è¡¨é‡Œæ‰¾å°±å¥½äº†ï¼Œè·Ÿç¡¬ä¸­æ–­çš„å¤„ç†æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6KpoG50JeNEVFjOLgQLFeibEOBDYR5UHLj7RmNibmdUicSmZPVUNWqZVQw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[i("strong",[_._v("æ•°æ®æ¥æ”¶-ç›‘æ§")])]),_._v(" "),i("p",[_._v("è¯´å®Œäº†è¿ä½œæœºåˆ¶ï¼Œå†æ¥çœ‹çœ‹æœ‰å“ªäº›åœ°æ–¹å¯ä»¥åšç›‘æ§ã€‚åœ¨ proc ä¸‹é¢æœ‰å¾ˆå¤šä¸œè¥¿ï¼Œå¯ä»¥çœ‹åˆ°ä¸­æ–­çš„å¤„ç†æƒ…å†µã€‚ç¬¬ä¸€åˆ—å°±æ˜¯ä¸­æ–­å·ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½æœ‰ç‹¬ç«‹çš„ä¸­æ–­å·ï¼Œè¿™æ˜¯å†™æ­»çš„ã€‚å¯¹ç½‘ç»œæ¥è¯´åªéœ€è¦å…³æ³¨ç½‘å¡å¯¹åº”çš„ä¸­æ–­å·ï¼Œå›¾ä¸­æ˜¯ 65ã€66ã€67ã€68 ç­‰ã€‚å½“ç„¶çœ‹å®é™…çš„æ•°å­—å¹¶æ²¡æœ‰æ„ä¹‰ï¼Œè€Œæ˜¯éœ€è¦çœ‹å®ƒçš„åˆ†å¸ƒæƒ…å†µï¼Œä¸­æ–­æ˜¯ä¸æ˜¯è¢«ä¸åŒ CPU åœ¨å¤„ç†ï¼Œå¦‚æœæ‰€æœ‰çš„ä¸­æ–­éƒ½æ˜¯è¢«ä¸€ä¸ª CPU å¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦åšäº›è°ƒæ•´ï¼ŒæŠŠå®ƒåˆ†æ•£å¼€ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6hAtkiaWv5o6CgszfjEC8xCyYm7VtiakzgV824Rhj6PeQmoQXkibWRt2icA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[i("strong",[_._v("æ•°æ®æ¥æ”¶-è°ƒä¼˜")])]),_._v(" "),i("p",[_._v("ä¸­æ–­å¯ä»¥åšçš„è°ƒæ•´æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯ä¸­æ–­åˆå¹¶ï¼ŒäºŒæ˜¯ä¸­æ–­äº²å’Œæ€§ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("è‡ªé€‚åº”ä¸­æ–­åˆå¹¶")])]),_._v(" "),i("ul",[i("li",[_._v("**rx-usecsï¼š**æ•°æ®å¸§åˆ°è¾¾åï¼Œå»¶è¿Ÿå¤šé•¿æ—¶é—´äº§ç”Ÿä¸­æ–­ä¿¡å·ï¼Œå•ä½å¾®ç§’")]),_._v(" "),i("li",[_._v("**rx-framesï¼š**è§¦å‘ä¸­æ–­å‰ç§¯ç´¯æ•°æ®å¸§çš„æœ€å¤§ä¸ªæ•°")]),_._v(" "),i("li",[_._v("**rx-usecs-irqï¼š**å¦‚æœæœ‰ä¸­æ–­å¤„ç†æ­£åœ¨æ‰§è¡Œï¼Œå½“å‰ä¸­æ–­å»¶è¿Ÿå¤šä¹…é€è¾¾ "),i("strong",[_._v("CPU")])]),_._v(" "),i("li",[_._v("**rx-frames-irqï¼š**å¦‚æœæœ‰ä¸­æ–­å¤„ç†æ­£åœ¨æ‰§è¡Œï¼Œæœ€å¤šç§¯ç´¯å¤šå°‘ä¸ªæ•°æ®å¸§")])]),_._v(" "),i("p",[_._v("ä¸Šé¢åˆ—çš„éƒ½æ˜¯ç¡¬ä»¶ç½‘å¡æ”¯æŒçš„åŠŸèƒ½ã€‚NAPI æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸­æ–­åˆå¹¶çš„æœºåˆ¶ï¼Œå‡å¦‚æœ‰å¾ˆå¤šåŒ…çš„åˆ°æ¥ï¼ŒNAPI å°±å¯ä»¥åšåˆ°åªäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œå› æ­¤ä¸éœ€è¦ç¡¬ä»¶æ¥å¸®åŠ©åšä¸­æ–­åˆå¹¶ï¼Œå®é™…æ•ˆæœæ˜¯è·Ÿ NAPI æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯å‡å°‘äº†æ€»çš„ä¸­æ–­æ•°é‡ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("ä¸­æ–­äº²å’Œæ€§")])]),_._v(" "),i("ul",[i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("$ sudo bash -c â€˜echo 1 > /proc/irq/8/smp_affinityâ€™\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("è¿™ä¸ªä¸ç½‘å¡å¤šé˜Ÿåˆ—æ˜¯å¯†åˆ‡ç›¸å…³çš„ã€‚å¦‚æœç½‘å¡æœ‰å¤šä¸ªé˜Ÿåˆ—ï¼Œå°±èƒ½æ‰‹åŠ¨æ¥æ˜ç¡®æŒ‡å®šç”±å“ªä¸ª CPU æ¥å¤„ç†ï¼Œå‡è¡¡çš„æŠŠæ•°æ®å¤„ç†çš„è´Ÿè½½åˆ†æ•£åˆ°æœºå™¨çš„å¯ç”¨ CPU ä¸Šã€‚é…ç½®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåªéœ€æŠŠæ•°å­—å†™å…¥åˆ° /proc å¯¹åº”çš„è¿™ä¸ªæ–‡ä»¶ä¸­å°±å¯ä»¥äº†ã€‚è¿™æ˜¯ä¸ªä½æ•°ç»„ï¼Œè½¬æˆäºŒè¿›åˆ¶åå°±ä¼šæœ‰å¯¹åº”çš„ CPU å»å¤„ç†ã€‚å¦‚æœå†™ä¸ª 1ï¼Œå¯èƒ½å°±æ˜¯ CPU0 æ¥å¤„ç†ï¼›å¦‚æœå†™ä¸ª 4ï¼Œè½¬åŒ–æˆäºŒè¿›åˆ¶æ˜¯ 100ï¼Œé‚£ä¹ˆå°±ä¼šäº¤ç»™ CPU2 å»å¤„ç†ã€‚")]),_._v(" "),i("p",[_._v("å¦å¤–æœ‰ä¸ªå°é—®é¢˜éœ€è¦æ³¨æ„ï¼Œå¾ˆå¤šå‘è¡Œç‰ˆå¯èƒ½ä¼šè‡ªå¸¦ä¸€ä¸ª irqbalance çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆhttp://irqbalance.github.io/irqbalanceï¼‰ï¼Œä¼šå°†æ‰‹åŠ¨ä¸­æ–­å‡è¡¡çš„è®¾ç½®ç»™è¦†ç›–æ‰ã€‚è¿™ä¸ªç¨‹åºåšçš„æ ¸å¿ƒäº‹æƒ…å°±æ˜¯æŠŠä¸Šé¢æ‰‹åŠ¨è®¾ç½®æ–‡ä»¶çš„æ“ä½œæ”¾åˆ°ç¨‹åºé‡Œï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹ä¸‹å®ƒçš„ä»£ç ï¼ˆhttps://github.com/Irqbalance/irqbalance/blob/master/activate.cï¼‰ï¼Œä¹Ÿæ˜¯æŠŠè¿™ä¸ªæ–‡ä»¶æ‰“å¼€ï¼Œå†™å¯¹åº”çš„æ•°å­—è¿›å»å°±å¯ä»¥äº†ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("å†…æ ¸-æ•°æ®å¤„ç†")])]),_._v(" "),i("p",[_._v("æœ€åæ˜¯æ•°æ®å¤„ç†éƒ¨åˆ†äº†ã€‚å½“æ•°æ®åˆ°è¾¾ç½‘å¡ï¼Œè¿›å…¥é˜Ÿåˆ—å†…å­˜åï¼Œå°±éœ€è¦å†…æ ¸ä»é˜Ÿåˆ—å†…å­˜ä¸­å°†æ•°æ®æ‹‰å‡ºæ¥ã€‚å¦‚æœæœºå™¨çš„ PPS è¾¾åˆ°äº†åä¸‡ç”šè‡³ç™¾ä¸‡ï¼Œè€Œ CPU åªå¤„ç†ç½‘ç»œæ•°æ®çš„è¯ï¼Œé‚£å…¶ä»–åŸºæœ¬çš„ä¸šåŠ¡é€»è¾‘ä¹Ÿå°±ä¸ç”¨å¹²äº†ï¼Œå› æ­¤ä¸èƒ½è®©æ•°æ®åŒ…çš„å¤„ç†ç‹¬å æ•´ä¸ª CPUï¼Œè€Œæ ¸å¿ƒç‚¹æ˜¯æ€ä¹ˆå»åšé™åˆ¶ã€‚")]),_._v(" "),i("p",[_._v("é’ˆå¯¹ä¸Šè¿°é—®é¢˜ä¸»è¦æœ‰ä¸¤æ–¹é¢çš„é™åˆ¶ï¼šæ•´ä½“çš„é™åˆ¶å’Œå•æ¬¡çš„é™åˆ¶")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("while (!list_empty(&sd->poll_list)){  struct napi_struct *n;  int work,weight;    /* If softirq window is exhausted then punt.   * Allow this to run for 2 jiffies since which will allow   * an average latency of 1.5/HZ.   */   if (unlikely(budget <= 0 || time_after_eq(jiffies, time_limit)))   goto softnet_break;\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("æ•´ä½“é™åˆ¶å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ª CPU å¯¹åº”ä¸€ä¸ªé˜Ÿåˆ—ã€‚å¦‚æœ CPU çš„æ•°é‡æ¯”é˜Ÿåˆ—æ•°é‡å°‘ï¼Œé‚£ä¹ˆä¸€ä¸ª CPU å¯èƒ½éœ€è¦å¤„ç†å¤šä¸ªé˜Ÿåˆ—ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("weight = n->weight;\nwork = 0;if (test_bit(NAPI_STATE_SCHED, &n->state)) {        work = n->poll(n,weight);        trace_napi_poll(n);}\nWARN_ON_ONCE(work > weight);\nbudget -= work;\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br"),i("span",{staticClass:"line-number"},[_._v("2")]),i("br"),i("span",{staticClass:"line-number"},[_._v("3")]),i("br"),i("span",{staticClass:"line-number"},[_._v("4")]),i("br")])]),i("p",[_._v("å•æ¬¡é™åˆ¶åˆ™æ˜¯é™åˆ¶ä¸€ä¸ªé˜Ÿåˆ—åœ¨ä¸€è½®é‡Œå¤„ç†åŒ…çš„æ•°é‡ã€‚è¾¾åˆ°é™åˆ¶ä¹‹åå°±åœä¸‹æ¥ï¼Œç­‰å¾…ä¸‹ä¸€è½®çš„å¤„ç†ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v("softnet_break:  sd->time_squeeze++;  _raise_softirq_irqoff(NET_RX_SOFTIRQ);  goto out;\n")])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("è€Œåœä¸‹æ¥å°±æ˜¯å¾ˆå…³é”®çš„èŠ‚ç‚¹ï¼Œå¹¸è¿çš„æ˜¯æœ‰å¯¹åº”çš„æŒ‡æ ‡è®°å½•ï¼Œæœ‰ time-squeeze è¿™æ ·ä¸­æ–­çš„è®¡æ•°ï¼Œæ‹¿åˆ°è¿™ä¸ªä¿¡æ¯å°±å¯ä»¥åˆ¤æ–­å‡ºæœºå™¨çš„ç½‘ç»œå¤„ç†æ˜¯å¦æœ‰ç“¶é¢ˆï¼Œè¢«è¿«ä¸­æ–­çš„é¢‘ç‡é«˜ä½ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6wz7Awj86YEibEDKzp2rOKDbfewgkuCGWjJkjRU3LADzt6hcj5zib907Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("ä¸Šå›¾æ˜¯ç›‘æ§ CPU æŒ‡æ ‡çš„æ•°æ®ï¼Œæ ¼å¼å¾ˆç®€å•ï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ª CPUï¼Œæ•°å€¼ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å‰²ï¼Œè¾“å‡ºæ ¼å¼ä¸º 16 è¿›åˆ¶ã€‚é‚£ä¹ˆæ¯ä¸€åˆ—æ•°å€¼åˆä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿå¾ˆä¸å¹¸ï¼Œè¿™ä¸ªæ²¡æœ‰æ–‡æ¡£ï¼Œåªèƒ½é€šè¿‡æ£€æŸ¥ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬ï¼Œç„¶åå»çœ‹å¯¹åº”çš„ä»£ç ã€‚")]),_._v(" "),i("ul",[i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li"),_._v(" "),i("li")]),_._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[_._v('seq_printfï¼ˆseq,     "%08x %08x %08x %08x %08x %08x %08x %08x %08x %08x %08x\\n",     sd->processed, sd->dropped, sd->time_squeeze, 0,     0, 0, 0, 0, /* was fastroute */     sd->cpu_collision, sd->received_rps, flow_limit_countï¼‰;\n')])]),_._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[_._v("1")]),i("br")])]),i("p",[_._v("ä¸‹é¢è¯´æ˜äº†æ–‡ä»¶ä¸­æ¯ä¸ªå­—æ®µéƒ½æ˜¯æ€ä¹ˆæ¥çš„ï¼Œå®é™…æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œå› ä¸ºéšç€å†…æ ¸ç‰ˆæœ¬çš„è¿­ä»£ï¼Œå­—æ®µçš„æ•°é‡ä»¥åŠå­—æ®µçš„é¡ºåºéƒ½æœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä¸­ä¸ç½‘ç»œæ•°æ®å¤„ç†è¢«ä¸­æ–­æ¬¡æ•°ç›¸å…³çš„å°±æ˜¯ squeeze å­—æ®µï¼š")]),_._v(" "),i("ul",[i("li",[_._v("* sd->processed      å¤„ç†çš„åŒ…æ•°é‡ï¼ˆå¤šç½‘å¡ bond æ¨¡å¼å¯èƒ½å¤šäºå®é™…çš„æ”¶åŒ…æ•°é‡ï¼‰")]),_._v(" "),i("li",[_._v("* sd->dropped       ä¸¢åŒ…æ•°é‡ï¼Œå› ä¸ºé˜Ÿåˆ—æ»¡äº†")]),_._v(" "),i("li",[_._v("* sd->time_spueeze    è½¯ä¸­æ–­å¤„ç† net_rx_action è¢«è¿«æ‰“æ–­çš„æ¬¡æ•°")]),_._v(" "),i("li",[_._v("* sd->cpu_collision    å‘é€æ•°æ®æ—¶è·å–è®¾å¤‡é”å†²çªï¼Œæ¯”å¦‚å¤šä¸ª CPU åŒæ—¶å‘é€æ•°æ®")]),_._v(" "),i("li",[_._v("* sd->received_rps    å½“å‰ CPU è¢«å”¤é†’çš„æ¬¡æ•°ï¼ˆé€šè¿‡å¤„ç†å™¨é—´ä¸­æ–­ï¼‰")]),_._v(" "),i("li",[_._v("* sd->flow_limit_count   è§¦å‘ flow limit çš„æ¬¡æ•°")])]),_._v(" "),i("p",[_._v("ä¸‹å›¾æ˜¯ä¸šåŠ¡ä¸­é‡åˆ°ç›¸å…³é—®é¢˜çš„æ¡ˆä¾‹ï¼Œæœ€åæ’æŸ¥åˆ° CPU å±‚é¢ã€‚å›¾ä¸€æ˜¯ TOP å‘½ä»¤çš„è¾“å‡ºï¼Œæ˜¾ç¤ºäº†æ¯ä¸ª CPU çš„ä½¿ç”¨é‡ï¼Œå…¶ä¸­çº¢æ¡†æ ‡å‡ºçš„ CPU4 çš„ä½¿ç”¨ç‡å­˜åœ¨ç€å¼‚å¸¸ï¼Œå°¤å…¶æ˜¯å€’æ•°ç¬¬äºŒåˆ—çš„ SI å ç”¨è¾¾åˆ°äº† 89%ã€‚SI æ˜¯ softirq çš„ç¼©å†™ï¼Œè¡¨ç¤º CPU èŠ±åœ¨è½¯ä¸­æ–­å¤„ç†ä¸Šçš„æ—¶é—´å æ¯”ï¼Œè€Œå›¾ä¸­ CPU4 åœ¨æ—¶é—´å æ¯”ä¸Šæ˜æ˜¾è¿‡é«˜ã€‚å›¾äºŒåˆ™æ˜¯å¯¹åº”å›¾ä¸€çš„è¾“å‡ºç»“æœï¼ŒCPU4 å¯¹åº”çš„æ˜¯ç¬¬äº”è¡Œï¼Œå…¶ä¸­ç¬¬ä¸‰åˆ—æ•°å€¼æ˜æ˜¾é«˜äºå…¶ä»– CPUï¼Œè¡¨æ˜å®ƒåœ¨å¤„ç†ç½‘ç»œæ•°æ®çš„æ—¶è¢«é¢‘ç¹çš„æ‰“æ–­ã€‚")]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d6PwK8Uy7CwoQyUnFVBCAdGFOJV14BGib8CLHfgbTWYbF1jic0lcKfqQMA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUF8ECg0JIbujSHGiaYKhs9d68sJ3mQYnfImC4exGl5kIEwN3Dj0FeJ5oZajuJkib3Yd9fnvF7trU36Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),_._v(" "),i("p",[_._v("é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜æ¨æ–­ CPU4 å­˜åœ¨ä¸€å®šçš„æ€§èƒ½è¡°é€€ï¼Œä¹Ÿè®¸æ˜¯è´¨é‡ä¸è¿‡å…³æˆ–å…¶ä»–çš„åŸå› ã€‚ä¸ºäº†éªŒè¯æ˜¯å¦æ˜¯æ€§èƒ½è¡°é€€ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„ python è„šæœ¬ï¼Œä¸€ä¸ªä¸€ç›´å»ç´¯åŠ çš„æ­»å¾ªç¯ã€‚æ¯æ¬¡è¿è¡Œæ—¶ï¼ŒæŠŠè¿™æ®µè„šæœ¬ç»‘å®šåˆ°æŸä¸ª CPU ä¸Šï¼Œç„¶åè§‚å¯Ÿä¸åŒ CPU è€—æ—¶çš„å¯¹æ¯”ã€‚æœ€åå¯¹æ¯”ç»“æœä¹Ÿæ˜¾ç¤º CPU4 çš„è€—æ—¶æ¯”å…¶ä»–çš„ CPU é«˜äº†å‡ å€ï¼Œä¹ŸéªŒè¯äº†ä¹‹å‰çš„æ¨æ–­ã€‚ä¹‹ååè°ƒè¿ç»´æ›´æ¢äº† CPUï¼Œæ„å‘æŒ‡æ ‡ä¹Ÿå°±æ¢å¤æ­£å¸¸äº†ã€‚")]),_._v(" "),i("p",[i("strong",[_._v("æ€»ç»“")])]),_._v(" "),i("p",[_._v("ä»¥ä¸Šæ‰€æœ‰æ“ä½œéƒ½åªæ˜¯åœ¨æ•°æ®åŒ…ä»ç½‘å¡åˆ°äº†å†…æ ¸å±‚ï¼Œè¿˜æ²¡åˆ°å¸¸è§çš„åè®®ï¼Œåªæ˜¯å®Œæˆäº†ä¸‡é‡Œé•¿å¾ç¬¬ä¸€æ­¥ï¼Œåé¢è¿˜æœ‰ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œä¾‹å¦‚æ•°æ®åŒ…çš„å‹ç¼©ï¼ˆGROï¼‰ã€ç½‘å¡å¤šé˜Ÿåˆ—è½¯ä»¶ï¼ˆRPSï¼‰è¿˜æœ‰ RFS åœ¨è´Ÿè½½å‡è¡¡çš„åŸºç¡€ä¸Šè€ƒè™‘æµçš„ç‰¹å¾ï¼Œå°±æ˜¯ IP ç«¯å£å››å…ƒç»„çš„ç‰¹å¾ï¼Œæœ€åæ‰æ˜¯æŠŠæ•°æ®é€’äº¤åˆ° IP å±‚ï¼Œä»¥åŠåˆ°ç†Ÿæ‚‰çš„ TCP å±‚ã€‚")]),_._v(" "),i("p",[_._v("æ€»çš„æ¥è¯´ï¼Œä»Šå¤©çš„åˆ†äº«éƒ½æ˜¯å›´ç»•é©±åŠ¨æ¥åšçš„ï¼Œæˆ‘æƒ³å¼ºè°ƒçš„æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç‚¹åœ¨äºæŒ‡æ ‡ï¼Œä¸èƒ½æµ‹é‡ä¹Ÿå°±å¾ˆéš¾å»æ”¹å–„ï¼Œè¦æœ‰æŒ‡æ ‡çš„å­˜åœ¨ï¼Œè¿™æ ·ä¸€åˆ‡çš„ä¼˜åŒ–æ‰æœ‰æ„ä¹‰ã€‚")]),_._v(" "),i("p",[_._v("ç°åœºè§†é¢‘ã€PPT ä»¥åŠæ›´å¤š Open Talk æŠ€æœ¯å¹²è´§ï¼Œè¯·ç‚¹å‡»"),i("strong",[_._v("â†“â†“é˜…è¯»åŸæ–‡â†“â†“")]),_._v("æŸ¥çœ‹")]),_._v(" "),i("h2",{attrs:{id:""}},[i("a",{staticClass:"header-anchor",attrs:{href:"#"}},[_._v("#")])]),_._v(" "),i("h2",{attrs:{id:"å¿«-æ¥-æ‰¾-åˆ-å°-æ‹"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#å¿«-æ¥-æ‰¾-åˆ-å°-æ‹"}},[_._v("#")]),_._v(" "),i("strong",[_._v("å¿« æ¥")]),_._v(" "),i("strong",[_._v("æ‰¾")]),_._v(" "),i("strong",[_._v("åˆ")]),_._v(" "),i("strong",[_._v("å° æ‹")])]),_._v(" "),i("h2",{attrs:{id:"-2"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[_._v("#")])]),_._v(" "),i("h2",{attrs:{id:"æ¨-è-é˜…-è¯»è®¾ä¸ºæ˜Ÿæ ‡æ›´æ–°ä¸é”™è¿‡"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#æ¨-è-é˜…-è¯»è®¾ä¸ºæ˜Ÿæ ‡æ›´æ–°ä¸é”™è¿‡"}},[_._v("#")]),_._v(" "),i("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/OdIoEOgFgUFAQemPjhnJTKkl7TwPLibto5mn4m21ZrshVQSeibqIYTw6XqhicImzlLxeW0v3BE4ycJbHd84ic5Oiayg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}}),_._v(" "),i("strong",[_._v("æ¨ è é˜… è¯»")]),i("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MjM5ODc5ODgyMw==&mid=2653586009&idx=1&sn=09aad11a1cc56357be8bb0b2502ff566&chksm=bd1b16d18a6c9fc7fd407aa041c890c7701863f5fe64930a9b68791b3c49a9fbbe543dc55a62&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}}),i("OutboundLink")],1),i("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MjM5ODc5ODgyMw==&mid=2653585893&idx=1&sn=a77f524feeabe1d1f203baa5ebc49454&chksm=bd1b156d8a6c9c7bcbe23557e6eb86932dc8a1fddbc20216321148d3719a931456a4348b8370&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}}),i("OutboundLink")],1),i("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MjM5ODc5ODgyMw==&mid=2653585879&idx=1&sn=35cf3079ee61f8326ef624a4c3f99813&chksm=bd1b155f8a6c9c49a48eaac27ea940464e439ffdec153d818bc07d2866c177fad1c57c71a72d&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}}),i("OutboundLink")],1),i("strong",[_._v("è®¾ä¸ºæ˜Ÿæ ‡")]),i("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}}),i("strong",[_._v("æ›´æ–°ä¸é”™è¿‡")])]),_._v(" "),i("p",[i("a",{attrs:{href:"https://mp.weixin.qq.com/s/3q46LzPgzoh-QjLtyf5Z4g##",target:"_blank",rel:"noopener noreferrer"}},[_._v("é˜…è¯»åŸæ–‡"),i("OutboundLink")],1)]),_._v(" "),i("p",[_._v("å–œæ¬¢æ­¤å†…å®¹çš„äººè¿˜å–œæ¬¢")]),_._v(" "),i("p",[_._v("20ä¸ªç›‘æ§linuxæ€§èƒ½çš„å‘½ä»¤è¡Œå·¥å…·")]),_._v(" "),i("p",[_._v("å…¥é—¨å°ç«™")]),_._v(" "),i("p",[_._v("ä¸å–œæ¬¢")]),_._v(" "),i("p",[_._v("ä¸çœ‹çš„åŸå› ")]),_._v(" "),i("p",[_._v("ç¡®å®š")]),_._v(" "),i("ul",[i("li",[i("p",[_._v("å†…å®¹è´¨é‡ä½")])]),_._v(" "),i("li"),_._v(" "),i("li",[i("p",[_._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),_._v(" "),i("p",[_._v("çº¯å¹²è´§ï¼MongoDBå¼€(é¿)å‘(å‘)è§„(æŒ‡)èŒƒ(å—)~")]),_._v(" "),i("p",[_._v("DBAéšç¬”")]),_._v(" "),i("p",[_._v("ä¸å–œæ¬¢")]),_._v(" "),i("p",[_._v("ä¸çœ‹çš„åŸå› ")]),_._v(" "),i("p",[_._v("ç¡®å®š")]),_._v(" "),i("ul",[i("li",[i("p",[_._v("å†…å®¹è´¨é‡ä½")])]),_._v(" "),i("li"),_._v(" "),i("li",[i("p",[_._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),_._v(" "),i("p",[_._v("é’ˆå¯¹PGç­‰å¼€æºä¸å›½äº§æ•°æ®åº“çš„IOä¸æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–è¦ç‚¹")]),_._v(" "),i("p",[_._v("ç™½é³çš„æ´ç©´")]),_._v(" "),i("p",[_._v("ä¸å–œæ¬¢")]),_._v(" "),i("p",[_._v("ä¸çœ‹çš„åŸå› ")]),_._v(" "),i("p",[_._v("ç¡®å®š")]),_._v(" "),i("ul",[i("li",[i("p",[_._v("å†…å®¹è´¨é‡ä½")])]),_._v(" "),i("li"),_._v(" "),i("li",[i("p",[_._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),_._v(" "),i("p",[i("img",{attrs:{src:"https://mp.weixin.qq.com/mp/qrcode?scene=10000004&size=102&__biz=MjM5ODc5ODgyMw==&mid=2653586331&idx=1&sn=053dceecfdd719ee77ead24d30670d88&send_time=",alt:"img"}})]),_._v(" "),i("p",[_._v("å¾®ä¿¡æ‰«ä¸€æ‰«\nå…³æ³¨è¯¥å…¬ä¼—å·")]),_._v(" "),i("p",[_._v("ï¼šï¼Œã€‚è§†é¢‘å°ç¨‹åºèµï¼Œè½»ç‚¹ä¸¤ä¸‹å–æ¶ˆèµåœ¨çœ‹ï¼Œè½»ç‚¹ä¸¤ä¸‹å–æ¶ˆåœ¨çœ‹")])])}),[],!1,null,null,null);t.default=e.exports}}]);