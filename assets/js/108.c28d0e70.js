(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{492:function(e,_,v){"use strict";v.r(_);var i=v(42),l=Object(i.a)({},(function(){var e=this,_=e.$createElement,v=e._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[e._v("ä½ è¸©è¿‡å‡ ç§c++å†…å­˜æ³„éœ²çš„å‘")]),e._v(" "),v("p",[e._v("[Cè¯­è¨€ä¸CPPç¼–ç¨‹](javascript:void(0)ğŸ˜‰ "),v("em",[e._v("1å‘¨å‰")])]),e._v(" "),v("p",[e._v("ä»¥ä¸‹æ–‡ç« æ¥æºäºä¸€ä¸ªç¨‹åºå‘˜çš„ä¿®ç‚¼ä¹‹è·¯ ï¼Œä½œè€…æ²³è¾¹ä¸€ææŸ³")]),e._v(" "),v("p",[v("a",{attrs:{href:"https://mp.weixin.qq.com/s/8h_ek1NLE9mOKdA2WiOoQw#",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM4xHT6icsPDTm4Uia8NQg60tf4niaiaDTTT8tAuxxG8EOMAUg/0",alt:"img"}}),v("strong",[e._v("ä¸€ä¸ªç¨‹åºå‘˜çš„ä¿®ç‚¼ä¹‹è·¯")]),e._v(".ä¸»è¦åˆ†äº«Windowså¼€å‘ä¸è°ƒè¯•, Linux, C/C++, ä»¥åŠåç«¯å¼€å‘æŠ€æœ¯"),v("OutboundLink")],1)]),e._v(" "),v("p",[v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/0m4YX595Fom7dUgDLM0OJCxo425I9OKv3jfAgDFAcZH1cfSbV7rKJYKF8qgPJ7phxn55jLQhyRnicECicm1mOzIQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),e._v(" "),v("p",[e._v("åœ¨"),v("code",[e._v("Modern C++")]),e._v("ä¹‹å‰ï¼ŒC++æ— ç–‘æ˜¯ä¸ªæ›´å®¹æ˜“å†™å‡ºå‘çš„è¯­è¨€ï¼Œæ— è®ºä»å¼€å‘æ•ˆç‡ï¼Œå’Œæ˜“å‘æ€§ï¼Œè®©å¾ˆå¤šæ–°æ‰‹æœ›è€Œå´æ­¥ã€‚æ¯”å¦‚å†…å­˜æ³„éœ²é—®é¢˜ï¼Œå°±æ˜¯ç»å¸¸ä¼šè¢«å†™å‡ºæ¥çš„å‘ï¼Œæœ¬æ–‡å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼Œè¿™äº›è®©ç°åœ¨æˆ–è€…æ›¾ç»çš„"),v("code",[e._v("C++")]),e._v("ç¨‹åºå‘˜æ³ªæµæ»¡é¢çš„"),v("code",[e._v("å†…å­˜æ³„éœ²")]),e._v("åœºæ™¯å§ã€‚ä½ æ˜¯å¦æœ‰è¸©è¿‡ï¼Ÿ")]),e._v(" "),v("h1",{attrs:{id:"_1-å‡½æ•°å†…æˆ–è€…ç±»æˆå‘˜å†…å­˜æœªé‡Šæ”¾"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‡½æ•°å†…æˆ–è€…ç±»æˆå‘˜å†…å­˜æœªé‡Šæ”¾"}},[e._v("#")]),e._v(" 1. å‡½æ•°å†…æˆ–è€…ç±»æˆå‘˜å†…å­˜æœªé‡Šæ”¾")]),e._v(" "),v("p",[e._v("è¿™ç±»é—®é¢˜å¯ä»¥ç§°ä¹‹ä¸º"),v("code",[e._v("out of scope")]),e._v("çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰é‡Šæ”¾ç›¸åº”å¯¹è±¡çš„å †ä¸Šå†…å­˜ã€‚æœ‰æ—¶å€™æœ€ç®€å•çš„åœºæ™¯ï¼Œåè€Œæ˜¯æœ€å®¹æ˜“çŠ¯é”™çš„ã€‚è¿™ä¸ªæˆ‘æƒ³ä¸»è¦æ˜¯å› ä¸ºç»å¸¸å†™ï¼Œå“ªæœ‰ä¸å‡ºé”™ã€‚")]),e._v(" "),v("p",[e._v("ä¸‹é¢åœºæ™¯ä¸€çœ‹å°±çŸ¥é“äº†ï¼Œå½“ä½ åœ¨å†™"),v("code",[e._v("XXX_Class * pObj = new XXX_Class();")]),e._v("è¿™ä¸€è¡Œçš„æ—¶å€™ï¼Œè„‘å­é‡Œé¢è¿˜åœ¨é»˜å¿µ"),v("code",[e._v("è®°å¾—è¦é‡Šæ”¾pObj ï¼Œè®°å¾—è¦é‡Šæ”¾pObj")]),e._v(", å¯èƒ½å› ä¸ºé‡è¦çš„äº‹æƒ…è¦è¯´ä¸‰éï¼Œè€Œä½ åªå–Šäº†ä¸¤éï¼Œæœ€ç»ˆè¿˜æ˜¯å¿˜è®°äº†å†™"),v("code",[e._v("delete pObj;")]),e._v(" è¿™æ ·å»é‡Šæ”¾å¯¹è±¡ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("void MemoryLeakFunction(){  XXX_Class * pObj = new XXX_Class();  pObj->DoSomething();  return; }\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼Œå°±æ˜¯ææ„å‡½æ•°ä¸­å¹¶æ²¡æœ‰é‡Šæ”¾æˆå‘˜æ‰€æŒ‡å‘çš„å†…å­˜ã€‚è¿™ä¸ªæˆ‘ä»¬å°±è¦æ³¨æ„äº†ï¼Œä¸€èˆ¬"),v("strong",[e._v("å½“ä½ æ„å»ºä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå†™ææ„å‡½æ•°ä¸€å®šè¦åˆ‡è®°é‡Šæ”¾ç±»æˆå‘˜å…³è”çš„èµ„æº")]),e._v("ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("class MemoryLeakClass{public:  MemoryLeakClass()   {     m_pObj = new XXX_ResourceClass;  }  void DoSomething()  {    m_pObj->DoSomething();  }  ~MemoryLeakClass()  {    ;  }private:  XXX_ResourceClass* m_pObj;};\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("ä¸Šè¿°è¿™ä¸¤ç§ä»£ç ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯è®©ä¸€ä¸ª"),v("code",[e._v("C++")]),e._v("å·¥ç¨‹å¸ˆå¦‚å±¥è–„å†°ï¼Œå®Œå…¨çœ‹è‡ªå·±çš„å¤§è„‘åœ¨ä¸åœ¨çŠ¶æ€ã€‚")]),e._v(" "),v("p",[e._v("åœ¨"),v("code",[e._v("boost")]),e._v("æˆ–è€…"),v("code",[e._v("C++ 11")]),e._v("åï¼Œé€šè¿‡æ™ºèƒ½æŒ‡é’ˆå»è¿›è¡ŒåŒ…è£¹è¿™ä¸ªåŸå§‹æŒ‡é’ˆï¼Œè¿™æ˜¯ä¸€ç§"),v("code",[e._v("RAII")]),e._v("çš„æ€æƒ³(å¯ä»¥å‚é˜…æœ¬æ–‡æœ«å°¾çš„å…³è”é˜…è¯»)ï¼Œ åœ¨"),v("code",[e._v("out of scope")]),e._v("çš„æ—¶å€™ï¼Œé‡Šæ”¾è‡ªå·±æ‰€åŒ…è£¹çš„åŸå§‹æŒ‡é’ˆæŒ‡å‘çš„èµ„æºã€‚å°†ä¸Šè¿°ä¾‹å­ç”¨"),v("code",[e._v("unique_ptr")]),e._v("æ”¹å†™ä¸€ä¸‹ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("void MemoryLeakFunction(){  std::unique_ptr<XXX_Class> pObj = make_unique<XXX_Class>();  pObj->DoSomething();  return; }\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("h1",{attrs:{id:"_2-delete"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-delete"}},[e._v("#")]),e._v(" 2. delete []")]),e._v(" "),v("p",[e._v("å¤§å®¶çŸ¥é“"),v("code",[e._v("C++")]),e._v("ä¸­è¿™æ ·ä¸€ä¸ªè¯­å¥"),v("code",[e._v("XXX_Class * pObj = new XXX_Class();")]),e._v(" ä¸­çš„"),v("code",[e._v("new")]),e._v("æˆ‘ä»¬ä¸€èˆ¬ç§°å…¶ä¸ºC++"),v("code",[e._v("å…³é”®å­—")]),e._v(" ("),v("code",[e._v("keyword")]),e._v("), å°±ä»¥è¿™ä¸ªè¯­å¥ä¸ºä¾‹åšäº†ä¸¤ä¸ªæ“ä½œ:")]),e._v(" "),v("ol",[v("li",[e._v("è°ƒç”¨äº†"),v("code",[e._v("operator new")]),e._v("ä»å †ä¸Šç”³è¯·æ‰€éœ€çš„ç©ºé—´")]),e._v(" "),v("li",[e._v("è°ƒç”¨"),v("code",[e._v("XXX_Class")]),e._v("çš„æ„é€ å‡½æ•°")])]),e._v(" "),v("p",[e._v("é‚£ä¹ˆå½“ä½ è°ƒç”¨"),v("code",[e._v("delete pObj;")]),e._v("çš„æ—¶å€™ï¼Œé“ç†åŒ"),v("code",[e._v("new")]),e._v("ï¼Œåˆšå¥½ç›¸å:")]),e._v(" "),v("ol",[v("li",[e._v("è°ƒç”¨äº†"),v("code",[e._v("XXX_Class")]),e._v("çš„ææ„å‡½æ•°")]),e._v(" "),v("li",[e._v("é€šè¿‡"),v("code",[e._v("operator delete")]),e._v(" é‡Šæ”¾äº†å†…å­˜")])]),e._v(" "),v("p",[e._v("ä¸€åˆ‡ä¼¼ä¹éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç„¶ååˆä¸€ä¸ªå‘æ¥äº†ã€‚ä½†å¦‚æœç”³è¯·çš„æ˜¯ä¸€ä¸ªæ•°ç»„å‘¢ï¼Œå…¥ä¸‹è¿°ä¾‹å­:")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('class MemoryLeakClass{public:  MemoryLeakClass()   {     m_pStr = new char[100];  }  void DoSomething(){    strcpy_s(m_pStr, 100, "Hello Memory Leak!");    std::cout << m_pStr << std::endl;  }  ~MemoryLeakClass()  {    delete m_pStr;  }private:  char *m_pStr;};\nvoid MemoryLeakFunction(){  const int iSize = 5;  MemoryLeakClass* pArrayObjs = new MemoryLeakClass [iSize];  for (int i = 0; i < iSize; i++)  {    (pArrayObjs+i)->DoSomething();  }  delete pArrayObjs;}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("p",[e._v("ä¸Šè¿°ä¾‹å­é€šè¿‡"),v("code",[e._v("MemoryLeakClass* pArrayObjs = new MemoryLeakClass [iSize];")]),e._v("ç”³è¯·äº†ä¸€ä¸ª"),v("code",[e._v("MemoryLeakClassæ•°ç»„")]),e._v("ï¼Œé‚£ä¹ˆè°ƒç”¨"),v("code",[e._v("ä¸åŒ¹é…çš„delete pArrayObjs;")]),e._v(", ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚å…ˆçœ‹çœ‹ä¸‹å›¾, ç„¶åç»“åˆåˆšè®²çš„"),v("code",[e._v("delete")]),e._v("çš„è¡Œä¸ºï¼š\n"),v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/PPrc2J6OJoVtczLogYtUiaeMlDYR6WRDWJXCcmaHt0f63rJlrQZjAcqrIGMew3a5zTmym1vS37zCc2U7fkB70BA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),e._v(" "),v("p",[e._v("é‚£ä¹ˆå…¶å®è°ƒç”¨"),v("code",[e._v("delete pArrayObjs;")]),e._v("çš„æ—¶å€™ï¼Œé‡Šæ”¾äº†æ•´ä¸ª"),v("code",[e._v("pArrayObjs")]),e._v("çš„å†…å­˜ï¼Œä½†æ˜¯åªè°ƒç”¨äº†"),v("code",[e._v("pArrayObjs[0]")]),e._v("ææ„å‡½æ•°å¹¶é‡Šæ”¾ä¸­çš„"),v("code",[e._v("m_pStr")]),e._v("æŒ‡å‘çš„å†…å­˜ã€‚"),v("code",[e._v("pArrayObjs 1~4")]),e._v("å¹¶æ²¡æœ‰è°ƒç”¨ææ„å‡½æ•°ï¼Œä»è€Œå¯¼è‡´å…¶ä¸­çš„"),v("code",[e._v("m_pStr")]),e._v("æŒ‡å‘çš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ã€‚"),v("strong",[e._v("æ‰€ä»¥æˆ‘ä»¬è¦æ³¨æ„"),v("code",[e._v("new")]),e._v("å’Œ"),v("code",[e._v("delete")]),e._v("è¦åŒ¹é…ä½¿ç”¨ï¼Œå½“ä½¿ç”¨çš„"),v("code",[e._v("new []")]),e._v("ç”³è¯·çš„å†…å­˜æœ€å¥½è¦ç”¨"),v("code",[e._v("delete[]")])]),e._v("ã€‚")]),e._v(" "),v("p",[e._v("é‚£ä¹ˆç•™ä¸€ä¸ªé—®é¢˜ç»™è¯»è€…, ä¸Šé¢ä»£ç "),v("code",[e._v("delete m_pStr;")]),e._v("ä¼šå¯¼è‡´åŒæ ·çš„é—®é¢˜å—ï¼Ÿ")]),e._v(" "),v("p",[e._v("å¦‚æœæ€»æ˜¯è¦è®©æˆ‘ä»¬è‡ªå·±å»ä¿è¯ï¼Œ"),v("code",[e._v("new")]),e._v("å’Œ"),v("code",[e._v("delete")]),e._v("çš„é…å¯¹ï¼Œæ˜¾ç„¶è¿˜æ˜¯éš¾ä»¥é¿å…é”™è¯¯çš„å‘ç”Ÿçš„ã€‚è¿™ä¸ªæ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨"),v("code",[e._v("unique_ptr")]),e._v(", ä¿®æ”¹å¦‚ä¸‹ï¼š")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("void MemoryLeakFunction(){  const int iSize = 5;  std::unique_ptr<MemoryLeakClass[]> pArrayObjs = std::make_unique<MemoryLeakClass[]>(iSize);  for (int i = 0; i < iSize; i++)  {    (pArrayObjs.get()+i)->DoSomething();  }}\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("h1",{attrs:{id:"_3-delete-void"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-delete-void"}},[e._v("#")]),e._v(" 3. delete (void*)")]),e._v(" "),v("p",[e._v("å¦‚æœä¸Šä¸€ä¸ªç« èŠ‚å·²ç»æœ‰ç†è§£ï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªä¾‹å­ï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½äº†ã€‚æ­£å› ä¸º"),v("code",[e._v("C++")]),e._v("çš„çµæ´»æ€§ï¼Œæœ‰æ—¶å€™ä¼šå°†ä¸€ä¸ªå¯¹è±¡æŒ‡é’ˆè½¬æ¢ä¸º"),v("code",[e._v("void *")]),e._v("ï¼Œéšè—å…¶ç±»å‹ã€‚è¿™ç§æƒ…å†µSDKæ¯”è¾ƒå¸¸ç”¨ï¼Œå®é™…ä¸Šè¿”å›çš„å¹¶ä¸æ˜¯SDKç”¨çš„å®é™…ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªæ²¡æœ‰ç±»å‹çš„åœ°å€ï¼Œå½“ç„¶æœ‰æ—¶å€™æˆ‘ä»¬ä¼šä¸ºå…¶äº²åˆ‡çš„å–ä¸€ä¸ªåå­—ï¼Œæ¯”å¦‚å«åš"),v("code",[e._v("XXX_HANDLE")]),e._v("ã€‚")]),e._v(" "),v("p",[e._v("é‚£ä¹ˆç»§ç»­ç”¨ä¸Šè¿°ä¸ºä¾‹"),v("code",[e._v("MemoryLeakClass")]),e._v("ï¼Œ SDKå‡è®¾æä¾›äº†ä¸‹é¢ä¸‰ä¸ªæ¥å£:")]),e._v(" "),v("ol",[v("li",[v("code",[e._v("InitObj")]),e._v("åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ª"),v("code",[e._v("PROGRAMER_HANDLE")]),e._v("(å³"),v("code",[e._v("void *")]),e._v(")ï¼Œå¯¹åº”ç”¨ç¨‹åºå±è”½å…¶å®é™…ç±»å‹")]),e._v(" "),v("li",[v("code",[e._v("DoSomething")]),e._v(" æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å»åšä¸€äº›äº‹æƒ…ï¼Œè¾“å…¥çš„å‚æ•°ï¼Œå³ä¸ºé€šè¿‡"),v("code",[e._v("InitObj")]),e._v("ç”³è¯·çš„å¯¹è±¡")]),e._v(" "),v("li",[e._v("åº”ç”¨ç¨‹åºä½¿ç”¨å®Œæ¯•åï¼Œä¸€èˆ¬éœ€è¦é‡Šæ”¾SDKç”³è¯·çš„å¯¹è±¡ï¼Œæä¾›äº†"),v("code",[e._v("FreeObj")])])]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("typedef void * PROGRAMER_HANDLE;\nPROGRAMER_HANDLE InitObj(){  MemoryLeakClass* pObj = new MemoryLeakClass();  return (PROGRAMER_HANDLE)pObj;}\nvoid DoSomething(PROGRAMER_HANDLE pHandle){  ((MemoryLeakClass*)pHandle)->DoSomething();}\nvoid FreeObj(void *pObj){  delete pObj;}\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("çœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿè®¸æœ‰è¯»è€…å·²ç»å‘ç°é—®é¢˜æ‰€åœ¨äº†ã€‚ä¸Šè¿°ä»£ç åœ¨è°ƒç”¨"),v("code",[e._v("FreeObj")]),e._v("çš„æ—¶å€™ï¼Œ"),v("code",[e._v("delete")]),e._v("çœ‹åˆ°çš„æ˜¯ä¸€ä¸ª"),v("code",[e._v("void *")]),e._v(", åªä¼šé‡Šæ”¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œé‚£ä¹ˆå¯¹è±¡å†…éƒ¨çš„"),v("code",[e._v("m_pStr")]),e._v("æ‰€æŒ‡å‘çš„å†…å­˜å¹¶æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œä»è€Œä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚ä¿®æ”¹ä¹Ÿæ˜¯è‡ªç„¶æ¯”è¾ƒç®€å•çš„:")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("void FreeObj(void *pObj){  delete ((MemoryLeakClass*)pObj);}\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("é‚£ä¹ˆä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½ç”±ç›¸å¯¹èµ„æ·±çš„ç¨‹åºå‘˜å»è¿›è¡ŒSDKçš„å¼€å‘ï¼Œæ— è®ºä»è®¾è®¡å’Œå®ç°ä¸Šé¢ï¼Œéƒ½å°½é‡é¿å…äº†å„ç§è®©äººæ³ªæµæ»¡æ»¡çš„å‘ã€‚")]),e._v(" "),v("h1",{attrs:{id:"_4-virtual-destructor"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-virtual-destructor"}},[e._v("#")]),e._v(" 4. Virtual destructor")]),e._v(" "),v("p",[e._v("ç°åœ¨å¤§å®¶æ¥çœ‹çœ‹è¿™ä¸ªå¾ˆå®¹æ˜“çŠ¯é”™çš„åœºæ™¯, ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„å¤šæ€åœºæ™¯ã€‚é‚£ä¹ˆåœ¨è°ƒç”¨"),v("code",[e._v("delete pObj;")]),e._v("ä¼šå‡ºç°å†…å­˜æ³„éœ²å—ï¼Ÿ")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('class Father{public:  virtual void DoSomething(){    std::cout << "Father DoSomething()" << std::endl;  }};\nclass Child : public Father{public:  Child()  {    std::cout << "Child()" << std::endl;    m_pStr = new char[100];  }\n  ~Child()  {    std::cout << "~Child()" << std::endl;    delete[] m_pStr;  }\n  void DoSomething(){    std::cout << "Child DoSomething()" << std::endl;  }protected:  char* m_pStr;};\nvoid MemoryLeakVirualDestructor(){  Father * pObj = new Child;  pObj->DoSomething();  delete pObj;}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("p",[e._v("ä¼šçš„ï¼Œå› ä¸º"),v("code",[e._v("Father")]),e._v("æ²¡æœ‰è®¾ç½®"),v("code",[e._v("Virtual ææ„å‡½æ•°")]),e._v("ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨"),v("code",[e._v("delete pObj;")]),e._v("çš„æ—¶å€™ä¼šç›´æ¥è°ƒç”¨"),v("code",[e._v("Father")]),e._v("çš„ææ„å‡½æ•°ï¼Œè€Œä¸ä¼šè°ƒç”¨"),v("code",[e._v("Child")]),e._v("çš„ææ„å‡½æ•°ï¼Œè¿™å°±å¯¼è‡´äº†"),v("code",[e._v("Child")]),e._v("ä¸­çš„"),v("code",[e._v("m_pStr")]),e._v("æ‰€æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´äº†å†…å­˜æ³„éœ²ã€‚")]),e._v(" "),v("p",[v("strong",[e._v("å¹¶ä¸æ˜¯ç»å¯¹ï¼Œå½“æœ‰è¿™ç§ä½¿ç”¨åœºæ™¯çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯è®¾ç½®åŸºç±»çš„ææ„å‡½æ•°ä¸ºè™šææ„å‡½æ•°")]),e._v("ã€‚ä¿®æ”¹å¦‚ä¸‹:")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('class Father{public:  virtual void DoSomething(){    std::cout << "Father DoSomething()" << std::endl;  }  virtual ~Father() { ; }};\nclass Child : public Father{public:  Child()  {    std::cout << "Child()" << std::endl;    m_pStr = new char[100];  }\n  virtual ~Child()  {    std::cout << "~Child()" << std::endl;    delete[] m_pStr;  }\n  void DoSomething(){    std::cout << "Child DoSomething()" << std::endl;  }protected:  char* m_pStr;};\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("h1",{attrs:{id:"_5-å¯¹è±¡å¾ªç¯å¼•ç”¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_5-å¯¹è±¡å¾ªç¯å¼•ç”¨"}},[e._v("#")]),e._v(" 5. å¯¹è±¡å¾ªç¯å¼•ç”¨")]),e._v(" "),v("p",[e._v("çœ‹ä¸‹é¢ä¾‹å­ï¼Œæ—¢ç„¶ä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œäºæ˜¯ä½¿ç”¨äº†æ™ºèƒ½æŒ‡é’ˆ"),v("code",[e._v("shared_ptr")]),e._v("ï¼›å¹¶ä¸”è¿™ä¸ªä¾‹å­å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¸ºäº†ç®€å•æ¼”ç¤ºï¼Œåªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ä½œä¸ºæ¼”ç¤ºï¼Œåˆ›å»ºäº†é“¾è¡¨åï¼Œå¯¹é“¾è¡¨è¿›è¡Œéå†ã€‚\né‚£ä¹ˆè¿™ä¸ªä¾‹å­ä¼šå¯¼è‡´å†…å­˜æ³„éœ²å—?")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('struct Node{  Node(int iVal)  {    m_iVal = iVal;  }  ~Node()  {    std::cout << "~Node(): " << "Node Value: " << m_iVal << std::endl;  }  void PrintNode(){    std::cout << "Node Value: " << m_iVal << std::endl;  }\n  std::shared_ptr<Node> m_pPreNode;  std::shared_ptr<Node> m_pNextNode;  int m_iVal;};\nvoid MemoryLeakLoopReference(){  std::shared_ptr<Node> pFirstNode = std::make_shared<Node>(100);  std::shared_ptr<Node> pSecondNode = std::make_shared<Node>(200);  pFirstNode->m_pNextNode = pSecondNode;  pSecondNode->m_pPreNode = pFirstNode;\n  //Iterate nodes  auto pNode = pFirstNode;  while (pNode)  {    pNode->PrintNode();    pNode = pNode->m_pNextNode;  }}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("å…ˆæ¥çœ‹çœ‹ä¸‹å›¾ï¼Œæ˜¯é“¾è¡¨åˆ›å»ºå®Œæˆåçš„ç¤ºæ„å›¾ã€‚æœ‰ç‚¹æ™•ä¹äº†ï¼Œæ€ä¹ˆä¸€ä¸ªåŒå‘é“¾è¡¨ç”»çš„è¿™ä¹ˆå¤æ‚ï¼Œé»„è‰²èƒŒæ™¯çš„å‡ä¸ºæ™ºèƒ½æŒ‡é’ˆæˆ–è€…æ™ºèƒ½æŒ‡é’ˆçš„ç»„æˆéƒ¨åˆ†ã€‚"),v("strong",[e._v("å…¶å®æ ¹æ®åŒå‘é“¾è¡¨çš„ç®€å•æ€§å’Œä¸‹å›¾çš„å¤æ‚æ€§ï¼Œå¯ä»¥æƒ³åˆ°ï¼Œæ™ºèƒ½æŒ‡é’ˆçš„å¼•å…¥è™½ç„¶æé«˜äº†å®‰å…¨æ€§ï¼Œä½†æ˜¯æŸå¤±çš„æ˜¯æ€§èƒ½ã€‚æ‰€ä»¥å¾€å¾€å®‰å…¨æ€§å’Œæ€§èƒ½æ˜¯éœ€è¦äº’ç›¸æƒè¡¡çš„ã€‚")]),e._v(" æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œå“ªé‡Œå†…å­˜æ³„éœ²äº†å‘¢ï¼Ÿ\n"),v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/PPrc2J6OJoVtczLogYtUiaeMlDYR6WRDWc6gEtyznBNzyZHvk6c2GaoSqiadSrZlaRXelrGqedD3A2kKxSxrphRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}}),e._v("\nå¦‚æœå‡½æ•°é€€å‡ºï¼Œé‚£ä¹ˆ"),v("code",[e._v("m_pFirstNode")]),e._v("å’Œ"),v("code",[e._v("m_pNextNode")]),e._v("ä½œä¸ºæ ˆä¸Šå±€éƒ¨å˜é‡ï¼Œæ™ºèƒ½æŒ‡é’ˆæœ¬èº«è°ƒç”¨è‡ªå·±çš„ææ„å‡½æ•°ï¼Œç»™å¼•ç”¨çš„å¯¹è±¡å¼•ç”¨è®¡æ•°å‡å»1("),v("code",[e._v("shared_ptr")]),e._v("æœ¬è´¨é‡‡ç”¨å¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ï¼Œæ‰ä¼šåˆ é™¤å¯¹è±¡)ã€‚æ­¤æ—¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°ä»ç„¶ä¸º1ï¼Œ è¿™ä¹Ÿå°±å¯¼è‡´äº†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å®é™…å†…å­˜ï¼Œå¹¶æ²¡æœ‰è¢«é‡Šæ”¾æ‰ï¼Œ ä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚\n"),v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/PPrc2J6OJoVtczLogYtUiaeMlDYR6WRDWq0j4R0gl2E045cquT1hnzo5o8UmibNNdEJC5MdjsUj1Z3gYRsnITcgw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}}),e._v("\nä½ å¯ä»¥åœ¨å‡½æ•°è¿”å›å‰æ‰‹åŠ¨è°ƒç”¨"),v("code",[e._v("pFirstNode->m_pNextNode.reset();")]),e._v("å¼ºåˆ¶è®©å¼•ç”¨è®¡æ•°å‡å»1ï¼Œ æ‰“ç ´è¿™ä¸ªå¾ªç¯å¼•ç”¨ã€‚\nè¿˜æ˜¯ä¹‹å‰é‚£å¥è¯ï¼Œå¦‚æœé€šè¿‡æ‰‹åŠ¨å»æ§åˆ¶éš¾å…ä¼šå‡ºç°é—æ¼çš„æƒ…å†µï¼Œ C++æä¾›äº†"),v("code",[e._v("weak_ptr")]),e._v("ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('struct Node{  Node(int iVal)  {    m_iVal = iVal;  }  ~Node()  {    std::cout << "~Node(): " << "Node Value: " << m_iVal << std::endl;  }  void PrintNode(){    std::cout << "Node Value: " << m_iVal << std::endl;  }\n  std::shared_ptr<Node> m_pPreNode;  std::weak_ptr<Node>    m_pNextNode;  int m_iVal;};\nvoid MemoryLeakLoopRefference(){  std::shared_ptr<Node> pFirstNode = std::make_shared<Node>(100);  std::shared_ptr<Node> pSecondNode = std::make_shared<Node>(200);  pFirstNode->m_pNextNode = pSecondNode;  pSecondNode->m_pPreNode = pFirstNode;\n  //Iterate nodes  auto pNode = pFirstNode;  while (pNode)  {    pNode->PrintNode();        pNode = pNode->m_pNextNode.lock();  }}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("çœ‹çœ‹ä½¿ç”¨äº†"),v("code",[e._v("weak_ptr")]),e._v("ä¹‹åçš„é“¾è¡¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ"),v("code",[e._v("weak_ptr")]),e._v("åªæ˜¯å¯¹ç®¡ç†çš„å¯¹è±¡åšäº†ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œå…¶å¹¶ä¸ä¼šå®é™…æ”¯é…å¯¹è±¡çš„é‡Šæ”¾ä¸å¦ï¼Œå¯¹è±¡åœ¨"),v("code",[e._v("å¼•ç”¨è®¡æ•°")]),e._v("ä¸º0çš„æ—¶å€™å°±è¿›è¡Œäº†é‡Šæ”¾ï¼Œè€Œæ— éœ€å…³å¿ƒ"),v("code",[e._v("weak_ptr")]),e._v("çš„"),v("code",[e._v("weakè®¡æ•°")]),e._v("ã€‚æ³¨æ„"),v("code",[e._v("shared_ptr")]),e._v("æœ¬èº«ä¹Ÿä¼šå¯¹"),v("code",[e._v("weakè®¡æ•°")]),e._v("åŠ 1.\né‚£ä¹ˆåœ¨å‡½æ•°é€€å‡ºåï¼Œå½“"),v("code",[e._v("pSecondNode")]),e._v("è°ƒç”¨ææ„å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡ä¸€ï¼Œ"),v("code",[e._v("å¼•ç”¨è®¡æ•°")]),e._v("ä¸º0ï¼Œé‡Šæ”¾ç¬¬äºŒä¸ªNodeï¼Œåœ¨é‡Šæ”¾ç¬¬äºŒä¸ªNodeçš„è¿‡ç¨‹ä¸­åˆè°ƒç”¨äº†"),v("code",[e._v("m_pPreNode")]),e._v("çš„ææ„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªNodeå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼Œå†åŠ ä¸Š"),v("code",[e._v("pFirstNode")]),e._v("ææ„å‡½æ•°å¯¹ç¬¬ä¸€ä¸ªNodeå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¹Ÿå‡å»1ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªNodeå¯¹è±¡çš„"),v("code",[e._v("å¼•ç”¨è®¡æ•°")]),e._v("ä¹Ÿä¸º0ï¼Œç¬¬ä¸€ä¸ªNodeå¯¹è±¡ä¹Ÿè¿›è¡Œäº†é‡Šæ”¾ã€‚\n"),v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/PPrc2J6OJoVtczLogYtUiaeMlDYR6WRDWtjmvSSnqDw8pD5RhsNRg5e9UCbomIrRW3icicHQN0X78fIJ0ZW61F2NA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}}),e._v("\nå¦‚æœå°†ä¸Šè¿°ä»£ç æ”¹ä¸ºåŒå‘å¾ªç¯é“¾è¡¨ï¼Œå»é™¤é‚£ä¸ªå¾ªç¯éå†Nodeçš„ä»£ç ï¼Œé‚£ä¹ˆæœ€åNodeçš„å†…å­˜ä¼šè¢«é‡Šæ”¾å—ï¼Ÿè¿™ä¸ªé—®é¢˜ç•™ç»™è¯»è€…ã€‚")]),e._v(" "),v("h1",{attrs:{id:"_6-èµ„æºæ³„éœ²"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_6-èµ„æºæ³„éœ²"}},[e._v("#")]),e._v(" 6. èµ„æºæ³„éœ²")]),e._v(" "),v("p",[e._v("å¦‚æœè¯´äº›ä½œæ–‡çš„è¯ï¼Œè¿™ä¸€ç« èŠ‚ï¼Œå¯èƒ½æœ‰ç‚¹åé¢˜äº†ã€‚æœ¬ç« è¦è®²çš„æ˜¯å¹¿ä¹‰ä¸Šçš„èµ„æºæ³„éœ²ï¼Œæ¯”å¦‚å¥æŸ„æˆ–è€…fdæ³„éœ²ã€‚è¿™äº›ä¹Ÿç®—æ˜¯å†…å­˜æ³„éœ²çš„ä¸€ç‚¹ç‚¹æ‰©å±•ï¼Œå†™ä½œæ–‡çš„ä¸€ç‚¹ç‚¹å»¶ä¼¸å§ã€‚\nçœ‹çœ‹ä¸‹è¿°ä¾‹å­, å…¶åœ¨æ“ä½œå®Œæ–‡ä»¶åï¼Œå¿˜è®°è°ƒç”¨"),v("code",[e._v("CloseHandle(hFile);")]),e._v("äº†ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('void MemroyLeakFileHandle(){  HANDLE hFile = CreateFile(LR"(C:\\test\\doc.txt)",     GENERIC_READ,    FILE_SHARE_READ,    NULL,     OPEN_EXISTING,     FILE_ATTRIBUTE_NORMAL,    NULL);\n  if (INVALID_HANDLE_VALUE == hFile)  {    std::cerr << "Open File error!" << std::endl;    return;  }\n  const int BUFFER_SIZE = 100;  char pDataBuffer[BUFFER_SIZE];  DWORD dwBufferSize;  if (ReadFile(hFile,      pDataBuffer,      BUFFER_SIZE,      &dwBufferSize,      NULL))  {    std::cout << dwBufferSize << std::endl;  }}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br")])]),v("p",[e._v("ä¸Šè¿°ä½ å¯ä»¥ç”¨"),v("code",[e._v("RAII")]),e._v("æœºåˆ¶å»å°è£…"),v("code",[e._v("hFile")]),e._v("ä»è€Œè®©å…¶åœ¨å‡½æ•°é€€å‡ºåï¼Œç›´æ¥è°ƒç”¨"),v("code",[e._v("CloseHandle(hFile);")]),e._v("ã€‚C++æ™ºèƒ½æŒ‡é’ˆæä¾›äº†è‡ªå®šä¹‰"),v("code",[e._v("deleter")]),e._v("çš„åŠŸèƒ½ï¼Œè¿™å°±å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ª"),v("code",[e._v("deleter")]),e._v("çš„åŠŸèƒ½ï¼Œæ”¹å†™ä»£ç å¦‚ä¸‹ã€‚ä¸è¿‡æœ¬äººæ›´å€¾å‘äºä½¿ç”¨ç±»ä¼¼äº"),v("code",[e._v("golang defer")]),e._v("çš„å®ç°æ–¹å¼ã€‚")]),e._v(" "),v("ul",[v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li"),e._v(" "),v("li")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('void MemroyLeakFileHandle(){  HANDLE hFile = CreateFile(LR"(C:\\test\\doc.txt)",     GENERIC_READ,    FILE_SHARE_READ,    NULL,     OPEN_EXISTING,     FILE_ATTRIBUTE_NORMAL,    NULL);  std::unique_ptr< HANDLE, std::function<void(HANDLE*)>> phFile(    &hFile,     [](HANDLE* pHandle) {      if (nullptr != pHandle)      {        std::cout << "Close Handle" << std::endl;        CloseHandle(*pHandle);      }    });\n  if (INVALID_HANDLE_VALUE == *phFile)  {    std::cerr << "Open File error!" << std::endl;    return;  }\n  const int BUFFER_SIZE = 100;  char pDataBuffer[BUFFER_SIZE];  DWORD dwBufferSize;  if (ReadFile(*phFile,      pDataBuffer,      BUFFER_SIZE,      &dwBufferSize,      NULL))  {    std::cout << dwBufferSize << std::endl;  }}\n')])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br")])]),v("p",[v("img",{attrs:{src:"http://mmbiz.qpic.cn/mmbiz_png/0m4YX595FonD8gMhCztUfGQ3ZPuumz87jAoXia6ySYCOe7srlRialEoHmaAoibqmVbrobCpSKLabzDnaYbXfzcldA/0?wx_fmt=png",alt:"img"}})]),e._v(" "),v("p",[v("strong",[e._v("Cè¯­è¨€ä¸CPPç¼–ç¨‹")])]),e._v(" "),v("p",[e._v("åˆ†äº«Cè¯­è¨€/C++ï¼Œæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œè®¡ç®—æœºåŸºç¡€ï¼Œæ“ä½œç³»ç»Ÿç­‰")]),e._v(" "),v("p",[e._v("51ç¯‡åŸåˆ›å†…å®¹")]),e._v(" "),v("p",[e._v("å…¬ä¼—å·")]),e._v(" "),v("p",[e._v("å–œæ¬¢æ­¤å†…å®¹çš„äººè¿˜å–œæ¬¢")]),e._v(" "),v("p",[e._v("å¾®è½¯ Win11 è¢« Linux ç¤¾åŒºç‚®è½°ï¼šèƒŒå›äº†ç”¨æˆ·ã€ä¸è¦å®‰è£…")]),e._v(" "),v("p",[e._v("æ‹ä¹ Python")]),e._v(" "),v("p",[e._v("ä¸å–œæ¬¢")]),e._v(" "),v("p",[e._v("ä¸çœ‹çš„åŸå› ")]),e._v(" "),v("p",[e._v("ç¡®å®š")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("å†…å®¹è´¨é‡ä½")])]),e._v(" "),v("li"),e._v(" "),v("li",[v("p",[e._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),e._v(" "),v("p",[e._v("æœ€å…¨Linuxåº”æ€¥å“åº”æŠ€å·§")]),e._v(" "),v("p",[e._v("LemonSec")]),e._v(" "),v("p",[e._v("ä¸å–œæ¬¢")]),e._v(" "),v("p",[e._v("ä¸çœ‹çš„åŸå› ")]),e._v(" "),v("p",[e._v("ç¡®å®š")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("å†…å®¹è´¨é‡ä½")])]),e._v(" "),v("li"),e._v(" "),v("li",[v("p",[e._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),e._v(" "),v("p",[e._v("Modern C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£")]),e._v(" "),v("p",[e._v("Cè¯­è¨€ä¸C++ç¼–ç¨‹")]),e._v(" "),v("p",[e._v("ä¸å–œæ¬¢")]),e._v(" "),v("p",[e._v("ä¸çœ‹çš„åŸå› ")]),e._v(" "),v("p",[e._v("ç¡®å®š")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("å†…å®¹è´¨é‡ä½")])]),e._v(" "),v("li"),e._v(" "),v("li",[v("p",[e._v("ä¸çœ‹æ­¤å…¬ä¼—å·")])])]),e._v(" "),v("p",[v("img",{attrs:{src:"https://mp.weixin.qq.com/mp/qrcode?scene=10000004&size=102&__biz=MzI3ODQ3OTczMw==&mid=2247492279&idx=1&sn=397be65f0ef417ed237dbbb2027eed00&send_time=",alt:"img"}})]),e._v(" "),v("p",[e._v("å¾®ä¿¡æ‰«ä¸€æ‰«\nå…³æ³¨è¯¥å…¬ä¼—å·")]),e._v(" "),v("p",[e._v("ï¼šï¼Œã€‚è§†é¢‘å°ç¨‹åºèµï¼Œè½»ç‚¹ä¸¤ä¸‹å–æ¶ˆèµåœ¨çœ‹ï¼Œè½»ç‚¹ä¸¤ä¸‹å–æ¶ˆåœ¨çœ‹")])])}),[],!1,null,null,null);_.default=l.exports}}]);