(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{530:function(l,t,i){"use strict";i.r(t);var _=i(42),v=Object(_.a)({},(function(){var l=this,t=l.$createElement,i=l._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[i("hr"),l._v(" "),i("ul",[i("li",[l._v("title: â€œæˆ‘çš„æŠ€æœ¯æ ˆé€‰å‹â€")])]),l._v(" "),i("hr"),l._v(" "),i("ul",[i("li"),l._v(" "),i("li",[i("ul",[i("li",[l._v("Jiajun çš„ç¼–ç¨‹éšæƒ³å·¥ä½œå·²ç»å‡ å¹´äº†ï¼Œé€æ­¥æ‘¸ç´¢åˆ°äº†è‡ªå·±çš„æŠ€æœ¯ä¸Šé™ â€” è¿˜æ˜¯è®¡ç®—æœºäº”å¤§ä»¶ã€‚")])])]),l._v(" "),i("li",[i("p",[l._v("å·¥ä½œå·²ç»å‡ å¹´äº†ï¼Œé€æ­¥æ‘¸ç´¢åˆ°äº†è‡ªå·±çš„æŠ€æœ¯ä¸Šé™ â€” è¿˜æ˜¯è®¡ç®—æœºäº”å¤§ä»¶ã€‚ä¸æ–­çš„è¿½æ–°å’Œæ‰©å±•å¹¿åº¦å·²ç»æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œå®ƒä»¬çš„å®ç°åŸç†ä¹Ÿ éƒ½äº†è§£çš„å·®ä¸å¤šï¼Œå› æ­¤ç°åœ¨æ˜¯æ—¶å€™å¼€å§‹æ”¶ç¼©æŠ€æœ¯æ ˆï¼Œç¼©å°éœ€è¦ä¸æ–­æ›´æ–°çš„çŸ¥è¯†èŒƒå›´ï¼ŒèŠ‚çœç²¾åŠ›å»åšæ›´æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼ŒæŠŠå¸¸ç”¨æŠ€æœ¯æ ˆå›ºå®š ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿æŒå°é‡æ›´æ–°çš„çŠ¶æ€ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æ³¨ï¼šæˆ‘çš„æŠ€æœ¯é€‰å‹é£æ ¼åå‘äº UNIX çš„ KISS é£ï¼Œå–œæ¬¢å°è€Œç¾çš„ä¸œè¥¿ ğŸ˜ƒ")])]),l._v(" "),i("li",[i("p",[l._v("ç¼–ç¨‹è¯­è¨€")])]),l._v(" "),i("li",[i("p",[l._v("ç¼–ç¨‹è¯­è¨€ Python å’Œ Golangï¼š")])]),l._v(" "),i("li",[i("ul",[i("li",[l._v("Python ä¸»è¦å†™ Web      æœåŠ¡ã€å°å·¥å…·ã€è„šæœ¬ç­‰ç­‰ã€‚Python çš„ä¼˜ç‚¹æ˜¯å†™èµ·æ¥éå¸¸å¿«ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ªåˆ é™¤è¿‡é‡çš„ MySQL å¤‡ä»½æ•°æ®çš„è„šæœ¬ï¼Œæ ¸å¿ƒä»£ç  6 è¡Œå°±æå®šäº†ã€‚å¦‚æœæ˜¯      Go æ¥å†™çš„è¯ï¼Œä¼°è®¡è¦ 2-3 å€ï¼Œå…¶å®ƒè¯­è¨€å°±æ›´å¤šäº†ã€‚Python çš„ç¼ºç‚¹å°±æ˜¯é€Ÿåº¦æ…¢äº›ï¼Œä½†æ˜¯æˆ‘å†™äº†ä¸€ä¸ª QPS æ•°ç™¾çš„åº”ç”¨ï¼Œè·‘åœ¨      ç”Ÿäº§æœåŠ¡å™¨ä¸Šï¼Œå“åº”é€Ÿåº¦ä¹Ÿåœ¨ 20ms å·¦å³ï¼Œæ‰€ä»¥å¯¹äºç»å¤§å¤šæ•°ç½‘ç«™æ¥è¯´ï¼Œå®Œå…¨å¤Ÿç”¨ã€‚å¦‚æœä¸€å®šè¦æŒ‘ä¸€ä¸ª Python çš„ç¼ºç‚¹çš„è¯ï¼Œé‚£å°±æ˜¯éƒ¨ç½²æ²¡æœ‰ Go      æ–¹ä¾¿ã€‚")])])]),l._v(" "),i("li",[i("p",[l._v("å…¶å®ç»å¤§éƒ¨åˆ† web åº”ç”¨ï¼Œç“¶é¢ˆéƒ½ä¸æ˜¯ç¼–ç¨‹è¯­è¨€ã€‚Python Flask æ¡†æ¶å¹³å‡å“åº”æ—¶é—´ 15-20ms å·¦å³ï¼Œç›¸æ¯”å…¬ç½‘ä¼ è¾“é€Ÿåº¦æ¥è¯´ï¼Œå®Œå…¨å¯ä»¥æ¥å—ã€‚ å½“ç„¶äº†ï¼ŒGo å›ºç„¶æ›´å¿«ï¼Œä¸€èˆ¬ 1ms ä»¥å†…ï¼Œå†…å­˜å ç”¨ä¹Ÿå°å¾ˆå¤šã€‚")])]),l._v(" "),i("li",[i("p",[l._v('def find_outdated():\nfor i in glob.glob("/data/backup/mysql/*.sql.gz"):\nyear, month, day = i.split(".")[0].split("-")[-3:]\nt = datetime.datetime(year=int(year), month=int(month), day=int(day))\nif t < datetime.datetime.now() - datetime.timedelta(days=7):\nos.remove(i)')])]),l._v(" "),i("li",[i("ul",[i("li",[l._v("Go      ä¸»è¦å†™ç³»ç»Ÿå·¥å…·å’Œéœ€è¦é«˜å¹¶å‘çš„è½¯ä»¶ã€‚æ¯”å¦‚å¦‚æœæˆ‘è¦è‡ªå·±å®ç°ä¸€ä¸ªç½‘å…³ï¼Œé‚£ä¹ˆæˆ‘å°±ä¼šè€ƒè™‘ä½¿ç”¨ Golangï¼›å¦å¤–ï¼Œå¤„ç†äºŒè¿›åˆ¶åè®®çš„æ—¶å€™ Golang      ä¹Ÿæ–¹ä¾¿ç‚¹ã€‚è¿˜æœ‰å°±æ˜¯å¦‚æœç“¶é¢ˆåœ¨å†…å­˜ä½¿ç”¨ä¸Šï¼Œæˆ‘ä¹Ÿä¼šè€ƒè™‘ç”¨ Go è€Œä¸æ˜¯ Pythonã€‚")])])]),l._v(" "),i("li",[i("p",[l._v("Rust æˆ‘ä¹Ÿè€ƒè™‘è¿‡è¦ä¸è¦å­¦ï¼Œä½†æ˜¯æœ€ç»ˆæˆ‘å‘ç°æˆ‘çš„éœ€æ±‚ç”¨ä¸ä¸Š Rustï¼Œä¸éœ€è¦é‚£ä¹ˆé«˜çš„é€Ÿåº¦ï¼Œä¸»è¦å°±æ˜¯å†™ webï¼Œæ­¤å¤–å†™ç‚¹å°å·¥å…·ã€‚Rust è¿˜æ˜¯å¤ªå•°å—¦äº†ã€‚ C++ å’Œ Java ä»¥å‰ä¹Ÿè€ƒè™‘è¿‡ï¼Œä¸€ä¸ªå¤ªå¤æ‚ï¼Œä¸€ä¸ªå¤ªå•°å—¦ï¼Œç•¥ã€‚æœ‰ Python å’Œ Golangï¼Œå¿«é€Ÿå’Œé«˜æ€§èƒ½éƒ½å¤Ÿäº†ï¼Œè¿˜ä¸å¤Ÿçš„è¯ï¼Œé‚£è¯´æ˜çœŸçš„è¯¥åŠ æœºå™¨äº†ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æ•°æ®åº“")])]),l._v(" "),i("li",[i("p",[l._v("æ•°æ®åº“ä½¿ç”¨ MySQLï¼ŒMySQL åº”å½“ç©çš„å¾ˆå¾ˆç†Ÿæ‚‰æ‰è¡Œã€‚åŸå› æ˜¯ MySQL æ¯” PG ç®€å•å¾—å¤š (é…ç½®ç®¡ç†)ï¼Œè€Œä¸”åœ¨ä¸»ä»ä¸Šæœ‰æ›´å¥½åœ°æ”¯æŒã€‚æ­¤å‰æˆ‘ä¹Ÿæœ‰ä½¿ç”¨ SQLiteï¼Œ ä½†æ˜¯è¯´å®è¯ï¼Œè„‘å­é‡ŒåŒæ—¶ç»´æŠ¤æ›´æ–°å¤šä¸ªæ•°æ®åº“çš„çŸ¥è¯†ï¼Œå¤ªè´¹åŠ›ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç›¸é€šçš„ï¼Œä½†æ˜¯ç»†èŠ‚å¤„åˆä¸ç›¸åŒï¼Œæ¯æ¬¡è¿˜è¦æŸ¥æ–‡æ¡£ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥ è¿˜æ˜¯ç”¨æœ€ç†Ÿæ‚‰çš„é‚£ä¸ªã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æ­¤å¤– MySQL æœ€å¼ºå¤§çš„ä¼˜ç‚¹å°±æ˜¯ç¤¾åŒºï¼Œç¢°åˆ°ä»€ä¹ˆé—®é¢˜ï¼ŒåŸºæœ¬éƒ½èƒ½å¤Ÿæœåˆ°ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("å¤‡ä»½å·¥å…·")])]),l._v(" "),i("li",[i("p",[l._v("MySQL ä½¿ç”¨ mysqldump å’Œ crontabï¼Œå¦‚ä¸‹ï¼š")])]),l._v(" "),i("li",[i("p",[l._v("@daily /usr/bin/mysqldump --single-transaction --quick --lock-tables=false --all-databases | gzip -c > /data/backup/mysql/full-backup-$(date + %F).sql.gz")])]),l._v(" "),i("li",[i("p",[l._v("ç„¶åå†ä½¿ç”¨ rsync è¿›è¡Œå¼‚åœ°åŒæ­¥ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ç¼“å­˜ã€é˜Ÿåˆ—")])]),l._v(" "),i("li",[i("p",[l._v("ç¼“å­˜å’Œé˜Ÿåˆ—ç»Ÿä¸€ä½¿ç”¨ Redisã€‚ç”¨ä¸ä¸Š RabbitMQ è¿™ç±»é‡é‡çº§çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚Redis ä¸€ç®­åŒé›•ï¼Œè€Œä¸”å¥½ç”¨ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("Web æœåŠ¡å™¨")])]),l._v(" "),i("li",[i("p",[l._v("Web æœåŠ¡å™¨ä½¿ç”¨ Nginxï¼ŒNginx è¿˜å¯ä»¥ä½œä¸ºç«¯å£è½¬å‘å·¥å…· (ä½¿ç”¨ Nginx çš„ stream æ¨¡å—)ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ç«¯å£è½¬å‘ä¹Ÿå¯ä»¥ä½¿ç”¨ frpã€‚")])]),l._v(" "),i("li",[i("p",[l._v("éƒ¨ç½²")])]),l._v(" "),i("li",[i("p",[l._v("éƒ¨ç½²ç»Ÿä¸€ä½¿ç”¨ supervisorã€‚ä¹‹å‰æˆ‘ä¹Ÿæœ‰ä½¿ç”¨ Dockerï¼Œä½†æ˜¯è¶Šå‘è§‰å¾—ï¼Œæˆ‘ä¸€ä¸ªäººç»´æŠ¤çš„ç³»ç»Ÿï¼Œä¸å¿…ç”¨ Dockerï¼Œå› ä¸ºç³»ç»Ÿä¾èµ–ç­‰å…¨éƒ½æ˜¯æˆ‘å¯ä»¥ æ§åˆ¶çš„ã€‚Go åŸºæœ¬æ— ä¾èµ–ï¼ŒPython å¯ä»¥ä½¿ç”¨ virtualenv æˆ–è€… venv è§£å†³ä¾èµ–é—®é¢˜ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ä»€ä¹ˆï¼Ÿk8sï¼Ÿä¸ªäººï¼Œç”šè‡³æ˜¯å°å›¢é˜Ÿæ ¹æœ¬æ²¡æœ‰å¿…è¦ä¸Šè¿™ä¸ªç©æ„å„¿ã€‚ä¸è¿‡å¦‚æœæ˜¯å›¢é˜Ÿï¼Œå€’æ˜¯å¯ä»¥ä¸Šä¸Š Dockerã€‚")])]),l._v(" "),i("li",[i("p",[l._v("è‡ªåŠ¨åŒ–éƒ¨ç½²ä½¿ç”¨ ansibleï¼Œæˆ‘è‡ªå·±çš„ç³»ç»Ÿå°±æ‡’å¾—æ­ CI/CD äº†ï¼Œæ¯æ¬¡è¦éƒ¨ç½²çš„æ—¶å€™ç›´æ¥è·‘ ansible-playbook å³å¯ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("Web æ¡†æ¶")])]),l._v(" "),i("li",[i("p",[l._v("Python ä½¿ç”¨ Flaskï¼ŒGo ä½¿ç”¨ GINã€‚Python éœ€è¦æ­é… gunicorn + gevent ä½¿ç”¨ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ORM å’Œæ•°æ®åº“ migration")])]),l._v(" "),i("li",[i("p",[l._v("Python ä½¿ç”¨ SQLAlchemy + alembicï¼ŒGo æš‚æ—¶æ²¡æ‰¾åˆ°é¡ºæ‰‹çš„ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("å¼‚æ­¥ä»»åŠ¡æ¡†æ¶")])]),l._v(" "),i("li",[i("p",[l._v("Python ä½¿ç”¨ python-rq ä½œä¸ºå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ŒGolang æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å¥½çš„ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ä¸ºå•¥ä¸ç”¨ celeryï¼Ÿcelery å¤ªå¤§äº†ï¼Œè€Œä¸”é‡åˆ°è¿‡å¤šæ¬¡ worker æ— æ•…æ­»æ‰çš„æƒ…å†µï¼ŒåŒ…æ‹¬å¾ˆå¤šç½‘å‹ä¹Ÿé‡åˆ°è¿‡ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æ‰¾åˆ°åŸå› ï¼Œåæ¥æ¢äº† rq ä¹‹åå‘ç° rq ç®€å•å¥½ç”¨ï¼Œå°±åˆ‡æ¢äº†ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("ç›‘æ§")])]),l._v(" "),i("li",[i("p",[l._v("ç›‘æ§ä½¿ç”¨ Prometheus + Grafana + AlertManager + Exporter å…¨å®¶æ¡¶ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æ—¥å¿—æ”¶é›†")])]),l._v(" "),i("li",[i("p",[l._v("æˆ‘è‡ªå·±çš„æœåŠ¡ç°åœ¨ä¸è¿›è¡Œæ—¥å¿—æ”¶é›†ï¼Œä¹‹å‰ç”¨è¿‡ EFK/ELKï¼Œä½†æ˜¯å¤ªå å†…å­˜ï¼Œè€Œæˆ‘çš„åœºæ™¯ç›´æ¥å»æœåŠ¡å™¨ä¸Š tail + grep å°±å¤Ÿäº†ï¼Œç”¨ EFK å®Œå…¨æ˜¯æ€é¸¡ç”¨ç‰›åˆ€ã€‚ çœ‹äº†ä¸€ä¸‹ Grafana è®¾è®¡çš„ lokiï¼Œè®¾è®¡æŒºä¸é”™ï¼Œä½†æ˜¯ç°åœ¨è¿˜ä¸å¤Ÿæˆç†Ÿã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æœç´¢å¼•æ“")])]),l._v(" "),i("li",[i("p",[l._v("ç›®å‰æš‚æ—¶ä½¿ç”¨ MySQL æ¥åšï¼Œä»¥åå¦‚æœæœ‰éœ€è¦ï¼Œå†å­¦ä¹  ElasticSearchï¼Œä¹‹å‰ç”¨è¿‡ ESï¼Œä½†æ˜¯é¢‘ç‡å¤ªä½ï¼Œå­¦äº†åˆå¿˜è®°äº†ï¼ŒMySQL è¶³çŸ£ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("é”™è¯¯è¿½è¸ª")])]),l._v(" "),i("li",[i("p",[l._v("é”™è¯¯è¿½è¸ªä½¿ç”¨ Sentryï¼Œç›´æ¥ç”¨ "),i("a",{attrs:{href:"https://sentry.io/",target:"_blank",rel:"noopener noreferrer"}},[l._v("å®˜ç½‘"),i("OutboundLink")],1),l._v(" å°±å¤Ÿäº†ã€‚")])]),l._v(" "),i("li",[i("p",[l._v("æ€»ç»“")])]),l._v(" "),i("li",[i("p",[l._v("ä»¥ä¸Šå°±æ˜¯æˆ‘è¿™å‡ å¹´æ¥è§¦è¿‡ç„¶åç­›é€‰ä¸‹æ¥çš„æŠ€æœ¯æ ˆï¼Œæœ‰ä¸€äº›å¯èƒ½æ¼æ‰äº†ï¼Œæœ‰ä¸€äº›è¢«æˆ‘æ”¾å¼ƒçš„åŸå› ä¹Ÿæ²¡å†™ä¸Šï¼Œæ¬¢è¿ä¸€èµ·äº¤æµ ğŸ˜ƒ")])]),l._v(" "),i("li",[i("p",[l._v("æ¥è‡ª "),i("a",{attrs:{href:"https://jiajunhuang.com/articles/2019_11_13-tech_stack.md.html",target:"_blank",rel:"noopener noreferrer"}},[l._v("https://jiajunhuang.com/articles/2019_11_13-tech_stack.md.html"),i("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=v.exports}}]);